/*! modernizr 3.0.0pre (Custom Build) | MIT */
!function(e,t,i){function n(e,t){return typeof e===t}function s(){var e,t,i,s,o,r,a;for(var l in g){if(e=[],t=g[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(i=0;i<t.options.aliases.length;i++)e.push(t.options.aliases[i].toLowerCase());for(s=n(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)r=e[o],a=r.split("."),1===a.length?_[a[0]]=s:2===a.length&&(_[a[0]][a[1]]=s),b.push((s?"":"no-")+a.join("-"))}}function o(e){var t=w.className,i=_._config.classPrefix||"",n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");t=t.replace(n,"$1"+i+"js$2"),_._config.enableClasses&&(t+=" "+i+e.join(" "+i),w.className=t)}function r(e,t){if("object"==typeof e)for(var i in e)y(e,i)&&r(i,e[i]);else{e=e.toLowerCase();var n=e.split("."),s=_[n[0]];if(2==n.length&&(s=s[n[1]]),"undefined"!=typeof s)return _;t="function"==typeof t?t():t,1==n.length?_[n[0]]=t:2==n.length&&(_[n[0]][n[1]]=t),o([(t?"":"no-")+n.join("-")]),_._trigger(e,t)}return _}function a(e,t){return!!~(""+e).indexOf(t)}function l(){var e=t.body;return e||(e=k("body"),e.fake=!0),e}function c(e,t,i,n){var s,o,r,a,c="modernizr",u=k("div"),d=l();if(parseInt(i,10))for(;i--;)r=k("div"),r.id=n?n[i]:c+(i+1),u.appendChild(r);return s=["&#173;",'<style id="s',c,'">',e,"</style>"].join(""),u.id=c,(d.fake?d:u).innerHTML+=s,d.appendChild(u),d.fake&&(d.style.background="",d.style.overflow="hidden",a=w.style.overflow,w.style.overflow="hidden",w.appendChild(d)),o=t(u,e),d.fake?(d.parentNode.removeChild(d),w.style.overflow=a,w.offsetHeight):u.parentNode.removeChild(u),!!o}function u(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(t,n){var s=t.length;if("CSS"in e&&"supports"in e.CSS){for(;s--;)if(e.CSS.supports(u(t[s]),n))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];s--;)o.push("("+u(t[s])+":"+n+")");return o=o.join(" or "),c("@supports ("+o+") { #modernizr { position: absolute; } }",function(t){return"absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position})}return i}function h(e,t,s,o){function r(){c&&(delete C.style,delete C.modElem)}if(o=n(o,"undefined")?!1:o,!n(s,"undefined")){var l=d(e,s);if(!n(l,"undefined"))return l}var c,u,h,p;C.style||(c=!0,C.modElem=k("modernizr"),C.style=C.modElem.style);for(u in e)if(h=e[u],p=C.style[h],!a(h,"-")&&C.style[h]!==i){if(o||n(s,"undefined"))return r(),"pfx"==t?h:!0;try{C.style[h]=s}catch(f){}if(C.style[h]!=p)return r(),"pfx"==t?h:!0}return r(),!1}function p(e,t,i){var s;for(var o in e)if(e[o]in t)return i===!1?e[o]:(s=t[e[o]],n(s,"function")&&"bind"in s?s.bind(i||t):s);return!1}function f(e,t,i,s,o){var r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+P.join(r+" ")+r).split(" ");return n(t,"string")||n(t,"undefined")?h(a,t,s,o):(a=(e+" "+E.join(r+" ")+r).split(" "),p(a,t,i))}function m(e,t,n){return f(e,i,i,t,n)}var g=[],v={_version:"v3.0.0pre",_config:{classPrefix:"",enableClasses:!0,usePrefixes:!0},_q:[],on:function(e,t){setTimeout(function(){t(this[e])},0)},addTest:function(e,t,i){g.push({name:e,fn:t,options:i})},addAsyncTest:function(e){g.push({name:null,fn:e})}},_=function(){};_.prototype=v,_=new _;var y,b=[],w=t.documentElement;!function(){var e={}.hasOwnProperty;y=n(e,"undefined")||n(e.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(t,i){return e.call(t,i)}}(),v._l={},v.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),_.hasOwnProperty(e)&&setTimeout(function(){_._trigger(e,_[e])},0)},v._trigger=function(e,t){if(this._l[e]){var i=this._l[e];setTimeout(function(){var e,n;for(e=0;e<i.length;e++)(n=i[e])(t)},0),delete this._l[e]}},_._q.push(function(){v.addTest=r});var x;!function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=x.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=k[e[b]];return t||(t={},w++,e[b]=w,k[w]=t),t}function o(e,i,n){if(i||(i=t),m)return i.createElement(e);n||(n=s(i));var o;return o=n.cache[e]?n.cache[e].cloneNode():y.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),o.canHaveChildren&&!_.test(e)?n.frag.appendChild(o):o}function r(e,i){if(e||(e=t),m)return e.createDocumentFragment();i=i||s(e);for(var o=i.frag.cloneNode(),r=0,a=n(),l=a.length;l>r;r++)o.createElement(a[r]);return o}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return x.shivMethods?o(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function l(e){e||(e=t);var n=s(e);return!x.shivCSS||f||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}")),m||a(e,n),e}function c(e){for(var t,i=e.getElementsByTagName("*"),s=i.length,o=RegExp("^(?:"+n().join("|")+")$","i"),r=[];s--;)t=i[s],o.test(t.nodeName)&&r.push(t.applyElement(u(t)));return r}function u(e){for(var t,i=e.attributes,n=i.length,s=e.ownerDocument.createElement(C+":"+e.nodeName);n--;)t=i[n],t.specified&&s.setAttribute(t.nodeName,t.nodeValue);return s.style.cssText=e.style.cssText,s}function d(e){for(var t,i=e.split("{"),s=i.length,o=RegExp("(^|[\\s,>+~])("+n().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),r="$1"+C+"\\:$2";s--;)t=i[s]=i[s].split("}"),t[t.length-1]=t[t.length-1].replace(o,r),i[s]=t.join("}");return i.join("{")}function h(e){for(var t=e.length;t--;)e[t].removeNode()}function p(e){function t(){clearTimeout(r._removeSheetTimer),n&&n.removeNode(!0),n=null}var n,o,r=s(e),a=e.namespaces,l=e.parentWindow;return!T||e.printShived?e:("undefined"==typeof a[C]&&a.add(C),l.attachEvent("onbeforeprint",function(){t();for(var s,r,a,l=e.styleSheets,u=[],h=l.length,p=Array(h);h--;)p[h]=l[h];for(;a=p.pop();)if(!a.disabled&&S.test(a.media)){try{s=a.imports,r=s.length}catch(f){r=0}for(h=0;r>h;h++)p.push(s[h]);try{u.push(a.cssText)}catch(f){}}u=d(u.reverse().join("")),o=c(e),n=i(e,u)}),l.attachEvent("onafterprint",function(){h(o),clearTimeout(r._removeSheetTimer),r._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var f,m,g="3.6.2",v=e.html5||{},_=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,y=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",w=0,k={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",f="hidden"in e,m=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){f=!0,m=!0}}(),x={elements:v.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:g,shivCSS:v.shivCSS!==!1,supportsUnknownElements:m,shivMethods:v.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:r},e.html5=x,l(t);var S=/^$|\b(?:all|print)\b/,C="html5shiv",T=!m&&function(){var i=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof i.applyElement||"undefined"==typeof i.removeNode||"undefined"==typeof e.attachEvent)}();x.type+=" print",x.shivPrint=p,p(t)}(this,t),function(e,t,i){function n(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(e,i,s,o,a,l){var c,u,h=t.createElement("script");o=o||d.errorTimeout,h.src=e;for(u in s)h.setAttribute(u,s[u]);i=l?r:i||_,h.onreadystatechange=h.onload=function(){!c&&n(h.readyState)&&(c=1,i(),h.onload=h.onreadystatechange=null)},p(function(){c||(c=1,i(1))},o),E(),a?h.onload():f.parentNode.insertBefore(h,f)}function o(e,i,n,s,o,a){var l,c=t.createElement("link");s=s||d.errorTimeout,i=a?r:i||_,c.href=e,c.rel="stylesheet",c.type="text/css";for(l in n)c.setAttribute(l,n[l]);o||(E(),f.parentNode.insertBefore(c,f),p(i,0))}function r(){var e=g.shift();v=1,e?e.t?p(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),r()):v=0}function a(e,i,s,o,a,l,c){function u(t){if(!m&&n(h.readyState)&&(y.r=m=1,!v&&r(),t)){"img"!=e&&p(function(){w.removeChild(h)},50);for(var s in F[i])F[i].hasOwnProperty(s)&&F[i][s].onload();h.onload=h.onreadystatechange=null}}c=c||d.errorTimeout;var h=t.createElement(e),m=0,_=0,y={t:s,s:i,e:a,a:l,x:c};1===F[i]&&(_=1,F[i]=[]),"object"==e?(h.data=i,h.setAttribute("type","text/css")):(h.src=i,h.type=e),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){u.call(this,_)},g.splice(o,0,y),"img"!=e&&(_||2===F[i]?(E(),w.insertBefore(h,b?null:f),p(u,c)):F[i].push(h))}function l(e,t,i,n,s){return v=0,t=t||"j",D(e)?a("c"==t?C:S,e,t,this.i++,i,n,s):(g.splice(this.i++,0,e),1==g.length&&r()),this}function c(){var e=d;return e.loader={load:l,i:0},e}var u,d,h=t.documentElement,p=e.setTimeout,f=t.getElementsByTagName("script")[0],m={}.toString,g=[],v=0,_=function(){},y="MozAppearance"in h.style,b=y&&!!t.createRange().compareNode,w=b?h:f.parentNode,x=e.opera&&"[object Opera]"==m.call(e.opera),k=!!t.attachEvent&&!x,S=y?"object":k?"script":"img",C=k?"script":S,T=Array.isArray||function(e){return"[object Array]"==m.call(e)},M=function(e){return Object(e)===e},D=function(e){return"string"==typeof e},P=function(e){return"[object Function]"==m.call(e)},E=function(){f&&f.parentNode||(f=t.getElementsByTagName("script")[0])},A=[],F={},I={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};d=function(e){function t(e){var t,i,n,s=e.split("!"),o=A.length,r=s.pop(),a=s.length,l={url:r,origUrl:r,prefixes:s};for(i=0;a>i;i++)n=s[i].split("="),t=I[n.shift()],t&&(l=t(l,n));for(i=0;o>i;i++)l=A[i](l);return l}function n(e){var t=e.split("?")[0];return t.substr(t.lastIndexOf(".")+1)}function s(e,s,o,r,a){var l=t(e),u=l.autoCallback;return n(l.url),l.bypass?void 0:(s&&(s=P(s)?s:s[e]||s[r]||s[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,s,o,r,a):(F[l.url]&&l.reexecute!==!0?l.noexec=!0:F[l.url]=1,e&&o.load(l.url,l.forceCSS||!l.forceJS&&"css"==n(l.url)?"c":i,l.noexec,l.attrs,l.timeout),void((P(s)||P(u))&&o.load(function(){c(),s&&s(l.origUrl,a,r),u&&u(l.origUrl,a,r),F[l.url]=2}))))}function o(e,t){function i(e,i){if(""===e||e){if(D(e))i||(l=function(){var e=[].slice.call(arguments);c.apply(this,e),u()}),s(e,l,t,0,o);else if(M(e)){n=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}();for(var r in e)e.hasOwnProperty(r)&&(i||--n||(P(l)?l=function(){var e=[].slice.call(arguments);c.apply(this,e),u()}:l[r]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),u()}}(c[r])),s(e[r],l,t,r,o))}}else!i&&u()}var n,o=!!e.test,r=o?e.yep:e.nope,a=e.load||e.both,l=e.callback||_,c=l,u=e.complete||_;i(r,!!a||!!e.complete),a&&i(a),!a&&!!e.complete&&i("")}var r,a,l=this.yepnope.loader;if(D(e))s(e,0,l,0);else if(T(e))for(r=0;r<e.length;r++)a=e[r],D(a)?s(a,0,l,0):T(a)?d(a):M(a)&&o(a,l);else M(e)&&o(e,l)},d.addPrefix=function(e,t){I[e]=t},d.addFilter=function(e){A.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=r,e.yepnope.injectJs=s,e.yepnope.injectCss=o}(e,t),v.load=function(){e.yepnope.apply(e,[].slice.call(arguments,0))};var k=function(){return t.createElement.apply(t,arguments)},S={elem:k("modernizr")};_._q.push(function(){delete S.elem});var C={style:S.elem.style};_._q.unshift(function(){delete C.style});var T=v.testProp=function(e,t,n){return h([e],i,t,n)},M=b.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=M.call(arguments,1),n=function(){if(this instanceof n){var s=function(){};s.prototype=t.prototype;var o=new s,r=t.apply(o,i.concat(M.call(arguments)));return Object(r)===r?r:o}return t.apply(e,i.concat(M.call(arguments)))};return n}),_.addTest("canvas",function(){var e=k("canvas");return!(!e.getContext||!e.getContext("2d"))}),_.addTest("canvastext",function(){return _.canvas===!1?!1:"function"==typeof k("canvas").getContext("2d").fillText});var D="Webkit Moz O ms",P=v._config.usePrefixes?D.split(" "):[];v._cssomPrefixes=P;var E=v._config.usePrefixes?D.toLowerCase().split(" "):[];v._domPrefixes=E,v.testAllProps=f,v.testAllProps=m,_.addTest("cssanimations",m("animationName","a",!0)),_.addTest("bgpositionshorthand",function(){var e=k("a"),t=e.style,i="right 10px bottom 10px";return t.cssText="background-position: "+i+";",t.backgroundPosition===i}),_.addTest("backgroundsize",m("backgroundSize","100%",!0)),_.addTest("bgsizecover",m("backgroundSize","cover")),_.addTest("borderradius",m("borderRadius","0px",!0)),_.addTest("boxshadow",m("boxShadow","1px 1px",!0)),_.addTest("boxsizing",m("boxSizing","border-box",!0)&&(t.documentMode===i||t.documentMode>7));var A=v.testStyles=c;A("#modernizr{display: table; direction: ltr}#modernizr div{display: table-cell; padding: 10px}",function(e){var t,i=e.children;t=i[0].offsetLeft<i[1].offsetLeft,_.addTest("displaytable",t,{aliases:["display-table"]})},2);var F=function(){var e=navigator.userAgent,t=e.match(/applewebkit\/([0-9]+)/gi)&&parseFloat(RegExp.$1),i=e.match(/w(eb)?osbrowser/gi),n=e.match(/windows phone/gi)&&e.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9,s=533>t&&e.match(/android/gi);return i||s||n}();F?_.addTest("fontface",!1):A('@font-face {font-family:"font";src:url("https://")}',function(e,i){var n=t.getElementById("smodernizr"),s=n.sheet||n.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"",r=/src/i.test(o)&&0===o.indexOf(i.split(" ")[0]);_.addTest("fontface",r)}),A('#modernizr{font:0/0 a}#modernizr:after{content:":)";visibility:hidden;font:7px/1 a}',function(e){_.addTest("generatedcontent",e.offsetHeight>=7)});var I=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];v._prefixes=I,_.addTest("cssgradients",function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);",n=(e+"-webkit- ".split(" ").join(t+e)+I.join(i+e)).slice(0,-e.length),s=k("div"),o=s.style;return o.cssText=n,(""+o.backgroundImage).indexOf("gradient")>-1}),_.addTest("opacity",function(){var e=k("div"),t=e.style;return t.cssText=I.join("opacity:.55;"),/^0.55$/.test(t.opacity)}),_.addTest("rgba",function(){var e=k("div"),t=e.style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}),_.addTest("textshadow",T("textShadow","1px 1px")),_.addTest("csstransforms",m("transform","scale(1)",!0)),_.addTest("csstransforms3d",function(){var e=!!m("perspective","1px",!0);return e&&"webkitPerspective"in w.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",function(t){e=9===t.offsetLeft&&5===t.offsetHeight}),e}),_.addTest("csstransitions",m("transition","all",!0)),_.addTest("draganddrop",function(){var e=k("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}),_.addTest("es5array",function(){return!!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)}),_.addTest("es5date",function(){var e="2013-04-12T06:06:37.307Z",t=!1;try{t=!!Date.parse(e)}catch(i){}return!!(Date.now&&Date.prototype&&Date.prototype.toISOString&&Date.prototype.toJSON&&t)}),_.addTest("es5function",function(){return!(!Function.prototype||!Function.prototype.bind)}),_.addTest("es5object",function(){return!!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)}),_.addTest("es5string",function(){return!(!String.prototype||!String.prototype.trim)}),_.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader)),_.addTest("fileinput",function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=k("input");return e.type="file",!e.disabled}),_.addTest("placeholder","placeholder"in k("input")&&"placeholder"in k("textarea"));var N=function(e){function i(t,i){var s;return t?(i&&"string"!=typeof i||(i=k(i||"div")),t="on"+t,s=t in i,!s&&n&&(i.setAttribute||(i=k("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(t,""),s="function"==typeof i[t],i[t]!==e&&(i[t]=e),i.removeAttribute(t))),s):!1}var n=!("onblur"in t.documentElement);return i}(),O=v.hasEvent=N;_.addTest("hashchange",function(){return O("hashchange",e)===!1?!1:t.documentMode===i||t.documentMode>7}),_.addTest("history",function(){var t=navigator.userAgent;return-1!==t.indexOf("Android 2.")&&-1!==t.indexOf("Mobile Safari")&&-1===t.indexOf("Chrome")?!1:e.history&&"pushState"in e.history}),_.addTest("json","JSON"in e&&"parse"in JSON);var R=function(e){if("undefined"==typeof XMLHttpRequest)return!1;var t=new XMLHttpRequest;t.open("get","/",!0);try{t.responseType=e}catch(i){return!1}return"response"in t&&t.responseType==e};_.addTest("xhrresponsetypejson",R("json")),_.addTest("xhrresponsetypetext",R("text")),_.addTest("xhrresponsetype",function(){if("undefined"==typeof XMLHttpRequest)return!1;var e=new XMLHttpRequest;return e.open("get","/",!0),"response"in e}()),_.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),s(),o(b),delete v.addTest,delete v.addAsyncTest;for(var j=0;j<_._q.length;j++)_._q[j]();e.Modernizr=_}(this,document),function(e,t){"function"==typeof define&&define.amd?define("i18n",function(){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(e):e.I18n=t(e)}(this,function(e){"use strict";var t=e&&e.I18n||{},i=Array.prototype.slice,n=function(e){return("0"+e.toString()).substr(-2)},s=function(e,t){return p("round",e,-t).toFixed(t)},o=function(e){var t=typeof e;return"function"===t||"object"===t},r=function(e){var t=typeof e;return"function"===t},a=function(e){return"undefined"!=typeof e&&null!==e},l=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},u=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},d=function(e){return e===!0||e===!1},h=function(e){return null===e},p=function(e,t,i){return"undefined"==typeof i||0===+i?Math[e](t):(t=+t,i=+i,isNaN(t)||"number"!=typeof i||i%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+i:i))))},f=function(e,t){return r(e)?e(t):e},m=function(e,t){var i,n;for(i in t)t.hasOwnProperty(i)&&(n=t[i],c(n)||u(n)||d(n)||l(n)||h(n)?e[i]=n:(null==e[i]&&(e[i]={}),m(e[i],n)));return e},g={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},v={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},_={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},y={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},b=[null,"kb","mb","gb","tb"],w={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return t.reset=function(){var e;for(e in w)this[e]=w[e]},t.initializeOptions=function(){var e;for(e in w)a(this[e])||(this[e]=w[e])},t.initializeOptions(),t.locales={},t.locales.get=function(e){var i=this[e]||this[t.locale]||this["default"];return r(i)&&(i=i(e)),l(i)===!1&&(i=[i]),i},t.locales["default"]=function(e){var i=[],n=[];return e&&i.push(e),!e&&t.locale&&i.push(t.locale),t.fallbacks&&t.defaultLocale&&i.push(t.defaultLocale),i.forEach(function(e){var i=e.split("-"),s=null,o=null;3===i.length?(s=[i[0],i[1]].join("-"),o=i[0]):2===i.length&&(s=i[0]),-1===n.indexOf(e)&&n.push(e),t.fallbacks&&[s,o].forEach(function(t){"undefined"!=typeof t&&null!==t&&t!==e&&-1===n.indexOf(t)&&n.push(t)})}),i.length||i.push("en"),n},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this["default"]},t.pluralization["default"]=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=a,t.lookup=function(e,t){t=t||{};var i,n,s,o,r=this.locales.get(t.locale).slice();for(s=this.getFullScope(e,t);r.length;)if(i=r.shift(),n=s.split(t.separator||this.defaultSeparator),o=this.translations[i]){for(;n.length&&(o=o[n.shift()],void 0!==o&&null!==o););if(void 0!==o&&null!==o)return o}return a(t.defaultValue)?f(t.defaultValue,e):void 0},t.pluralizationLookupWithoutFallback=function(e,t,i){var n,s,r=this.pluralization.get(t),l=r(e);if(o(i))for(;l.length;)if(n=l.shift(),a(i[n])){s=i[n];break}return s},t.pluralizationLookup=function(e,t,i){i=i||{};var n,s,r,l,c=this.locales.get(i.locale).slice();for(t=this.getFullScope(t,i);c.length;)if(n=c.shift(),s=t.split(i.separator||this.defaultSeparator),r=this.translations[n]){for(;s.length&&(r=r[s.shift()],o(r));)0===s.length&&(l=this.pluralizationLookupWithoutFallback(e,n,r));if("undefined"!=typeof l&&null!==l)break}return("undefined"==typeof l||null===l)&&a(i.defaultValue)&&(l=o(i.defaultValue)?this.pluralizationLookupWithoutFallback(e,i.locale,i.defaultValue):i.defaultValue,r=i.defaultValue),{message:l,translations:r}},t.meridian=function(){var e=this.lookup("time"),t=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:t&&t.meridian?t.meridian:g.meridian},t.prepareOptions=function(){for(var e,t=i.call(arguments),n={};t.length;)if(e=t.shift(),"object"==typeof e)for(var s in e)e.hasOwnProperty(s)&&(a(n[s])||(n[s]=e[s]));return n},t.createTranslationOptions=function(e,t){var i=[{scope:e}];return a(t.defaults)&&(i=i.concat(t.defaults)),a(t.defaultValue)&&i.push({message:t.defaultValue}),i},t.translate=function(e,t){t=t||{};var i,n=this.createTranslationOptions(e,t),s=e,r=this.prepareOptions(t);delete r.defaultValue;var c=n.some(function(t){return a(t.scope)?(s=t.scope,i=this.lookup(s,r)):a(t.message)&&(i=f(t.message,e)),void 0!==i&&null!==i?!0:void 0},this);return c?("string"==typeof i?i=this.interpolate(i,t):l(i)?i=i.map(function(e){return"string"==typeof e?this.interpolate(e,t):e},this):o(i)&&a(t.count)&&(i=this.pluralize(t.count,s,t)),i):this.missingTranslation(e,t)},t.interpolate=function(e,t){if(null==e)return e;t=t||{};var i,n,s,o,r=e.match(this.placeholder);if(!r)return e;for(;r.length;)i=r.shift(),s=i.replace(this.placeholder,"$1"),n=a(t[s])?t[s].toString().replace(/\$/gm,"_#$#_"):s in t?this.nullPlaceholder(i,e,t):this.missingPlaceholder(i,e,t),o=new RegExp(i.replace(/{/gm,"\\{").replace(/}/gm,"\\}")),e=e.replace(o,n);return e.replace(/_#\$#_/g,"$")},t.pluralize=function(e,t,i){i=this.prepareOptions({count:String(e)},i);var n,s;return s=this.pluralizationLookup(e,t,i),"undefined"==typeof s.translations||null==s.translations?this.missingTranslation(t,i):"undefined"!=typeof s.message&&null!=s.message?this.interpolate(s.message,i):(n=this.pluralization.get(i.locale),this.missingTranslation(t+"."+n(e)[0],i))},t.missingTranslation=function(e,t){if("guess"===this.missingBehaviour){var i=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+i.replace(/_/g," ").replace(/([a-z])([A-Z])/g,function(e,t,i){return t+" "+i.toLowerCase()})}var n=null!=t&&null!=t.locale?t.locale:this.currentLocale(),s=this.getFullScope(e,t),o=[n,s].join(t.separator||this.defaultSeparator);return'[missing "'+o+'" translation]'},t.missingPlaceholder=function(e,t,i){return"[missing "+e+" value]"},t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)},t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),v);var i,n,o=0>e,r=s(Math.abs(e),t.precision).toString(),a=r.split("."),l=[],c=t.format||"%n",u=o?"-":"";for(e=a[0],i=a[1];e.length>0;)l.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=l.join(t.delimiter),t.strip_insignificant_zeros&&i&&(i=i.replace(/0+$/,"")),t.precision>0&&i&&(n+=t.separator+i),c=t.sign_first?"%s"+c:c.replace("%n","%s%n"),n=c.replace("%u",t.unit).replace("%n",n).replace("%s",u)},t.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format",t),this.lookup("number.format",t),_),this.toNumber(e,t)},t.localize=function(e,t,i){switch(i||(i={}),e){case"currency":return this.toCurrency(t,i);case"number":return e=this.lookup("number.format",i),this.toNumber(t,e);case"percentage":return this.toPercentage(t,i);default:var n;return n=e.match(/^(date|time)/)?this.toTime(e,t,i):t.toString(),this.interpolate(n,i)}},t.parseDate=function(e){var t,i,n;if(null==e)return e;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var s=1;6>=s;s++)t[s]=parseInt(t[s],10)||0;t[2]-=1,n=t[7]?1e3*("0"+t[7]):null,i=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],n)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],n)}else"number"==typeof e?(i=new Date,i.setTime(e)):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(i=new Date,i.setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")))):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(i=new Date,i.setTime(Date.parse(e))):(i=new Date,i.setTime(Date.parse(e)));return i},t.strftime=function(e,i,s){var s=this.lookup("date",s),o=t.meridian();if(s||(s={}),s=this.prepareOptions(s,g),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var r=e.getDay(),a=e.getDate(),l=e.getFullYear(),c=e.getMonth()+1,u=e.getHours(),d=u,h=u>11?1:0,p=e.getSeconds(),f=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),_=Math.abs(m)-60*v,y=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(_.toString().length<2?"0"+_:_);return d>12?d-=12:0===d&&(d=12),i=i.replace("%a",s.abbr_day_names[r]),i=i.replace("%A",s.day_names[r]),i=i.replace("%b",s.abbr_month_names[c]),i=i.replace("%B",s.month_names[c]),i=i.replace("%d",n(a)),i=i.replace("%e",a),i=i.replace("%-d",a),i=i.replace("%H",n(u)),i=i.replace("%-H",u),i=i.replace("%k",u),i=i.replace("%I",n(d)),i=i.replace("%-I",d),i=i.replace("%l",d),i=i.replace("%m",n(c)),i=i.replace("%-m",c),i=i.replace("%M",n(f)),i=i.replace("%-M",f),i=i.replace("%p",o[h]),i=i.replace("%P",o[h].toLowerCase()),i=i.replace("%S",n(p)),i=i.replace("%-S",p),i=i.replace("%w",r),i=i.replace("%y",n(l)),i=i.replace("%-y",n(l).replace(/^0+/,"")),i=i.replace("%Y",l),i=i.replace("%z",y),i=i.replace("%Z",y)},t.toTime=function(e,t,i){var n=this.parseDate(t),s=this.lookup(e,i);if(null==n)return n;var o=n.toString();return o.match(/invalid/i)?o:s?this.strftime(n,s,i):o},t.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format",t),this.lookup("number.format",t),y),this.toNumber(e,t)},t.toHumanSize=function(e,t){for(var i,n,s,o=1024,r=e,a=0;r>=o&&4>a;)r/=o,a+=1;return 0===a?(s=this.getFullScope("number.human.storage_units.units.byte",t),i=this.t(s,{count:r}),n=0):(s=this.getFullScope("number.human.storage_units.units."+b[a],t),i=this.t(s),n=r-Math.floor(r)===0?0:1),t=this.prepareOptions(t,{unit:i,precision:n,format:"%n%u",delimiter:""}),this.toNumber(r,t)},t.getFullScope=function(e,t){return t=t||{},l(e)&&(e=e.join(t.separator||this.defaultSeparator)),t.scope&&(e=[t.scope,e].join(t.separator||this.defaultSeparator)),e},t.extend=function(e,t){return"undefined"==typeof e&&"undefined"==typeof t?{}:m(e,t)},t.t=t.translate.bind(t),t.l=t.localize.bind(t),t.p=t.pluralize.bind(t),t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return $i.apply(null,arguments)}function t(e){$i=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var i in t)o(t,i)&&(e[i]=t[i]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,i,n){return Ce(e,t,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function u(e){if(null==e._isValid){var t=c(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=a(NaN);return null!=e?r(c(t),e):c(t).userInvalidated=!0,t}function h(e){return void 0===e}function p(e,t){var i,n,s;if(h(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),h(t._i)||(e._i=t._i),h(t._f)||(e._f=t._f),h(t._l)||(e._l=t._l),h(t._strict)||(e._strict=t._strict),h(t._tzm)||(e._tzm=t._tzm),h(t._isUTC)||(e._isUTC=t._isUTC),h(t._offset)||(e._offset=t._offset),h(t._pf)||(e._pf=c(t)),h(t._locale)||(e._locale=t._locale),qi.length>0)for(i in qi)n=qi[i],s=t[n],h(s)||(e[n]=s);return e}function f(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Gi===!1&&(Gi=!0,e.updateOffset(this),Gi=!1)}function m(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=g(t)),i}function _(e,t,i){var n,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&v(e[n])!==v(t[n]))&&r++;return r+o}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,i,n,s,o=0;o<e.length;){for(s=b(e[o]).split("-"),t=s.length,i=b(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=x(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&_(s,i,!0)>=t-1)break;t--}o++}return null}function x(e){var t=null;if(!Wi[e]&&!h(module)&&module&&module.exports)try{t=Ui._abbr,require("./locale/"+e),k(t)}catch(i){}return Wi[e]}function k(e,t){var i;return e&&(i=h(t)?C(e):S(e,t),i&&(Ui=i)),Ui._abbr}function S(e,t){return null!==t?(t.abbr=e,Wi[e]=Wi[e]||new y,Wi[e].set(t),k(e),Wi[e]):(delete Wi[e],null)}function C(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ui;if(!i(e)){if(t=x(e))return t;e=[e]}return w(e)}function T(e,t){var i=e.toLowerCase();Vi[i]=Vi[i+"s"]=Vi[t]=e}function M(e){return"string"==typeof e?Vi[e]||Vi[e.toLowerCase()]:void 0}function D(e){var t,i,n={};for(i in e)o(e,i)&&(t=M(i),t&&(n[t]=e[i]));return n}function P(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(t,i){return function(n){return null!=n?(F(this,t,n),e.updateOffset(this,i),this):A(this,t)}}function A(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function F(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function I(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=M(e),P(this[e]))return this[e](t);return this}function N(e,t,i){var n=""+Math.abs(e),s=t-n.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function O(e,t,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),e&&(Ki[e]=s),t&&(Ki[t[0]]=function(){return N(s.apply(this,arguments),t[1],t[2])}),i&&(Ki[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function R(e){
return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function j(e){var t,i,n=e.match(Yi);for(t=0,i=n.length;i>t;t++)Ki[n[t]]?n[t]=Ki[n[t]]:n[t]=R(n[t]);return function(s){var o="";for(t=0;i>t;t++)o+=n[t]instanceof Function?n[t].call(s,e):n[t];return o}}function z(e,t){return e.isValid()?(t=L(t,e.localeData()),Qi[t]=Qi[t]||j(t),Qi[t](e)):e.localeData().invalidDate()}function L(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Ji.lastIndex=0;n>=0&&Ji.test(e);)e=e.replace(Ji,i),Ji.lastIndex=0,n-=1;return e}function B(e,t,i){gn[e]=P(t)?t:function(e){return e&&i?i:t}}function H(e,t){return o(gn,e)?gn[e](t._strict,t._locale):new RegExp($(e))}function $(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(n=function(e,i){i[t]=v(e)}),i=0;i<e.length;i++)vn[e[i]]=n}function q(e,t){U(e,function(e,i,n,s){n._w=n._w||{},t(e,n._w,n,s)})}function G(e,t,i){null!=t&&o(vn,e)&&vn[e](t,i._a,i,e)}function W(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function V(e,t){return i(this._months)?this._months[e.month()]:this._months[Mn.test(t)?"format":"standalone"][e.month()]}function Y(e,t){return i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Mn.test(t)?"format":"standalone"][e.month()]}function J(e,t,i){var n,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function Q(e,t){var i;return e.isValid()?"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),W(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e):e}function K(t){return null!=t?(Q(this,t),e.updateOffset(this,!0),this):A(this,"Month")}function X(){return W(this.year(),this.month())}function Z(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[yn]<0||i[yn]>11?yn:i[bn]<1||i[bn]>W(i[_n],i[yn])?bn:i[wn]<0||i[wn]>24||24===i[wn]&&(0!==i[xn]||0!==i[kn]||0!==i[Sn])?wn:i[xn]<0||i[xn]>59?xn:i[kn]<0||i[kn]>59?kn:i[Sn]<0||i[Sn]>999?Sn:-1,c(e)._overflowDayOfYear&&(_n>t||t>bn)&&(t=bn),c(e)._overflowWeeks&&-1===t&&(t=Cn),c(e)._overflowWeekday&&-1===t&&(t=Tn),c(e).overflow=t),e}function ee(t){e.suppressDeprecationWarnings===!1&&!h(console)&&console.warn&&console.warn("Deprecation warning: "+t)}function te(e,t){var i=!0;return r(function(){return i&&(ee(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function ie(e,t){En[e]||(ee(t),En[e]=!0)}function ne(e){var t,i,n,s,o,r,a=e._i,l=An.exec(a)||Fn.exec(a);if(l){for(c(e).iso=!0,t=0,i=Nn.length;i>t;t++)if(Nn[t][1].exec(l[1])){s=Nn[t][0],n=Nn[t][2]!==!1;break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,i=On.length;i>t;t++)if(On[t][1].exec(l[3])){o=(l[2]||" ")+On[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(l[4]){if(!In.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=s+(o||"")+(r||""),_e(e)}else e._isValid=!1}function se(t){var i=Rn.exec(t._i);return null!==i?void(t._d=new Date(+i[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function oe(e,t,i,n,s,o,r){var a=new Date(e,t,i,n,s,o,r);return 100>e&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function re(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ae(e){return le(e)?366:365}function le(e){return e%4===0&&e%100!==0||e%400===0}function ce(){return le(this.year())}function ue(e,t,i){var n=7+t-i,s=(7+re(e,0,n).getUTCDay()-t)%7;return-s+n-1}function de(e,t,i,n,s){var o,r,a=(7+i-n)%7,l=ue(e,n,s),c=1+7*(t-1)+a+l;return 0>=c?(o=e-1,r=ae(o)+c):c>ae(e)?(o=e+1,r=c-ae(e)):(o=e,r=c),{year:o,dayOfYear:r}}function he(e,t,i){var n,s,o=ue(e.year(),t,i),r=Math.floor((e.dayOfYear()-o-1)/7)+1;return 1>r?(s=e.year()-1,n=r+pe(s,t,i)):r>pe(e.year(),t,i)?(n=r-pe(e.year(),t,i),s=e.year()+1):(s=e.year(),n=r),{week:n,year:s}}function pe(e,t,i){var n=ue(e,t,i),s=ue(e+1,t,i);return(ae(e)-n+s)/7}function fe(e,t,i){return null!=e?e:null!=t?t:i}function me(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function ge(e){var t,i,n,s,o=[];if(!e._d){for(n=me(e),e._w&&null==e._a[bn]&&null==e._a[yn]&&ve(e),e._dayOfYear&&(s=fe(e._a[_n],n[_n]),e._dayOfYear>ae(s)&&(c(e)._overflowDayOfYear=!0),i=re(s,0,e._dayOfYear),e._a[yn]=i.getUTCMonth(),e._a[bn]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[wn]&&0===e._a[xn]&&0===e._a[kn]&&0===e._a[Sn]&&(e._nextDay=!0,e._a[wn]=0),e._d=(e._useUTC?re:oe).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[wn]=24)}}function ve(e){var t,i,n,s,o,r,a,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,r=4,i=fe(t.GG,e._a[_n],he(Te(),1,4).year),n=fe(t.W,1),s=fe(t.E,1),(1>s||s>7)&&(l=!0)):(o=e._locale._week.dow,r=e._locale._week.doy,i=fe(t.gg,e._a[_n],he(Te(),o,r).year),n=fe(t.w,1),null!=t.d?(s=t.d,(0>s||s>6)&&(l=!0)):null!=t.e?(s=t.e+o,(t.e<0||t.e>6)&&(l=!0)):s=o),1>n||n>pe(i,o,r)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(a=de(i,n,s,o,r),e._a[_n]=a.year,e._dayOfYear=a.dayOfYear)}function _e(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],c(t).empty=!0;var i,n,s,o,r,a=""+t._i,l=a.length,u=0;for(s=L(t._f,t._locale).match(Yi)||[],i=0;i<s.length;i++)o=s[i],n=(a.match(H(o,t))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&c(t).unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),u+=n.length),Ki[o]?(n?c(t).empty=!1:c(t).unusedTokens.push(o),G(o,n,t)):t._strict&&!n&&c(t).unusedTokens.push(o);c(t).charsLeftOver=l-u,a.length>0&&c(t).unusedInput.push(a),c(t).bigHour===!0&&t._a[wn]<=12&&t._a[wn]>0&&(c(t).bigHour=void 0),t._a[wn]=ye(t._locale,t._a[wn],t._meridiem),ge(t),Z(t)}function ye(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function be(e){var t,i,n,s,o;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],_e(t),u(t)&&(o+=c(t).charsLeftOver,o+=10*c(t).unusedTokens.length,c(t).score=o,(null==n||n>o)&&(n=o,i=t));r(e,i||t)}function we(e){if(!e._d){var t=D(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ge(e)}}function xe(e){var t=new f(Z(ke(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ke(e){var t=e._i,s=e._f;return e._locale=e._locale||C(e._l),null===t||void 0===s&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new f(Z(t)):(i(s)?be(e):s?_e(e):n(t)?e._d=t:Se(e),u(e)||(e._d=null),e))}function Se(t){var o=t._i;void 0===o?t._d=new Date(e.now()):n(o)?t._d=new Date(+o):"string"==typeof o?se(t):i(o)?(t._a=s(o.slice(0),function(e){return parseInt(e,10)}),ge(t)):"object"==typeof o?we(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function Ce(e,t,i,n,s){var o={};return"boolean"==typeof i&&(n=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=i,o._i=e,o._f=t,o._strict=n,xe(o)}function Te(e,t,i,n){return Ce(e,t,i,n,!1)}function Me(e,t){var n,s;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Te();for(n=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](n))&&(n=t[s]);return n}function De(){var e=[].slice.call(arguments,0);return Me("isBefore",e)}function Pe(){var e=[].slice.call(arguments,0);return Me("isAfter",e)}function Ee(e){var t=D(e),i=t.year||0,n=t.quarter||0,s=t.month||0,o=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=C(),this._bubble()}function Ae(e){return e instanceof Ee}function Fe(e,t){O(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+N(~~(e/60),2)+t+N(~~e%60,2)})}function Ie(e,t){var i=(t||"").match(e)||[],n=i[i.length-1]||[],s=(n+"").match(Hn)||["-",0,0],o=+(60*s[1])+v(s[2]);return"+"===s[0]?o:-o}function Ne(t,i){var s,o;return i._isUTC?(s=i.clone(),o=(m(t)||n(t)?+t:+Te(t))-+s,s._d.setTime(+s._d+o),e.updateOffset(s,!1),s):Te(t).local()}function Oe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Re(t,i){var n,s=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Ie(pn,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(n=Oe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==t&&(!i||this._changeInProgress?Xe(this,Ve(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Oe(this):null!=t?this:NaN}function je(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function ze(e){return this.utcOffset(0,e)}function Le(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Oe(this),"m")),this}function Be(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ie(hn,this._i)),this}function He(e){return this.isValid()?(e=e?Te(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function $e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ue(){if(!h(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=ke(e),e._a){var t=e._isUTC?a(e._a):Te(e._a);this._isDSTShifted=this.isValid()&&_(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return this.isValid()?!this._isUTC:!1}function Ge(){return this.isValid()?this._isUTC:!1}function We(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Ve(e,t){var i,n,s,r=e,a=null;return Ae(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=$n.exec(e))?(i="-"===a[1]?-1:1,r={y:0,d:v(a[bn])*i,h:v(a[wn])*i,m:v(a[xn])*i,s:v(a[kn])*i,ms:v(a[Sn])*i}):(a=Un.exec(e))?(i="-"===a[1]?-1:1,r={y:Ye(a[2],i),M:Ye(a[3],i),d:Ye(a[4],i),h:Ye(a[5],i),m:Ye(a[6],i),s:Ye(a[7],i),w:Ye(a[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=Qe(Te(r.from),Te(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),n=new Ee(r),Ae(e)&&o(e,"_locale")&&(n._locale=e._locale),n}function Ye(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Je(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Qe(e,t){var i;return e.isValid()&&t.isValid()?(t=Ne(t,e),e.isBefore(t)?i=Je(e,t):(i=Je(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ke(e,t){return function(i,n){var s,o;return null===n||isNaN(+n)||(ie(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=Ve(i,n),Xe(this,s,e),this}}function Xe(t,i,n,s){var o=i._milliseconds,r=i._days,a=i._months;t.isValid()&&(s=null==s?!0:s,o&&t._d.setTime(+t._d+o*n),r&&F(t,"Date",A(t,"Date")+r*n),a&&Q(t,A(t,"Month")+a*n),s&&e.updateOffset(t,r||a))}function Ze(e,t){var i=e||Te(),n=Ne(i,this).startOf("day"),s=this.diff(n,"days",!0),o=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse",r=t&&(P(t[o])?t[o]():t[o]);return this.format(r||this.localeData().calendar(o,this,Te(i)))}function et(){return new f(this)}function tt(e,t){var i=m(e)?e:Te(e);return this.isValid()&&i.isValid()?(t=M(h(t)?"millisecond":t),"millisecond"===t?+this>+i:+i<+this.clone().startOf(t)):!1}function it(e,t){var i=m(e)?e:Te(e);return this.isValid()&&i.isValid()?(t=M(h(t)?"millisecond":t),"millisecond"===t?+i>+this:+this.clone().endOf(t)<+i):!1}function nt(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)}function st(e,t){var i,n=m(e)?e:Te(e);return this.isValid()&&n.isValid()?(t=M(t||"millisecond"),"millisecond"===t?+this===+n:(i=+n,+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))):!1}function ot(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function rt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function at(e,t,i){var n,s,o,r;return this.isValid()?(n=Ne(e,this),n.isValid()?(s=6e4*(n.utcOffset()-this.utcOffset()),t=M(t),"year"===t||"month"===t||"quarter"===t?(r=lt(this,n),"quarter"===t?r/=3:"year"===t&&(r/=12)):(o=this-n,r="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-s)/864e5:"week"===t?(o-s)/6048e5:o),i?r:g(r)):NaN):NaN}function lt(e,t){var i,n,s=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(s,"months");return 0>t-o?(i=e.clone().add(s-1,"months"),n=(t-o)/(o-i)):(i=e.clone().add(s+1,"months"),n=(t-o)/(i-o)),-(s+n)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ut(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?P(Date.prototype.toISOString)?this.toDate().toISOString():z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dt(t){var i=z(this,t||e.defaultFormat);return this.localeData().postformat(i)}function ht(e,t){return this.isValid()&&(m(e)&&e.isValid()||Te(e).isValid())?Ve({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(Te(),e)}function ft(e,t){return this.isValid()&&(m(e)&&e.isValid()||Te(e).isValid())?Ve({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.to(Te(),e)}function gt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function vt(){return this._locale}function _t(e){switch(e=M(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yt(e){return e=M(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function bt(){return+this._d-6e4*(this._offset||0)}function wt(){return Math.floor(+this/1e3)}function xt(){return this._offset?new Date(+this):this._d}function kt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ct(){return this.isValid()?this.toISOString():"null"}function Tt(){return u(this)}function Mt(){return r({},c(this))}function Dt(){return c(this).overflow}function Pt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Et(e,t){O(0,[e,e.length],0,t)}function At(e){return Ot.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ft(e){return Ot.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function It(){return pe(this.year(),1,4)}function Nt(){var e=this.localeData()._week;return pe(this.year(),e.dow,e.doy)}function Ot(e,t,i,n,s){var o;return null==e?he(this,n,s).year:(o=pe(e,n,s),t>o&&(t=o),Rt.call(this,e,t,i,n,s))}function Rt(e,t,i,n,s){var o=de(e,t,i,n,s),r=re(o.year,0,o.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function jt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function zt(e){return he(e,this._week.dow,this._week.doy).week}function Lt(){return this._week.dow}function Bt(){return this._week.doy}function Ht(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function $t(e){var t=he(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ut(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function qt(e,t){return i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function Gt(e){return this._weekdaysShort[e.day()]}function Wt(e){return this._weekdaysMin[e.day()]}function Vt(e,t,i){var n,s,o;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(s=Te([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ut(e,this.localeData()),this.add(e-t,"d")):t}function Jt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Qt(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function Kt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Xt(){return this.hours()%12||12}function Zt(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ei(e,t){return t._meridiemParse}function ti(e){return"p"===(e+"").toLowerCase().charAt(0)}function ii(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function ni(e,t){t[Sn]=v(1e3*("0."+e))}function si(){return this._isUTC?"UTC":""}function oi(){return this._isUTC?"Coordinated Universal Time":""}function ri(e){return Te(1e3*e)}function ai(){return Te.apply(null,arguments).parseZone()}function li(e,t,i){var n=this._calendar[e];return P(n)?n.call(t,i):n}function ci(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function ui(){return this._invalidDate}function di(e){return this._ordinal.replace("%d",e)}function hi(e){return e}function pi(e,t,i,n){var s=this._relativeTime[i];return P(s)?s(e,t,i,n):s.replace(/%d/i,e)}function fi(e,t){var i=this._relativeTime[e>0?"future":"past"];return P(i)?i(t):i.replace(/%s/i,t)}function mi(e){var t,i;for(i in e)t=e[i],P(t)?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function gi(e,t,i,n){var s=C(),o=a().set(n,t);return s[i](o,e)}function vi(e,t,i,n,s){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return gi(e,t,i,s);var o,r=[];for(o=0;n>o;o++)r[o]=gi(e,o,i,s);return r}function _i(e,t){return vi(e,t,"months",12,"month")}function yi(e,t){return vi(e,t,"monthsShort",12,"month")}function bi(e,t){return vi(e,t,"weekdays",7,"day")}function wi(e,t){return vi(e,t,"weekdaysShort",7,"day")}function xi(e,t){return vi(e,t,"weekdaysMin",7,"day")}function ki(){var e=this._data;return this._milliseconds=ps(this._milliseconds),this._days=ps(this._days),this._months=ps(this._months),e.milliseconds=ps(e.milliseconds),e.seconds=ps(e.seconds),e.minutes=ps(e.minutes),e.hours=ps(e.hours),e.months=ps(e.months),e.years=ps(e.years),this}function Si(e,t,i,n){var s=Ve(t,i);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function Ci(e,t){return Si(this,e,t,1)}function Ti(e,t){return Si(this,e,t,-1)}function Mi(e){return 0>e?Math.floor(e):Math.ceil(e)}function Di(){var e,t,i,n,s,o=this._milliseconds,r=this._days,a=this._months,l=this._data;return o>=0&&r>=0&&a>=0||0>=o&&0>=r&&0>=a||(o+=864e5*Mi(Ei(a)+r),r=0,a=0),l.milliseconds=o%1e3,e=g(o/1e3),l.seconds=e%60,t=g(e/60),l.minutes=t%60,i=g(t/60),l.hours=i%24,r+=g(i/24),s=g(Pi(r)),a+=s,r-=Mi(Ei(s)),n=g(a/12),a%=12,l.days=r,l.months=a,l.years=n,this}function Pi(e){return 4800*e/146097}function Ei(e){return 146097*e/4800}function Ai(e){var t,i,n=this._milliseconds;if(e=M(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+Pi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Ei(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Fi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Ii(e){return function(){return this.as(e)}}function Ni(e){return e=M(e),this[e+"s"]()}function Oi(e){return function(){return this._data[e]}}function Ri(){return g(this.days()/7)}function ji(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function zi(e,t,i){var n=Ve(e).abs(),s=Ps(n.as("s")),o=Ps(n.as("m")),r=Ps(n.as("h")),a=Ps(n.as("d")),l=Ps(n.as("M")),c=Ps(n.as("y")),u=s<Es.s&&["s",s]||1>=o&&["m"]||o<Es.m&&["mm",o]||1>=r&&["h"]||r<Es.h&&["hh",r]||1>=a&&["d"]||a<Es.d&&["dd",a]||1>=l&&["M"]||l<Es.M&&["MM",l]||1>=c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=i,ji.apply(null,u)}function Li(e,t){return void 0===Es[e]?!1:void 0===t?Es[e]:(Es[e]=t,!0)}function Bi(e){var t=this.localeData(),i=zi(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function Hi(){var e,t,i,n=As(this._milliseconds)/1e3,s=As(this._days),o=As(this._months);e=g(n/60),t=g(e/60),n%=60,e%=60,i=g(o/12),o%=12;var r=i,a=o,l=s,c=t,u=e,d=n,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var $i,Ui,qi=e.momentProperties=[],Gi=!1,Wi={},Vi={},Yi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ji=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Qi={},Ki={},Xi=/\d/,Zi=/\d\d/,en=/\d{3}/,tn=/\d{4}/,nn=/[+-]?\d{6}/,sn=/\d\d?/,on=/\d\d\d\d?/,rn=/\d\d\d\d\d\d?/,an=/\d{1,3}/,ln=/\d{1,4}/,cn=/[+-]?\d{1,6}/,un=/\d+/,dn=/[+-]?\d+/,hn=/Z|[+-]\d\d:?\d\d/gi,pn=/Z|[+-]\d\d(?::?\d\d)?/gi,fn=/[+-]?\d+(\.\d{1,3})?/,mn=/[0-9]*(a[mn]\s?)?['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,gn={},vn={},_n=0,yn=1,bn=2,wn=3,xn=4,kn=5,Sn=6,Cn=7,Tn=8;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),T("month","M"),B("M",sn),B("MM",sn,Zi),B("MMM",mn),B("MMMM",mn),U(["M","MM"],function(e,t){t[yn]=v(e)-1}),U(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);null!=s?t[yn]=s:c(i).invalidMonth=e});var Mn=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Dn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sept_Oct_Nov_Dec".split("_"),En={};e.suppressDeprecationWarnings=!1;var An=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Fn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,In=/Z|[+-]\d\d(?::?\d\d)?/,Nn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],On=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rn=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),T("year","y"),B("Y",dn),B("YY",sn,Zi),B("YYYY",ln,tn),B("YYYYY",cn,nn),B("YYYYYY",cn,nn),U(["YYYYY","YYYYYY"],_n),U("YYYY",function(t,i){i[_n]=2===t.length?e.parseTwoDigitYear(t):v(t)}),U("YY",function(t,i){i[_n]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var jn=E("FullYear",!1);e.ISO_8601=function(){};var zn=te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:d()}),Ln=te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:d()}),Bn=Date.now||function(){return+new Date};Fe("Z",":"),Fe("ZZ",""),B("Z",pn),B("ZZ",pn),U(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ie(pn,e)});var Hn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var $n=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Un=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ve.fn=Ee.prototype;var qn=Ke(1,"add"),Gn=Ke(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Wn=te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Et("gggg","weekYear"),Et("ggggg","weekYear"),Et("GGGG","isoWeekYear"),Et("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),B("G",dn),B("g",dn),B("GG",sn,Zi),B("gg",sn,Zi),B("GGGG",ln,tn),B("gggg",ln,tn),B("GGGGG",cn,nn),B("ggggg",cn,nn),q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=v(e)}),q(["gg","GG"],function(t,i,n,s){i[s]=e.parseTwoDigitYear(t)}),O("Q",0,"Qo","quarter"),T("quarter","Q"),B("Q",Xi),U("Q",function(e,t){t[yn]=3*(v(e)-1)}),O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),B("w",sn),B("ww",sn,Zi),B("W",sn),B("WW",sn,Zi),q(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=v(e)});var Vn={dow:0,doy:6};O("D",["DD",2],"Do","date"),T("date","D"),B("D",sn),B("DD",sn,Zi),B("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],bn),U("Do",function(e,t){t[bn]=v(e.match(sn)[0],10)});var Yn=E("Date",!0);O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),B("d",sn),B("e",sn),B("E",sn),B("dd",mn),B("ddd",mn),B("dddd",mn),q(["dd","ddd","dddd"],function(e,t,i,n){var s=i._locale.weekdaysParse(e,n,i._strict);null!=s?t.d=s:c(i).invalidWeekday=e}),q(["d","e","E"],function(e,t,i,n){t[n]=v(e)});var Jn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),B("DDD",an),B("DDDD",en),U(["DDD","DDDD"],function(e,t,i){i._dayOfYear=v(e)}),O("H",["HH",2],0,"hour"),O("h",["hh",2],0,Xt),O("hmm",0,0,function(){return""+Xt.apply(this)+N(this.minutes(),2)}),O("hmmss",0,0,function(){return""+Xt.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)}),O("Hmm",0,0,function(){return""+this.hours()+N(this.minutes(),2)}),O("Hmmss",0,0,function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)}),Zt("a",!0),Zt("A",!1),T("hour","h"),B("a",ei),B("A",ei),B("H",sn),B("h",sn),B("HH",sn,Zi),B("hh",sn,Zi),B("hmm",on),B("hmmss",rn),B("Hmm",on),B("Hmmss",rn),U(["H","HH"],wn),U(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),U(["h","hh"],function(e,t,i){t[wn]=v(e),c(i).bigHour=!0}),U("hmm",function(e,t,i){var n=e.length-2;t[wn]=v(e.substr(0,n)),t[xn]=v(e.substr(n)),c(i).bigHour=!0}),U("hmmss",function(e,t,i){var n=e.length-4,s=e.length-2;t[wn]=v(e.substr(0,n)),t[xn]=v(e.substr(n,2)),t[kn]=v(e.substr(s)),c(i).bigHour=!0}),U("Hmm",function(e,t,i){var n=e.length-2;t[wn]=v(e.substr(0,n)),t[xn]=v(e.substr(n))}),U("Hmmss",function(e,t,i){var n=e.length-4,s=e.length-2;t[wn]=v(e.substr(0,n)),t[xn]=v(e.substr(n,2)),t[kn]=v(e.substr(s))});var Xn=/[ap]\.?m?\.?/i,Zn=E("Hours",!0);O("m",["mm",2],0,"minute"),T("minute","m"),B("m",sn),B("mm",sn,Zi),U(["m","mm"],xn);var es=E("Minutes",!1);O("s",["ss",2],0,"second"),T("second","s"),B("s",sn),B("ss",sn,Zi),U(["s","ss"],kn);var ts=E("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),T("millisecond","ms"),B("S",an,Xi),B("SS",an,Zi),B("SSS",an,en);var is;for(is="SSSS";is.length<=9;is+="S")B(is,un);for(is="S";is.length<=9;is+="S")U(is,ni);var ns=E("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var ss=f.prototype;ss.add=qn,ss.calendar=Ze,ss.clone=et,ss.diff=at,ss.endOf=yt,ss.format=dt,ss.from=ht,ss.fromNow=pt,ss.to=ft,ss.toNow=mt,ss.get=I,ss.invalidAt=Dt,ss.isAfter=tt,ss.isBefore=it,ss.isBetween=nt,ss.isSame=st,ss.isSameOrAfter=ot,ss.isSameOrBefore=rt,ss.isValid=Tt,ss.lang=Wn,ss.locale=gt,ss.localeData=vt,ss.max=Ln,ss.min=zn,ss.parsingFlags=Mt,ss.set=I,ss.startOf=_t,ss.subtract=Gn,ss.toArray=kt,ss.toObject=St,ss.toDate=xt,ss.toISOString=ut,ss.toJSON=Ct,ss.toString=ct,ss.unix=wt,ss.valueOf=bt,ss.creationData=Pt,ss.year=jn,ss.isLeapYear=ce,ss.weekYear=At,ss.isoWeekYear=Ft,ss.quarter=ss.quarters=jt,ss.month=K,ss.daysInMonth=X,ss.week=ss.weeks=Ht,ss.isoWeek=ss.isoWeeks=$t,ss.weeksInYear=Nt,ss.isoWeeksInYear=It,ss.date=Yn,ss.day=ss.days=Yt,ss.weekday=Jt,ss.isoWeekday=Qt,ss.dayOfYear=Kt,ss.hour=ss.hours=Zn,ss.minute=ss.minutes=es,ss.second=ss.seconds=ts,ss.millisecond=ss.milliseconds=ns,ss.utcOffset=Re,ss.utc=ze,ss.local=Le,ss.parseZone=Be,ss.hasAlignedHourOffset=He,ss.isDST=$e,ss.isDSTShifted=Ue,ss.isLocal=qe,ss.isUtcOffset=Ge,ss.isUtc=We,ss.isUTC=We,ss.zoneAbbr=si,ss.zoneName=oi,ss.dates=te("dates accessor is deprecated. Use date instead.",Yn),ss.months=te("months accessor is deprecated. Use month instead",K),ss.years=te("years accessor is deprecated. Use year instead",jn),ss.zone=te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",je);var os=ss,rs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},as={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"
},ls="Invalid date",cs="%d",us=/\d{1,2}/,ds={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},hs=y.prototype;hs._calendar=rs,hs.calendar=li,hs._longDateFormat=as,hs.longDateFormat=ci,hs._invalidDate=ls,hs.invalidDate=ui,hs._ordinal=cs,hs.ordinal=di,hs._ordinalParse=us,hs.preparse=hi,hs.postformat=hi,hs._relativeTime=ds,hs.relativeTime=pi,hs.pastFuture=fi,hs.set=mi,hs.months=V,hs._months=Dn,hs.monthsShort=Y,hs._monthsShort=Pn,hs.monthsParse=J,hs.week=zt,hs._week=Vn,hs.firstDayOfYear=Bt,hs.firstDayOfWeek=Lt,hs.weekdays=qt,hs._weekdays=Jn,hs.weekdaysMin=Wt,hs._weekdaysMin=Kn,hs.weekdaysShort=Gt,hs._weekdaysShort=Qn,hs.weekdaysParse=Vt,hs.isPM=ti,hs._meridiemParse=Xn,hs.meridiem=ii,k("en",{monthsParse:[/^jan/i,/^feb/i,/^mar/i,/^apr/i,/^may/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^oct/i,/^nov/i,/^dec/i],longMonthsParse:[/^january$/i,/^february$/i,/^march$/i,/^april$/i,/^may$/i,/^june$/i,/^july$/i,/^august$/i,/^september$/i,/^october$/i,/^november$/i,/^december$/i],shortMonthsParse:[/^jan$/i,/^feb$/i,/^mar$/i,/^apr$/i,/^may$/i,/^jun$/i,/^jul$/i,/^aug/i,/^sept?$/i,/^oct$/i,/^nov$/i,/^dec$/i],ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=te("moment.lang is deprecated. Use moment.locale instead.",k),e.langData=te("moment.langData is deprecated. Use moment.localeData instead.",C);var ps=Math.abs,fs=Ii("ms"),ms=Ii("s"),gs=Ii("m"),vs=Ii("h"),_s=Ii("d"),ys=Ii("w"),bs=Ii("M"),ws=Ii("y"),xs=Oi("milliseconds"),ks=Oi("seconds"),Ss=Oi("minutes"),Cs=Oi("hours"),Ts=Oi("days"),Ms=Oi("months"),Ds=Oi("years"),Ps=Math.round,Es={s:45,m:45,h:22,d:26,M:11},As=Math.abs,Fs=Ee.prototype;Fs.abs=ki,Fs.add=Ci,Fs.subtract=Ti,Fs.as=Ai,Fs.asMilliseconds=fs,Fs.asSeconds=ms,Fs.asMinutes=gs,Fs.asHours=vs,Fs.asDays=_s,Fs.asWeeks=ys,Fs.asMonths=bs,Fs.asYears=ws,Fs.valueOf=Fi,Fs._bubble=Di,Fs.get=Ni,Fs.milliseconds=xs,Fs.seconds=ks,Fs.minutes=Ss,Fs.hours=Cs,Fs.days=Ts,Fs.weeks=Ri,Fs.months=Ms,Fs.years=Ds,Fs.humanize=Bi,Fs.toISOString=Hi,Fs.toString=Hi,Fs.toJSON=Hi,Fs.locale=gt,Fs.localeData=vt,Fs.toIsoString=te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Hi),Fs.lang=Wn,O("X",0,0,"unix"),O("x",0,0,"valueOf"),B("x",dn),B("X",fn),U("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,i){i._d=new Date(v(e))}),e.version="2.11.0",t(Te),e.fn=os,e.min=De,e.max=Pe,e.now=Bn,e.utc=a,e.unix=ri,e.months=_i,e.isDate=n,e.locale=k,e.invalid=d,e.duration=Ve,e.isMoment=m,e.weekdays=bi,e.parseZone=ai,e.localeData=C,e.isDuration=Ae,e.monthsShort=yi,e.weekdaysMin=xi,e.defineLocale=S,e.weekdaysShort=wi,e.normalizeUnits=M,e.relativeTimeThreshold=Li,e.prototype=os;var Is=e;return Is}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(e){"use strict";function t(e,t,i,n){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[i][0]:s[i][1]}var i=e.defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return i}),function(){function e(e){function t(t,i,n,s,o,r){for(;o>=0&&r>o;o+=e){var a=s?s[o]:o;n=i(n,t[a],a,t)}return n}return function(i,n,s,o){n=_(n,o,4);var r=!k(i)&&v.keys(i),a=(r||i).length,l=e>0?0:a-1;return arguments.length<3&&(s=i[r?r[l]:l],l+=e),t(i,n,s,r,l,a)}}function t(e){return function(t,i,n){i=y(i,n);for(var s=null!=t&&t.length,o=e>0?0:s-1;o>=0&&s>o;o+=e)if(i(t[o],o,t))return o;return-1}}function i(e,t){var i=D.length,n=e.constructor,s=v.isFunction(n)&&n.prototype||r,o="constructor";for(v.has(e,o)&&!v.contains(t,o)&&t.push(o);i--;)o=D[i],o in e&&e[o]!==s[o]&&!v.contains(t,o)&&t.push(o)}var n=this,s=n._,o=Array.prototype,r=Object.prototype,a=Function.prototype,l=o.push,c=o.slice,u=r.toString,d=r.hasOwnProperty,h=Array.isArray,p=Object.keys,f=a.bind,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):n._=v,v.VERSION="1.8.2";var _=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)};case 4:return function(i,n,s,o){return e.call(t,i,n,s,o)}}return function(){return e.apply(t,arguments)}},y=function(e,t,i){return null==e?v.identity:v.isFunction(e)?_(e,t,i):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return y(e,t,1/0)};var b=function(e,t){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var s=1;n>s;s++)for(var o=arguments[s],r=e(o),a=r.length,l=0;a>l;l++){var c=r[l];t&&void 0!==i[c]||(i[c]=o[c])}return i}},w=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},x=Math.pow(2,53)-1,k=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&x>=t};v.each=v.forEach=function(e,t,i){t=_(t,i);var n,s;if(k(e))for(n=0,s=e.length;s>n;n++)t(e[n],n,e);else{var o=v.keys(e);for(n=0,s=o.length;s>n;n++)t(e[o[n]],o[n],e)}return e},v.map=v.collect=function(e,t,i){t=y(t,i);for(var n=!k(e)&&v.keys(e),s=(n||e).length,o=Array(s),r=0;s>r;r++){var a=n?n[r]:r;o[r]=t(e[a],a,e)}return o},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,i){var n;return n=k(e)?v.findIndex(e,t,i):v.findKey(e,t,i),void 0!==n&&-1!==n?e[n]:void 0},v.filter=v.select=function(e,t,i){var n=[];return t=y(t,i),v.each(e,function(e,i,s){t(e,i,s)&&n.push(e)}),n},v.reject=function(e,t,i){return v.filter(e,v.negate(y(t)),i)},v.every=v.all=function(e,t,i){t=y(t,i);for(var n=!k(e)&&v.keys(e),s=(n||e).length,o=0;s>o;o++){var r=n?n[o]:o;if(!t(e[r],r,e))return!1}return!0},v.some=v.any=function(e,t,i){t=y(t,i);for(var n=!k(e)&&v.keys(e),s=(n||e).length,o=0;s>o;o++){var r=n?n[o]:o;if(t(e[r],r,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,i){return k(e)||(e=v.values(e)),v.indexOf(e,t,"number"==typeof i&&i)>=0},v.invoke=function(e,t){var i=c.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var s=n?t:e[t];return null==s?s:s.apply(e,i)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,i){var n,s,o=-(1/0),r=-(1/0);if(null==t&&null!=e){e=k(e)?e:v.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],n>o&&(o=n)}else t=y(t,i),v.each(e,function(e,i,n){s=t(e,i,n),(s>r||s===-(1/0)&&o===-(1/0))&&(o=e,r=s)});return o},v.min=function(e,t,i){var n,s,o=1/0,r=1/0;if(null==t&&null!=e){e=k(e)?e:v.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],o>n&&(o=n)}else t=y(t,i),v.each(e,function(e,i,n){s=t(e,i,n),(r>s||s===1/0&&o===1/0)&&(o=e,r=s)});return o},v.shuffle=function(e){for(var t,i=k(e)?e:v.values(e),n=i.length,s=Array(n),o=0;n>o;o++)t=v.random(0,o),t!==o&&(s[o]=s[t]),s[t]=i[o];return s},v.sample=function(e,t,i){return null==t||i?(k(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,i){return t=y(t,i),v.pluck(v.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,i,n){var s={};return i=y(i,n),v.each(t,function(n,o){var r=i(n,o,t);e(s,n,r)}),s}};v.groupBy=S(function(e,t,i){v.has(e,i)?e[i].push(t):e[i]=[t]}),v.indexBy=S(function(e,t,i){e[i]=t}),v.countBy=S(function(e,t,i){v.has(e,i)?e[i]++:e[i]=1}),v.toArray=function(e){return e?v.isArray(e)?c.call(e):k(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:k(e)?e.length:v.keys(e).length},v.partition=function(e,t,i){t=y(t,i);var n=[],s=[];return v.each(e,function(e,i,o){(t(e,i,o)?n:s).push(e)}),[n,s]},v.first=v.head=v.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,i){return c.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},v.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,i){return c.call(e,null==t||i?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var C=function(e,t,i,n){for(var s=[],o=0,r=n||0,a=e&&e.length;a>r;r++){var l=e[r];if(k(l)&&(v.isArray(l)||v.isArguments(l))){t||(l=C(l,t,i));var c=0,u=l.length;for(s.length+=u;u>c;)s[o++]=l[c++]}else i||(s[o++]=l)}return s};v.flatten=function(e,t){return C(e,t,!1)},v.without=function(e){return v.difference(e,c.call(arguments,1))},v.uniq=v.unique=function(e,t,i,n){if(null==e)return[];v.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=y(i,n));for(var s=[],o=[],r=0,a=e.length;a>r;r++){var l=e[r],c=i?i(l,r,e):l;t?(r&&o===c||s.push(l),o=c):i?v.contains(o,c)||(o.push(c),s.push(l)):v.contains(s,l)||s.push(l)}return s},v.union=function(){return v.uniq(C(arguments,!0,!0))},v.intersection=function(e){if(null==e)return[];for(var t=[],i=arguments.length,n=0,s=e.length;s>n;n++){var o=e[n];if(!v.contains(t,o)){for(var r=1;i>r&&v.contains(arguments[r],o);r++);r===i&&t.push(o)}}return t},v.difference=function(e){var t=C(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,"length").length||0,i=Array(t),n=0;t>n;n++)i[n]=v.pluck(e,n);return i},v.object=function(e,t){for(var i={},n=0,s=e&&e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},v.indexOf=function(e,t,i){var n=0,s=e&&e.length;if("number"==typeof i)n=0>i?Math.max(0,s+i):i;else if(i&&s)return n=v.sortedIndex(e,t),e[n]===t?n:-1;if(t!==t)return v.findIndex(c.call(e,n),v.isNaN);for(;s>n;n++)if(e[n]===t)return n;return-1},v.lastIndexOf=function(e,t,i){var n=e?e.length:0;if("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1)),t!==t)return v.findLastIndex(c.call(e,0,n),v.isNaN);for(;--n>=0;)if(e[n]===t)return n;return-1},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,i,n){i=y(i,n,1);for(var s=i(t),o=0,r=e.length;r>o;){var a=Math.floor((o+r)/2);i(e[a])<s?o=a+1:r=a}return o},v.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=Array(n),o=0;n>o;o++,e+=i)s[o]=e;return s};var T=function(e,t,i,n,s){if(!(n instanceof t))return e.apply(i,s);var o=w(e.prototype),r=e.apply(o,s);return v.isObject(r)?r:o};v.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,c.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var i=c.call(arguments,2),n=function(){return T(e,n,t,this,i.concat(c.call(arguments)))};return n},v.partial=function(e){var t=c.call(arguments,1),i=function(){for(var n=0,s=t.length,o=Array(s),r=0;s>r;r++)o[r]=t[r]===v?arguments[n++]:t[r];for(;n<arguments.length;)o.push(arguments[n++]);return T(e,i,this,this,o)};return i},v.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=v.bind(e[i],e);return e},v.memoize=function(e,t){var i=function(n){var s=i.cache,o=""+(t?t.apply(this,arguments):n);return v.has(s,o)||(s[o]=e.apply(this,arguments)),s[o]};return i.cache={},i},v.delay=function(e,t){var i=c.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,i){var n,s,o,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:v.now(),r=null,o=e.apply(n,s),r||(n=s=null)};return function(){var c=v.now();a||i.leading!==!1||(a=c);var u=t-(c-a);return n=this,s=arguments,0>=u||u>t?(r&&(clearTimeout(r),r=null),a=c,o=e.apply(n,s),r||(n=s=null)):r||i.trailing===!1||(r=setTimeout(l,u)),o}},v.debounce=function(e,t,i){var n,s,o,r,a,l=function(){var c=v.now()-r;t>c&&c>=0?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(o,s),n||(o=s=null)))};return function(){o=this,s=arguments,r=v.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(o,s),o=s=null),a}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},v.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},v.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},v.once=v.partial(v.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return M&&i(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&i(e,t),t},v.values=function(e){for(var t=v.keys(e),i=t.length,n=Array(i),s=0;i>s;s++)n[s]=e[t[s]];return n},v.mapObject=function(e,t,i){t=y(t,i);for(var n,s=v.keys(e),o=s.length,r={},a=0;o>a;a++)n=s[a],r[n]=t(e[n],n,e);return r},v.pairs=function(e){for(var t=v.keys(e),i=t.length,n=Array(i),s=0;i>s;s++)n[s]=[t[s],e[t[s]]];return n},v.invert=function(e){for(var t={},i=v.keys(e),n=0,s=i.length;s>n;n++)t[e[i[n]]]=i[n];return t},v.functions=v.methods=function(e){var t=[];for(var i in e)v.isFunction(e[i])&&t.push(i);return t.sort()},v.extend=b(v.allKeys),v.extendOwn=v.assign=b(v.keys),v.findKey=function(e,t,i){t=y(t,i);for(var n,s=v.keys(e),o=0,r=s.length;r>o;o++)if(n=s[o],t(e[n],n,e))return n},v.pick=function(e,t,i){var n,s,o={},r=e;if(null==r)return o;v.isFunction(t)?(s=v.allKeys(r),n=_(t,i)):(s=C(arguments,!1,!1,1),n=function(e,t,i){return t in i},r=Object(r));for(var a=0,l=s.length;l>a;a++){var c=s[a],u=r[c];n(u,c,r)&&(o[c]=u)}return o},v.omit=function(e,t,i){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(C(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,i)},v.defaults=b(v.allKeys,!0),v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var i=v.keys(t),n=i.length;if(null==e)return!n;for(var s=Object(e),o=0;n>o;o++){var r=i[o];if(t[r]!==s[r]||!(r in s))return!1}return!0};var P=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var s=u.call(e);if(s!==u.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,a=t.constructor;if(r!==a&&!(v.isFunction(r)&&r instanceof r&&v.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!P(e[l],t[l],i,n))return!1}else{var c,d=v.keys(e);if(l=d.length,v.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!v.has(t,c)||!P(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};v.isEqual=function(e,t){return P(e,t)},v.isEmpty=function(e){return null==e?!0:k(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===u.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&d.call(e,t)},v.noConflict=function(){return n._=s,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return function(t){return null==t?void 0:t[e]}},v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,i){var n=Array(Math.max(0,e));t=_(t,i,1);for(var s=0;e>s;s++)n[s]=t(s);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},A=v.invert(E),F=function(e){var t=function(t){return e[t]},i="(?:"+v.keys(e).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(s,t):e}};v.escape=F(E),v.unescape=F(A),v.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),v.isFunction(n)?n.call(e):n};var I=0;v.uniqueId=function(e){var t=++I+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+O[e]};v.template=function(e,t,i){!t&&i&&(t=i),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(n,function(t,i,n,r,a){return o+=e.slice(s,a).replace(R,j),s=a+t.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(e){return r.call(this,e,v)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},v.chain=function(e){var t=v(e);return t._chain=!0,t};var z=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var i=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),z(this,i.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],z(this,i)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),!function(e,t){"use strict";function i(e,t){var i,n,s=e.toLowerCase();for(t=[].concat(t),i=0;i<t.length;i+=1)if(n=t[i]){if(n.test&&n.test(e))return!0;if(n.toLowerCase()===s)return!0}}var n=t.prototype.trim,s=t.prototype.trimRight,o=t.prototype.trimLeft,r=function(e){return 1*e||0},a=function(e,t){if(1>t)return"";for(var i="";t>0;)1&t&&(i+=e),t>>=1,e+=e;return i},l=[].slice,c=function(e){return null==e?"\\s":e.source?e.source:"["+f.escapeRegExp(e)+"]"},u={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},d={};for(var h in u)d[u[h]]=h;d["'"]="#39";
// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var i=a,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,s){var o,r,a,l,c,u,d,h=1,f=n.length,m="",g=[];for(r=0;f>r;r++)if(m=e(n[r]),"string"===m)g.push(n[r]);else if("array"===m){if(l=n[r],l[2])for(o=s[h],a=0;a<l[2].length;a++){if(!o.hasOwnProperty(l[2][a]))throw new Error(p('[_.sprintf] property "%s" does not exist',l[2][a]));o=o[l[2][a]]}else o=l[1]?s[l[1]]:s[h++];if(/[^s]/.test(l[8])&&"number"!=e(o))throw new Error(p("[_.sprintf] expecting number but found %s",e(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=t.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=t(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",d=l[6]-t(o).length,c=l[6]?i(u,d):"",g.push(l[5]?o+c:c+o)}return g.join("")},n.cache={},n.parse=function(e){for(var t=e,i=[],n=[],s=0;t;){if(null!==(i=/^[^\x25]+/.exec(t)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(i[2]){s|=1;var o=[],r=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(r)))throw new Error("[_.sprintf] huh?");for(o.push(a[1]);""!==(r=r.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(r)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(r)))throw new Error("[_.sprintf] huh?");o.push(a[1])}i[2]=o}else s|=2;if(3===s)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}t=t.substring(i[0].length)}return n},n}(),f={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,i){return null==e?[]:(e=t(e),i=~~i,i>0?e.match(new RegExp(".{1,"+i+"}","g")):[e])},clean:function(e){return f.strip(e).replace(/\s+/g," ")},count:function(e,i){if(null==e||null==i)return 0;e=t(e),i=t(i);for(var n=0,s=0,o=i.length;;){if(s=e.indexOf(i,s),-1===s)break;n++,s+=o}return n},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+d[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,i){var n;return i in u?u[i]:(n=i.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(n[1],16)):(n=i.match(/^#(\d+)$/))?t.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,i,n){var s=f.chars(e);return s.splice(~~t,~~i,n),s.join("")},insert:function(e,t,i){return f.splice(e,t,0,i)},include:function(e,i){return""===i?!0:null==e?!1:-1!==t(e).indexOf(i)},join:function(){var e=l.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return f.chars(e).reverse().join("")},startsWith:function(e,i){return""===i?!0:null==e||null==i?!1:(e=t(e),i=t(i),e.length>=i.length&&e.slice(0,i.length)===i)},endsWith:function(e,i){return""===i?!0:null==e||null==i?!1:(e=t(e),i=t(i),e.length>=i.length&&e.slice(e.length-i.length)===i)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":(e=t(e).toLowerCase(),e.replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()}))},camelize:function(e){return f.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},underscored:function(e){return f.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return f.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return f.titleize(t(e).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(e){return f.capitalize(f.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,i){return null==e?"":!i&&n?n.call(e):(i=c(i),t(e).replace(new RegExp("^"+i+"+|"+i+"+$","g"),""))},ltrim:function(e,i){return null==e?"":!i&&o?o.call(e):(i=c(i),t(e).replace(new RegExp("^"+i+"+"),""))},rtrim:function(e,i){return null==e?"":!i&&s?s.call(e):(i=c(i),t(e).replace(new RegExp(i+"+$"),""))},truncate:function(e,i,n){return null==e?"":(e=t(e),n=n||"...",i=~~i,e.length>i?e.slice(0,i)+n:e)},prune:function(e,i,n){if(null==e)return"";if(e=t(e),i=~~i,n=null!=n?t(n):"...",e.length<=i)return e;var s=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=e.slice(0,i+1).replace(/.(?=\W*\w*$)/g,s);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):f.rtrim(o.slice(0,o.length-1)),(o+n).length>e.length?e:e.slice(0,o.length)+n},words:function(e,t){return f.isBlank(e)?[]:f.trim(e,t).split(t||/\s+/)},pad:function(e,i,n,s){e=null==e?"":t(e),i=~~i;var o=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",s){case"right":return o=i-e.length,e+a(n,o);case"both":return o=i-e.length,a(n,Math.ceil(o/2))+e+a(n,Math.floor(o/2));default:return o=i-e.length,a(n,o)+e}},lpad:function(e,t,i){return f.pad(e,t,i)},rpad:function(e,t,i){return f.pad(e,t,i,"right")},lrpad:function(e,t,i){return f.pad(e,t,i,"both")},sprintf:p,vsprintf:function(e,t){return t.unshift(e),p.apply(null,t)},toNumber:function(e,t){return e?(e=f.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?r(r(e).toFixed(~~t)):NaN):0},numberFormat:function(e,t,i,n){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),n="string"==typeof n?n:",";var s=e.split("."),o=s[0],r=s[1]?(i||".")+s[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+r},strRight:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.indexOf(i):-1;return~n?e.slice(n+i.length,e.length):e},strRightBack:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.lastIndexOf(i):-1;return~n?e.slice(n+i.length,e.length):e},strLeft:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.indexOf(i):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var i=e.lastIndexOf(t);return~i?e.slice(0,i):e},toSentence:function(e,t,i,n){t=t||", ",i=i||" and ";var s=e.slice(),o=s.pop();return e.length>2&&n&&(i=f.rtrim(t)+i),s.length?s.join(t)+i+o:o},toSentenceSerial:function(){var e=l.call(arguments);return e[3]=!0,f.toSentence.apply(f,e)},slugify:function(e){if(null==e)return"";var i="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0103\u0107\u0119\xe8\xe9\xeb\xea\xec\xed\xef\xee\u0142\u0144\xf2\xf3\xf6\xf4\xf5\xf8\u015b\u0219\u021b\xf9\xfa\xfc\xfb\xf1\xe7\u017c\u017a",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",s=new RegExp(c(i),"g");return e=t(e).toLowerCase().replace(s,function(e){var t=i.indexOf(e);return n.charAt(t)||"-"}),f.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e,t){return f.surround(e,t||'"')},unquote:function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,i,n){if(null==e)return"";if(i=~~i,null==n)return a(t(e),i);for(var s=[];i>0;s[--i]=e);return s.join(n)},naturalCmp:function(e,i){if(e==i)return 0;if(!e)return-1;if(!i)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,s=t(e).toLowerCase().match(n),o=t(i).toLowerCase().match(n),r=Math.min(s.length,o.length),a=0;r>a;a++){var l=s[a],c=o[a];if(l!==c){var u=parseInt(l,10);if(!isNaN(u)){var d=parseInt(c,10);if(!isNaN(d)&&u-d)return u-d}return c>l?-1:1}}return s.length===o.length?s.length-o.length:i>e?-1:1},levenshtein:function(e,i){if(null==e&&null==i)return 0;if(null==e)return t(i).length;if(null==i)return t(e).length;e=t(e),i=t(i);for(var n,s,o=[],r=0;r<=i.length;r++)for(var a=0;a<=e.length;a++)s=r&&a?e.charAt(a-1)===i.charAt(r-1)?n:Math.min(o[a],o[a-1],n)+1:r+a,n=o[a],o[a]=s;return o.pop()},toBoolean:function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:(e=f.trim(e),i(e,t||["true","1"])?!0:i(e,n||["false","0"])?!1:void 0)}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,f.toBool=f.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return f}),e._=e._||{},e._.string=e._.str=f}(this,String),function(e){_.mixin(_.str.exports()),_.mixin({chunk:function(e,t){return _.values(_.groupBy(e,function(e,i){return Math.floor(i/t)}))},simpleFormat:function(e){return["<p>",e.replace(/\r\n?/g,"\n").replace(/\n\n+/g,"</p><p>").replace(/([^\n]\n)(?=[^\n])/g,"$1<br/>"),"</p>"].join("")},expandableText:function(e,t){var t=t||650,i=_.template('<div class="expandable-text"><div class="text-long-version">{{text}}</div><div class="text-short-version">{{shortText}}</div><a data-action="show-text-long-version" href="#">{{buttonText}}</a></div>');return e.length>t&&(e=i({text:_.simpleFormat(e),shortText:_.simpleFormat(_.truncate(e,t)),buttonText:I18n.t("common.read_more")})),e},findjQueryObject:function(e,t){return _.find(e,function(e){return e.is(t)})}})}(window),/*!
 * jQuery JavaScript Library v1.10.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-24T18:39Z
 */
function(e,t){function i(e){var t=e.length,i=ue.type(e);return ue.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=Ce[e]={};return ue.each(e.match(he)||[],function(e,i){t[i]=!0}),t}function s(e,i,n,s){if(ue.acceptData(e)){var o,r,a=ue.expando,l=e.nodeType,c=l?ue.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(s||c[u].data)||n!==t||"string"!=typeof i)return u||(u=l?e[a]=te.pop()||ue.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ue.noop}),("object"==typeof i||"function"==typeof i)&&(s?c[u]=ue.extend(c[u],i):c[u].data=ue.extend(c[u].data,i)),r=c[u],s||(r.data||(r.data={}),r=r.data),n!==t&&(r[ue.camelCase(i)]=n),"string"==typeof i?(o=r[i],null==o&&(o=r[ue.camelCase(i)])):o=r,o}}function o(e,t,i){if(ue.acceptData(e)){var n,s,o=e.nodeType,r=o?ue.cache:e,l=o?e[ue.expando]:ue.expando;if(r[l]){if(t&&(n=i?r[l]:r[l].data)){ue.isArray(t)?t=t.concat(ue.map(t,ue.camelCase)):t in n?t=[t]:(t=ue.camelCase(t),t=t in n?[t]:t.split(" ")),s=t.length;for(;s--;)delete n[t[s]];if(i?!a(n):!ue.isEmptyObject(n))return}(i||(delete r[l].data,a(r[l])))&&(o?ue.cleanData([e],!0):ue.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(Me,"-$1").toLowerCase();if(n=e.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Te.test(n)?ue.parseJSON(n):n}catch(o){}ue.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!ue.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return Q.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,i){if(ue.isFunction(t))return ue.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ue.grep(e,function(e){return e===t!==i});if("string"==typeof t){if($e.test(t))return ue.filter(t,e,i);t=ue.filter(t,e)}return ue.grep(e,function(e){return ue.inArray(e,t)>=0!==i})}function p(e){var t=We.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function f(e,t){return ue.nodeName(e,"table")&&ue.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ue.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=st.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var i,n=0;null!=(i=e[n]);n++)ue._data(i,"globalEval",!t||ue._data(t[n],"globalEval"))}function _(e,t){if(1===t.nodeType&&ue.hasData(e)){var i,n,s,o=ue._data(e),r=ue._data(t,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)ue.event.add(t,i,a[i][n])}r.data&&(r.data=ue.extend({},r.data))}}function y(e,t){var i,n,s;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ue.support.noCloneEvent&&t[ue.expando]){s=ue._data(t);for(n in s.events)ue.removeEvent(t,n,s.handle);t.removeAttribute(ue.expando)}"script"===i&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ue.support.html5Clone&&e.innerHTML&&!ue.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function b(e,i){var n,s,o=0,r=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(i||"*"):t;if(!r)for(r=[],n=e.childNodes||e;null!=(s=n[o]);o++)!i||ue.nodeName(s,i)?r.push(s):ue.merge(r,b(s,i));return i===t||i&&ue.nodeName(e,i)?ue.merge([e],r):r}function w(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=St.length;s--;)if(t=St[s]+i,t in e)return t;return n}function k(e,t){return e=t||e,"none"===ue.css(e,"display")||!ue.contains(e.ownerDocument,e)}function S(e,t){for(var i,n,s,o=[],r=0,a=e.length;a>r;r++)n=e[r],n.style&&(o[r]=ue._data(n,"olddisplay"),i=n.style.display,t?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&k(n)&&(o[r]=ue._data(n,"olddisplay",D(n.nodeName)))):o[r]||(s=k(n),(i&&"none"!==i||!s)&&ue._data(n,"olddisplay",s?i:ue.css(n,"display"))));for(r=0;a>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[r]||"":"none"));return e}function C(e,t,i){var n=vt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function T(e,t,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=ue.css(e,i+kt[o],!0,s)),n?("content"===i&&(r-=ue.css(e,"padding"+kt[o],!0,s)),"margin"!==i&&(r-=ue.css(e,"border"+kt[o]+"Width",!0,s))):(r+=ue.css(e,"padding"+kt[o],!0,s),"padding"!==i&&(r+=ue.css(e,"border"+kt[o]+"Width",!0,s)));return r}function M(e,t,i){var n=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=ut(e),r=ue.support.boxSizing&&"border-box"===ue.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=dt(e,t,o),(0>s||null==s)&&(s=e.style[t]),_t.test(s))return s;n=r&&(ue.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+T(e,t,i||(r?"border":"content"),n,o)+"px"}function D(e){var t=Q,i=bt[e];return i||(i=P(e,t),"none"!==i&&i||(ct=(ct||ue("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=P(e,t),ct.detach()),bt[e]=i),i}function P(e,t){var i=ue(t.createElement(e)).appendTo(t.body),n=ue.css(i[0],"display");return i.remove(),n}function E(e,t,i,n){var s;if(ue.isArray(t))ue.each(t,function(t,s){i||Tt.test(e)?n(e,s):E(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==ue.type(t))n(e,t);else for(s in t)E(e+"["+s+"]",t[s],i,n)}function A(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,o=t.toLowerCase().match(he)||[];if(ue.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function F(e,t,i,n){function s(a){var l;return o[a]=!0,ue.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var o={},r=e===Ut;return s(t.dataTypes[0])||!o["*"]&&s("*")}function I(e,i){var n,s,o=ue.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((o[s]?e:n||(n={}))[s]=i[s]);return n&&ue.extend(!0,e,n),e}function N(e,i,n){for(var s,o,r,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){c.unshift(a);break}if(c[0]in n)r=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){r=a;break}s||(s=a)}r=r||s}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function O(e,t,i,n){var s,o,r,a,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=u.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=c[l+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],u.unshift(a[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function R(){try{return new e.XMLHttpRequest}catch(t){}}function j(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function z(){return setTimeout(function(){Xt=t}),Xt=ue.now()}function L(e,t,i){for(var n,s=(si[t]||[]).concat(si["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,t,e))return n}function B(e,t,i){var n,s,o=0,r=ni.length,a=ue.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Xt||z(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(o);return a.notifyWith(e,[c,o,i]),1>o&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ue.extend({},t),opts:ue.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Xt||z(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ue.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(H(u,c.opts.specialEasing);r>o;o++)if(n=ni[o].call(c,e,u,c.opts))return n;return ue.map(u,L,c),ue.isFunction(c.opts.start)&&c.opts.start.call(e,c),ue.fx.timer(ue.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(e,t){var i,n,s,o,r;for(i in e)if(n=ue.camelCase(i),s=t[n],o=e[i],ue.isArray(o)&&(s=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),r=ue.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=s)}else t[n]=s}function $(e,t,i){var n,s,o,r,a,l,c=this,u={},d=e.style,h=e.nodeType&&k(e),p=ue._data(e,"fxshow");i.queue||(a=ue._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ue.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ue.css(e,"display")&&"none"===ue.css(e,"float")&&(ue.support.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ue.support.shrinkWrapBlocks||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],ei.exec(s)){if(delete t[n],o=o||"toggle"===s,s===(h?"hide":"show"))continue;u[n]=p&&p[n]||ue.style(e,n)}if(!ue.isEmptyObject(u)){p?"hidden"in p&&(h=p.hidden):p=ue._data(e,"fxshow",{}),o&&(p.hidden=!h),h?ue(e).show():c.done(function(){ue(e).hide()}),c.done(function(){var t;ue._removeData(e,"fxshow");for(t in u)ue.style(e,t,u[t])});for(n in u)r=L(h?p[n]:0,n,c),n in p||(p[n]=r.start,h&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function U(e,t,i,n,s){return new U.prototype.init(e,t,i,n,s)}function q(e,t){var i,n={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)i=kt[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function G(e){return ue.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var W,V,Y=typeof t,J=e.location,Q=e.document,K=Q.documentElement,X=e.jQuery,Z=e.$,ee={},te=[],ie="1.10.0",ne=te.concat,se=te.push,oe=te.slice,re=te.indexOf,ae=ee.toString,le=ee.hasOwnProperty,ce=ie.trim,ue=function(e,t){return new ue.fn.init(e,t,V)},de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=/\S+/g,pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^[\],:{}\s]*$/,ve=/(?:^|:|,)(?:\s*\[)+/g,_e=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ye=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,we=/-([\da-z])/gi,xe=function(e,t){return t.toUpperCase()},ke=function(e){(Q.addEventListener||"load"===e.type||"complete"===Q.readyState)&&(Se(),ue.ready())},Se=function(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",ke,!1),e.removeEventListener("load",ke,!1)):(Q.detachEvent("onreadystatechange",ke),e.detachEvent("onload",ke))};ue.fn=ue.prototype={jquery:ie,constructor:ue,init:function(e,i,n){var s,o;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:fe.exec(e),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1]){if(i=i instanceof ue?i[0]:i,ue.merge(this,ue.parseHTML(s[1],i&&i.nodeType?i.ownerDocument||i:Q,!0)),me.test(s[1])&&ue.isPlainObject(i))for(s in i)ue.isFunction(this[s])?this[s](i[s]):this.attr(s,i[s]);return this}if(o=Q.getElementById(s[2]),o&&o.parentNode){if(o.id!==s[2])return n.find(e);this.length=1,this[0]=o}return this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ue.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ue.makeArray(e,this))},selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ue.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ue.each(this,e,t)},ready:function(e){return ue.ready.promise().done(e),this},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(ue.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:se,sort:[].sort,splice:[].splice},ue.fn.init.prototype=ue.fn,ue.extend=ue.fn.extend=function(){var e,i,n,s,o,r,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ue.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(o=arguments[l]))for(s in o)e=a[s],n=o[s],a!==n&&(u&&n&&(ue.isPlainObject(n)||(i=ue.isArray(n)))?(i?(i=!1,r=e&&ue.isArray(e)?e:[]):r=e&&ue.isPlainObject(e)?e:{},a[s]=ue.extend(u,r,n)):n!==t&&(a[s]=n));return a},ue.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ue&&(e.$=Z),t&&e.jQuery===ue&&(e.jQuery=X),ue},isReady:!1,readyWait:1,holdReady:function(e){e?ue.readyWait++:ue.ready(!0)},ready:function(e){if(e===!0?!--ue.readyWait:!ue.isReady){if(!Q.body)return setTimeout(ue.ready);ue.isReady=!0,e!==!0&&--ue.readyWait>0||(W.resolveWith(Q,[ue]),ue.fn.trigger&&ue(Q).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ue.type(e)},isArray:Array.isArray||function(e){return"array"===ue.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?ee[ae.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==ue.type(e)||e.nodeType||ue.isWindow(e))return!1;try{if(e.constructor&&!le.call(e,"constructor")&&!le.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ue.support.ownLast)for(i in e)return le.call(e,i);for(i in e);return i===t||le.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=me.exec(e),s=!i&&[];return n?[t.createElement(n[1])]:(n=ue.buildFragment([e],t,s),s&&ue(s).remove(),ue.merge([],n.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ue.trim(t),t&&ge.test(t.replace(_e,"@").replace(ye,"]").replace(ve,"")))?new Function("return "+t)():void ue.error("Invalid JSON: "+t)},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(o){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ue.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&ue.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(be,"ms-").replace(we,xe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s,o=0,r=e.length,a=i(e);if(n){if(a)for(;r>o&&(s=t.apply(e[o],n),s!==!1);o++);else for(o in e)if(s=t.apply(e[o],n),s===!1)break}else if(a)for(;r>o&&(s=t.call(e[o],o,e[o]),s!==!1);o++);else for(o in e)if(s=t.call(e[o],o,e[o]),s===!1)break;return e},trim:ce&&!ce.call("\ufeff\xa0")?function(e){return null==e?"":ce.call(e)}:function(e){return null==e?"":(e+"").replace(pe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ue.merge(n,"string"==typeof e?[e]:e):se.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(re)return re.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,s=e.length,o=0;if("number"==typeof n)for(;n>o;o++)e[s++]=i[o];else for(;i[o]!==t;)e[s++]=i[o++];return e.length=s,e},grep:function(e,t,i){var n,s=[],o=0,r=e.length;for(i=!!i;r>o;o++)n=!!t(e[o],o),i!==n&&s.push(e[o]);return s},map:function(e,t,n){var s,o=0,r=e.length,a=i(e),l=[];if(a)for(;r>o;o++)s=t(e[o],o,n),null!=s&&(l[l.length]=s);else for(o in e)s=t(e[o],o,n),null!=s&&(l[l.length]=s);return ne.apply([],l)},guid:1,proxy:function(e,i){var n,s,o;return"string"==typeof i&&(o=e[i],i=e,e=o),ue.isFunction(e)?(n=oe.call(arguments,2),s=function(){return e.apply(i||this,n.concat(oe.call(arguments)))},s.guid=e.guid=e.guid||ue.guid++,s):t},access:function(e,i,n,s,o,r,a){var l=0,c=e.length,u=null==n;if("object"===ue.type(n)){o=!0;for(l in n)ue.access(e,i,l,n[l],!0,r,a)}else if(s!==t&&(o=!0,ue.isFunction(s)||(a=!0),u&&(a?(i.call(e,s),i=null):(u=i,i=function(e,t,i){return u.call(ue(e),i)})),i))for(;c>l;l++)i(e[l],n,a?s:s.call(e[l],l,i(e[l],n)));return o?e:u?i.call(e):c?i(e[0],n):r},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var s,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];s=i.apply(e,n||[]);for(o in t)e.style[o]=r[o];return s}}),ue.ready.promise=function(t){if(!W)if(W=ue.Deferred(),"complete"===Q.readyState)setTimeout(ue.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",ke,!1),e.addEventListener("load",ke,!1);else{Q.attachEvent("onreadystatechange",ke),e.attachEvent("onload",ke);var i=!1;try{i=null==e.frameElement&&Q.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!ue.isReady){try{i.doScroll("left")}catch(e){return setTimeout(s,50)}Se(),ue.ready()}}()}return W.promise(t)},ue.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()}),V=ue(Q),/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-15
 */
function(e,t){function i(e,t,i,n){var s,o,r,a,l,c,u,d,h,p;if((t?t.ownerDocument||t:q)!==R&&O(t),t=t||R,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(z&&!n){if(s=ke.exec(e))if(r=s[1]){if(9===a){if(o=t.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&$(t,o)&&o.id===r)return i.push(o),i}else{if(s[2])return se.apply(i,t.getElementsByTagName(e)),i;if((r=s[3])&&M.getElementsByClassName&&t.getElementsByClassName)return se.apply(i,t.getElementsByClassName(r)),i}if(M.qsa&&(!L||!L.test(e))){if(d=u=U,h=t,p=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=m(e),(u=t.getAttribute("id"))?d=u.replace(Te,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+g(c[l]);h=ve.test(e)&&t.parentNode||t,p=c.join(",")}if(p)try{return se.apply(i,h.querySelectorAll(p)),i}catch(f){}finally{u||t.removeAttribute("id")}}}return S(e.replace(fe,"$1"),t,i,n)}function n(e){return xe.test(e+"")}function s(){function e(i,n){return t.push(i+=" ")>P.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function o(e){return e[U]=!0,e}function r(e){var t=R.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t,i){e=e.split("|");for(var n,s=e.length,o=i?null:t;s--;)(n=P.attrHandle[e[s]])&&n!==t||(P.attrHandle[e[s]]=o)}function l(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}function c(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function u(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:void 0}function d(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Z)-(~e.sourceIndex||Z);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function h(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function p(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function f(e){return o(function(t){return t=+t,o(function(i,n){for(var s,o=e([],i.length,t),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function m(e,t){var n,s,o,r,a,l,c,u=Y[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=P.preFilter;a;){(!n||(s=me.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=ge.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(fe," ")}),a=a.slice(n.length));for(r in P.filter)!(s=we[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return t?a.length:a?i.error(e):Y(e,l).slice(0)}function g(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function v(e,t,i){var n=t.dir,s=i&&"parentNode"===n,o=W++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,o)}:function(t,i,r){var a,l,c,u=G+" "+o;if(r){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(c=t[U]||(t[U]={}),(l=c[n])&&l[0]===u){if((a=l[1])===!0||a===D)return a===!0}else if(l=c[n]=[u],l[1]=e(t,i,r)||D,l[1]===!0)return!0}}function _(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function y(e,t,i,n,s){for(var o,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!i||i(o,n,s))&&(r.push(o),c&&t.push(a));return r}function b(e,t,i,n,s,r){return n&&!n[U]&&(n=b(n)),s&&!s[U]&&(s=b(s,r)),o(function(o,r,a,l){var c,u,d,h=[],p=[],f=r.length,m=o||k(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:y(m,h,e,a,l),v=i?s||(o?e:f||n)?[]:r:g;if(i&&i(g,v,a,l),n)for(c=y(v,p),n(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(g[p[u]]=d));if(o){if(s||e){if(s){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);s(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=s?re.call(o,d):h[u])>-1&&(o[c]=!(r[c]=d))}}else v=y(v===r?v.splice(f,v.length):v),s?s(null,r,v,l):se.apply(r,v)})}function w(e){for(var t,i,n,s=e.length,o=P.relative[e[0].type],r=o||P.relative[" "],a=o?1:0,l=v(function(e){return e===t},r,!0),c=v(function(e){return re.call(t,e)>-1},r,!0),u=[function(e,i,n){return!o&&(n||i!==I)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];s>a;a++)if(i=P.relative[e[a].type])u=[v(_(u),i)];else{if(i=P.filter[e[a].type].apply(null,e[a].matches),i[U]){for(n=++a;s>n&&!P.relative[e[n].type];n++);return b(a>1&&_(u),a>1&&g(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(fe,"$1"),i,n>a&&w(e.slice(a,n)),s>n&&w(e=e.slice(n)),s>n&&g(e))}u.push(i)}return _(u)}function x(e,t){var n=0,s=t.length>0,r=e.length>0,a=function(o,a,l,c,u){var d,h,p,f=[],m=0,g="0",v=o&&[],_=null!=u,b=I,w=o||r&&P.find.TAG("*",u&&a.parentNode||a),x=G+=null==b?1:Math.random()||.1;for(_&&(I=a!==R&&a,D=n);null!=(d=w[g]);g++){if(r&&d){for(h=0;p=e[h++];)if(p(d,a,l)){c.push(d);break}_&&(G=x,D=++n)}s&&((d=!p&&d)&&m--,o&&v.push(d))}if(m+=g,s&&g!==m){for(h=0;p=t[h++];)p(v,f,a,l);if(o){if(m>0)for(;g--;)v[g]||f[g]||(f[g]=ie.call(c));f=y(f)}se.apply(c,f),_&&!o&&f.length>0&&m+t.length>1&&i.uniqueSort(c)}return _&&(G=x,I=b),v};return s?o(a):a}function k(e,t,n){for(var s=0,o=t.length;o>s;s++)i(e,t[s],n);return n}function S(e,t,i,n){var s,o,r,a,l,c=m(e);if(!n&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&M.getById&&9===t.nodeType&&z&&P.relative[o[1].type]){if(t=(P.find.ID(r.matches[0].replace(Me,De),t)||[])[0],!t)return i;e=e.slice(o.shift().value.length)}for(s=we.needsContext.test(e)?0:o.length;s--&&(r=o[s],!P.relative[a=r.type]);)if((l=P.find[a])&&(n=l(r.matches[0].replace(Me,De),ve.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=n.length&&g(o),!e)return se.apply(i,n),i;break}}return F(e,c)(n,t,!z,i,ve.test(e)),i}function C(){}var T,M,D,P,E,A,F,I,N,O,R,j,z,L,B,H,$,U="sizzle"+-new Date,q=e.document,G=0,W=0,V=s(),Y=s(),J=s(),Q=!1,K=function(){return 0},X=typeof t,Z=1<<31,ee={}.hasOwnProperty,te=[],ie=te.pop,ne=te.push,se=te.push,oe=te.slice,re=te.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ae="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",le="[\\x20\\t\\r\\n\\f]",ce="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",de=ce.replace("w","w#"),he="\\["+le+"*("+ce+")"+le+"*(?:([*^$|!~]?=)"+le+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+de+")|)|)"+le+"*\\]",pe=":("+ce+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+he.replace(3,8)+")*)|.*)\\)|)",fe=new RegExp("^"+le+"+|((?:^|[^\\\\])(?:\\\\.)*)"+le+"+$","g"),me=new RegExp("^"+le+"*,"+le+"*"),ge=new RegExp("^"+le+"*([>+~]|"+le+")"+le+"*"),ve=new RegExp(le+"*[+~]"),_e=new RegExp("="+le+"*([^\\]'\"]*)"+le+"*\\]","g"),ye=new RegExp(pe),be=new RegExp("^"+de+"$"),we={ID:new RegExp("^#("+ce+")"),CLASS:new RegExp("^\\.("+ce+")"),TAG:new RegExp("^("+ce.replace("w","w*")+")"),ATTR:new RegExp("^"+he),PSEUDO:new RegExp("^"+pe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+le+"*(even|odd|(([+-]|)(\\d*)n|)"+le+"*(?:([+-]|)"+le+"*(\\d+)|))"+le+"*\\)|)","i"),bool:new RegExp("^(?:"+ae+")$","i"),needsContext:new RegExp("^"+le+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+le+"*((?:-\\d)?\\d*)"+le+"*\\)|)(?=[^-]|$)","i")},xe=/^[^{]+\{\s*\[native \w/,ke=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Se=/^(?:input|select|textarea|button)$/i,Ce=/^h\d$/i,Te=/'|\\/g,Me=new RegExp("\\\\([\\da-f]{1,6}"+le+"?|("+le+")|.)","ig"),De=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{se.apply(te=oe.call(q.childNodes),q.childNodes),te[q.childNodes.length].nodeType}catch(Pe){se={apply:te.length?function(e,t){ne.apply(e,oe.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}A=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=i.support={},O=i.setDocument=function(e){var t=e?e.ownerDocument||e:q;return t!==R&&9===t.nodeType&&t.documentElement?(R=t,j=t.documentElement,z=!A(t),M.attributes=r(function(e){return e.innerHTML="<a href='#'></a>",a("type|href|height|width",c,"#"===e.firstChild.getAttribute("href")),a(ae,l,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),M.input=r(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),a("value",u,M.attributes&&M.input),M.getElementsByTagName=r(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),M.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),M.getById=r(function(e){return j.appendChild(e).id=U,!t.getElementsByName||!t.getElementsByName(U).length}),M.getById?(P.find.ID=function(e,t){if(typeof t.getElementById!==X&&z){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},P.filter.ID=function(e){var t=e.replace(Me,De);return function(e){return e.getAttribute("id")===t}}):(delete P.find.ID,P.filter.ID=function(e){var t=e.replace(Me,De);return function(e){var i=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return i&&i.value===t}}),P.find.TAG=M.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],s=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},P.find.CLASS=M.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&z?t.getElementsByClassName(e):void 0},B=[],L=[],(M.qsa=n(t.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||L.push("\\["+le+"*(?:value|"+ae+")"),e.querySelectorAll(":checked").length||L.push(":checked")}),r(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&L.push("[*^$]="+le+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(M.matchesSelector=n(H=j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&r(function(e){M.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),B.push("!=",pe)}),L=L.length&&new RegExp(L.join("|")),B=B.length&&new RegExp(B.join("|")),$=n(j.contains)||j.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M.sortDetached=r(function(e){return 1&e.compareDocumentPosition(t.createElement("div"))}),K=j.compareDocumentPosition?function(e,i){if(e===i)return Q=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!M.sortDetached&&i.compareDocumentPosition(e)===n?e===t||$(q,e)?-1:i===t||$(q,i)?1:N?re.call(N,e)-re.call(N,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,s=0,o=e.parentNode,r=i.parentNode,a=[e],l=[i];if(e===i)return Q=!0,0;if(!o||!r)return e===t?-1:i===t?1:o?-1:r?1:N?re.call(N,e)-re.call(N,i):0;if(o===r)return d(e,i);for(n=e;n=n.parentNode;)a.unshift(n);for(n=i;n=n.parentNode;)l.unshift(n);for(;a[s]===l[s];)s++;return s?d(a[s],l[s]):a[s]===q?-1:l[s]===q?1:0},t):R},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==R&&O(e),t=t.replace(_e,"='$1']"),M.matchesSelector&&z&&(!B||!B.test(t))&&(!L||!L.test(t)))try{var n=H.call(e,t);if(n||M.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(s){}return i(t,R,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==R&&O(e),$(e,t)},i.attr=function(e,i){(e.ownerDocument||e)!==R&&O(e);var n=P.attrHandle[i.toLowerCase()],s=n&&ee.call(P.attrHandle,i.toLowerCase())?n(e,i,!z):t;return s===t?M.attributes||!z?e.getAttribute(i):(s=e.getAttributeNode(i))&&s.specified?s.value:null:s},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,s=0;if(Q=!M.detectDuplicates,N=!M.sortStable&&e.slice(0),e.sort(K),Q){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return e},E=i.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=E(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n];n++)i+=E(t);return i},P=i.selectors={cacheLength:50,createPseudo:o,match:we,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Me,De),e[3]=(e[4]||e[5]||"").replace(Me,De),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return we.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&ye.test(n)&&(i=m(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Me,De).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+le+")"+e+"("+le+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var o=i.attr(s,e);return null==o?"!="===t:t?(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,s){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,p,f,m=o!==r?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&_){for(u=g[U]||(g[U]={}),c=u[e]||[],p=c[0]===G&&c[1],h=c[0]===G&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[G,p,h];break}}else if(_&&(c=(t[U]||(t[U]={}))[e])&&c[0]===G)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(_&&((d[U]||(d[U]={}))[e]=[G,h]),d!==t)););return h-=s,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,t){var n,s=P.pseudos[e]||P.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return s[U]?s(t):s.length>1?(n=[e,e,"",t],P.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,i){for(var n,o=s(e,t),r=o.length;r--;)n=re.call(e,o[r]),e[n]=!(i[n]=o[r])}):function(e){return s(e,0,n)}):s}},pseudos:{not:o(function(e){var t=[],i=[],n=F(e.replace(fe,"$1"));return n[U]?o(function(e,t,i,s){for(var o,r=n(e,null,s,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,s,o){return t[0]=e,n(t,null,o,i),!i.pop()}}),has:o(function(e){return function(t){return i(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:o(function(e){return be.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(Me,De).toLowerCase(),function(t){var i;do if(i=z?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===j},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!P.pseudos.empty(e)},header:function(e){return Ce.test(e.nodeName)},input:function(e){return Se.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:f(function(){return[0]}),last:f(function(e,t){return[t-1]}),eq:f(function(e,t,i){return[0>i?i+t:i]}),even:f(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:f(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:f(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:f(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}};for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})P.pseudos[T]=h(T);for(T in{submit:!0,reset:!0})P.pseudos[T]=p(T);F=i.compile=function(e,t){var i,n=[],s=[],o=J[e+" "];if(!o){for(t||(t=m(e)),i=t.length;i--;)o=w(t[i]),o[U]?n.push(o):s.push(o);o=J(e,x(s,n))}return o},P.pseudos.nth=P.pseudos.eq,C.prototype=P.filters=P.pseudos,P.setFilters=new C,M.sortStable=U.split("").sort(K).join("")===U,O(),[0,0].sort(K),M.detectDuplicates=Q,ue.find=i,ue.expr=i.selectors,ue.expr[":"]=ue.expr.pseudos,ue.unique=i.uniqueSort,ue.text=i.getText,ue.isXMLDoc=i.isXML,ue.contains=i.contains}(e);var Ce={};ue.Callbacks=function(e){e="string"==typeof e?Ce[e]||n(e):ue.extend({},e);var i,s,o,r,a,l,c=[],u=!e.once&&[],d=function(t){for(s=e.memory&&t,o=!0,a=l||0,l=0,r=c.length,i=!0;c&&r>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){s=!1;break}i=!1,c&&(u?u.length&&d(u.shift()):s?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function n(t){ue.each(t,function(t,i){var s=ue.type(i);"function"===s?e.unique&&h.has(i)||c.push(i):i&&i.length&&"string"!==s&&n(i)})}(arguments),i?r=c.length:s&&(l=t,d(s))}return this},remove:function(){return c&&ue.each(arguments,function(e,t){for(var n;(n=ue.inArray(t,c,n))>-1;)c.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(e){return e?ue.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=u=s=t,this},disabled:function(){return!c},lock:function(){return u=t,s||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!u||(i?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},ue.extend({Deferred:function(e){var t=[["resolve","done",ue.Callbacks("once memory"),"resolved"],["reject","fail",ue.Callbacks("once memory"),"rejected"],["notify","progress",ue.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ue.Deferred(function(i){ue.each(t,function(t,o){var r=o[0],a=ue.isFunction(e[t])&&e[t];s[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ue.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ue.extend(e,n):n}},s={};return n.pipe=n.then,ue.each(t,function(e,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,o=oe.call(arguments),r=o.length,a=1!==r||e&&ue.isFunction(e.promise)?r:0,l=1===a?e:ue.Deferred(),c=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?oe.call(arguments):s,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&ue.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,t)):--a;return a||l.resolveWith(n,o),l.promise()}}),ue.support=function(t){var i,n,s,o,r,a,l,c,u,d=Q.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!i.length)return t;o=Q.createElement("select"),a=o.appendChild(Q.createElement("option")),s=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!s.value,t.optSelected=a.selected,t.enctype=!!Q.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}s=Q.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),r=Q.createDocumentFragment(),r.appendChild(s),t.appendChecked=s.checked,t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ue(t))break;return t.ownLast="0"!==u,ue(function(){var i,n,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=Q.getElementsByTagName("body")[0];r&&(i=Q.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=d.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ue.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(Q.createElement("div")),n.style.cssText=d.style.cssText=o,n.style.marginRight=n.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==Y&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(i),i=d=s=n=null)}),i=o=r=a=n=s=null,t}({});var Te=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Me=/([A-Z])/g;ue.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ue.cache[e[ue.expando]]:e[ue.expando],!!e&&!a(e)},data:function(e,t,i){return s(e,t,i)},removeData:function(e,t){return o(e,t)},_data:function(e,t,i){return s(e,t,i,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ue.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ue.fn.extend({data:function(e,i){var n,s,o=null,a=0,l=this[0];if(e===t){if(this.length&&(o=ue.data(l),1===l.nodeType&&!ue._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)s=n[a].name,0===s.indexOf("data-")&&(s=ue.camelCase(s.slice(5)),r(l,s,o[s]));ue._data(l,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ue.data(this,e)}):arguments.length>1?this.each(function(){ue.data(this,e,i)}):l?r(l,e,ue.data(l,e)):null},removeData:function(e){return this.each(function(){ue.removeData(this,e)})}}),ue.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ue._data(e,t),i&&(!n||ue.isArray(i)?n=ue._data(e,t,ue.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ue.queue(e,t),n=i.length,s=i.shift(),o=ue._queueHooks(e,t),r=function(){ue.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),o.cur=s,s&&("fx"===t&&i.unshift("inprogress"),delete o.stop,s.call(e,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ue._data(e,i)||ue._data(e,i,{empty:ue.Callbacks("once memory").add(function(){ue._removeData(e,t+"queue"),ue._removeData(e,i)})})}}),ue.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?ue.queue(this[0],e):i===t?this:this.each(function(){var t=ue.queue(this,e,i);ue._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ue.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ue.dequeue(this,e)})},delay:function(e,t){return e=ue.fx?ue.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,s=1,o=ue.Deferred(),r=this,a=this.length,l=function(){--s||o.resolveWith(r,[r])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)n=ue._data(r[a],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),o.promise(i)}});var De,Pe,Ee=/[\t\r\n\f]/g,Ae=/\r/g,Fe=/^(?:input|select|textarea|button|object)$/i,Ie=/^(?:a|area)$/i,Ne=/^(?:checked|selected)$/i,Oe=ue.support.getSetAttribute,Re=ue.support.input;ue.fn.extend({attr:function(e,t){return ue.access(this,ue.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ue.removeAttr(this,e)})},prop:function(e,t){return ue.access(this,ue.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ue.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,s,o,r=0,a=this.length,l="string"==typeof e&&e;if(ue.isFunction(e))return this.each(function(t){ue(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(he)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):" ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i.className=ue.trim(n)}return this},removeClass:function(e){var t,i,n,s,o,r=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ue.isFunction(e))return this.each(function(t){ue(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(he)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):"")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");i.className=e?ue.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return ue.isFunction(e)?this.each(function(i){ue(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var s,o=0,r=ue(this),a=t,l=e.match(he)||[];s=l[o++];)a=n?a:!r.hasClass(s),r[a?"addClass":"removeClass"](s);else(i===Y||"boolean"===i)&&(this.className&&ue._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ue._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ee," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,s,o=this[0];{if(arguments.length)return s=ue.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=s?e.call(this,i,ue(this).val()):e,null==o?o="":"number"==typeof o?o+="":ue.isArray(o)&&(o=ue.map(o,function(e){return null==e?"":e+""})),n=ue.valHooks[this.type]||ue.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=ue.valHooks[o.type]||ue.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(Ae,""):null==i?"":i)}}}),ue.extend({valHooks:{option:{get:function(e){var t=ue.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,r=o?null:[],a=o?s+1:n.length,l=0>s?a:o?s:0;a>l;l++)if(i=n[l],(i.selected||l===s)&&(ue.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ue.nodeName(i.parentNode,"optgroup"))){if(t=ue(i).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,n,s=e.options,o=ue.makeArray(t),r=s.length;r--;)n=s[r],(n.selected=ue.inArray(ue(n).val(),o)>=0)&&(i=!0);return i||(e.selectedIndex=-1),o}}},attr:function(e,i,n){var s,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===Y?ue.prop(e,i,n):(1===r&&ue.isXMLDoc(e)||(i=i.toLowerCase(),s=ue.attrHooks[i]||(ue.expr.match.bool.test(i)?Pe:De)),n===t?s&&"get"in s&&null!==(o=s.get(e,i))?o:(o=ue.find.attr(e,i),null==o?t:o):null!==n?s&&"set"in s&&(o=s.set(e,n,i))!==t?o:(e.setAttribute(i,n+""),n):void ue.removeAttr(e,i))},removeAttr:function(e,t){var i,n,s=0,o=t&&t.match(he);if(o&&1===e.nodeType)for(;i=o[s++];)n=ue.propFix[i]||i,ue.expr.match.bool.test(i)?Re&&Oe||!Ne.test(i)?e[n]=!1:e[ue.camelCase("default-"+i)]=e[n]=!1:ue.attr(e,i,""),e.removeAttribute(Oe?i:n)},attrHooks:{type:{set:function(e,t){if(!ue.support.radioValue&&"radio"===t&&ue.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,i,n){var s,o,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!ue.isXMLDoc(e),r&&(i=ue.propFix[i]||i,o=ue.propHooks[i]),n!==t?o&&"set"in o&&(s=o.set(e,n,i))!==t?s:e[i]=n:o&&"get"in o&&null!==(s=o.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var t=ue.find.attr(e,"tabindex");return t?parseInt(t,10):Fe.test(e.nodeName)||Ie.test(e.nodeName)&&e.href?0:-1}}}}),Pe={set:function(e,t,i){return t===!1?ue.removeAttr(e,i):Re&&Oe||!Ne.test(i)?e.setAttribute(!Oe&&ue.propFix[i]||i,i):e[ue.camelCase("default-"+i)]=e[i]=!0,i}},ue.each(ue.expr.match.bool.source.match(/\w+/g),function(e,i){var n=ue.expr.attrHandle[i]||ue.find.attr;ue.expr.attrHandle[i]=Re&&Oe||!Ne.test(i)?function(e,i,s){var o=ue.expr.attrHandle[i],r=s?t:(ue.expr.attrHandle[i]=t)!=n(e,i,s)?i.toLowerCase():null;return ue.expr.attrHandle[i]=o,r}:function(e,i,n){return n?t:e[ue.camelCase("default-"+i)]?i.toLowerCase():null}}),Re&&Oe||(ue.attrHooks.value={set:function(e,t,i){return ue.nodeName(e,"input")?void(e.defaultValue=t):De&&De.set(e,t,i)}}),Oe||(De={set:function(e,i,n){var s=e.getAttributeNode(n);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(n)),s.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},ue.expr.attrHandle.id=ue.expr.attrHandle.name=ue.expr.attrHandle.coords=function(e,i,n){var s;return n?t:(s=e.getAttributeNode(i))&&""!==s.value?s.value:null},ue.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:De.set},ue.attrHooks.contenteditable={set:function(e,t,i){De.set(e,""===t?!1:t,i)}},ue.each(["width","height"],function(e,t){ue.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ue.support.hrefNormalized||ue.each(["href","src"],function(e,t){ue.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ue.support.style||(ue.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ue.support.optSelected||(ue.propHooks.selected={get:function(e){var t=e.parentNode;
return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ue.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ue.propFix[this.toLowerCase()]=this}),ue.support.enctype||(ue.propFix.enctype="encoding"),ue.each(["radio","checkbox"],function(){ue.valHooks[this]={set:function(e,t){return ue.isArray(t)?e.checked=ue.inArray(ue(e).val(),t)>=0:void 0}},ue.support.checkOn||(ue.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var je=/^(?:input|select|textarea)$/i,ze=/^key/,Le=/^(?:mouse|contextmenu)|click/,Be=/^(?:focusinfocus|focusoutblur)$/,He=/^([^.]*)(?:\.(.+)|)$/;ue.event={global:{},add:function(e,i,n,s,o){var r,a,l,c,u,d,h,p,f,m,g,v=ue._data(e);if(v){for(n.handler&&(c=n,n=c.handler,o=c.selector),n.guid||(n.guid=ue.guid++),(a=v.events)||(a=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ue===Y||e&&ue.event.triggered===e.type?t:ue.event.dispatch.apply(d.elem,arguments)},d.elem=e),i=(i||"").match(he)||[""],l=i.length;l--;)r=He.exec(i[l])||[],f=g=r[1],m=(r[2]||"").split(".").sort(),f&&(u=ue.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=ue.event.special[f]||{},h=ue.extend({type:f,origType:g,data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&ue.expr.match.needsContext.test(o),namespace:m.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,u.setup&&u.setup.call(e,s,m,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),ue.event.global[f]=!0);e=null}},remove:function(e,t,i,n,s){var o,r,a,l,c,u,d,h,p,f,m,g=ue.hasData(e)&&ue._data(e);if(g&&(u=g.events)){for(t=(t||"").match(he)||[""],c=t.length;c--;)if(a=He.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=ue.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,h=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)r=h[o],!s&&m!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(h.splice(o,1),r.selector&&h.delegateCount--,d.remove&&d.remove.call(e,r));l&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||ue.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)ue.event.remove(e,p+t[c],i,n,!0);ue.isEmptyObject(u)&&(delete g.handle,ue._removeData(e,"events"))}},trigger:function(i,n,s,o){var r,a,l,c,u,d,h,p=[s||Q],f=le.call(i,"type")?i.type:i,m=le.call(i,"namespace")?i.namespace.split("."):[];if(l=d=s=s||Q,3!==s.nodeType&&8!==s.nodeType&&!Be.test(f+ue.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,i=i[ue.expando]?i:new ue.Event(f,"object"==typeof i&&i),i.isTrigger=o?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=s),n=null==n?[i]:ue.makeArray(n,[i]),u=ue.event.special[f]||{},o||!u.trigger||u.trigger.apply(s,n)!==!1)){if(!o&&!u.noBubble&&!ue.isWindow(s)){for(c=u.delegateType||f,Be.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),d=l;d===(s.ownerDocument||Q)&&p.push(d.defaultView||d.parentWindow||e)}for(h=0;(l=p[h++])&&!i.isPropagationStopped();)i.type=h>1?c:u.bindType||f,r=(ue._data(l,"events")||{})[i.type]&&ue._data(l,"handle"),r&&r.apply(l,n),r=a&&l[a],r&&ue.acceptData(l)&&r.apply&&r.apply(l,n)===!1&&i.preventDefault();if(i.type=f,!o&&!i.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),n)===!1)&&ue.acceptData(s)&&a&&s[f]&&!ue.isWindow(s)){d=s[a],d&&(s[a]=null),ue.event.triggered=f;try{s[f]()}catch(g){}ue.event.triggered=t,d&&(s[a]=d)}return i.result}},dispatch:function(e){e=ue.event.fix(e);var i,n,s,o,r,a=[],l=oe.call(arguments),c=(ue._data(this,"events")||{})[e.type]||[],u=ue.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=ue.event.handlers.call(this,e,c),i=0;(o=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((ue.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),n!==t&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,s,o,r,a=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],r=0;l>r;r++)s=i[r],n=s.selector+" ",o[n]===t&&(o[n]=s.needsContext?ue(n,this).index(c)>=0:ue.find(n,this,null,[c]).length),o[n]&&o.push(s);o.length&&a.push({elem:c,handlers:o})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(e){if(e[ue.expando])return e;var t,i,n,s=e.type,o=e,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Le.test(s)?this.mouseHooks:ze.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new ue.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=o.srcElement||Q),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,o,r=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(s=e.target.ownerDocument||Q,o=s.documentElement,n=s.body,e.pageX=i.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ue.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ue.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var s=ue.extend(new ue.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ue.event.trigger(s,null,t):ue.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},ue.removeEvent=Q.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===Y&&(e[n]=null),e.detachEvent(n,i))},ue.Event=function(e,t){return this instanceof ue.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ue.extend(this,t),this.timeStamp=e&&e.timeStamp||ue.now(),void(this[ue.expando]=!0)):new ue.Event(e,t)},ue.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ue.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ue.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==n&&!ue.contains(n,s))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),ue.support.submitBubbles||(ue.event.special.submit={setup:function(){return ue.nodeName(this,"form")?!1:void ue.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=ue.nodeName(i,"input")||ue.nodeName(i,"button")?i.form:t;n&&!ue._data(n,"submitBubbles")&&(ue.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ue._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ue.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ue.nodeName(this,"form")?!1:void ue.event.remove(this,"._submit")}}),ue.support.changeBubbles||(ue.event.special.change={setup:function(){return je.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ue.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ue.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ue.event.simulate("change",this,e,!0)})),!1):void ue.event.add(this,"beforeactivate._change",function(e){var t=e.target;je.test(t.nodeName)&&!ue._data(t,"changeBubbles")&&(ue.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ue.event.simulate("change",this.parentNode,e,!0)}),ue._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ue.event.remove(this,"._change"),!je.test(this.nodeName)}}),ue.support.focusinBubbles||ue.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ue.event.simulate(t,e.target,ue.event.fix(e),!0)};ue.event.special[t]={setup:function(){0===i++&&Q.addEventListener(e,n,!0)},teardown:function(){0===--i&&Q.removeEventListener(e,n,!0)}}}),ue.fn.extend({on:function(e,i,n,s,o){var r,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(r in e)this.on(r,i,n,e[r],o);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),s===!1)s=c;else if(!s)return this;return 1===o&&(a=s,s=function(e){return ue().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=ue.guid++)),this.each(function(){ue.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var s,o;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,ue(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=c),this.each(function(){ue.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){ue.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ue.event.trigger(e,t,i,!0):void 0}});var $e=/^.[^:#\[\.,]*$/,Ue=/^(?:parents|prev(?:Until|All))/,qe=ue.expr.match.needsContext,Ge={children:!0,contents:!0,next:!0,prev:!0};ue.fn.extend({find:function(e){var t,i=[],n=this,s=n.length;if("string"!=typeof e)return this.pushStack(ue(e).filter(function(){for(t=0;s>t;t++)if(ue.contains(n[t],this))return!0}));for(t=0;s>t;t++)ue.find(e,n[t],i);return i=this.pushStack(s>1?ue.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=ue(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ue.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&qe.test(e)?ue(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,s=this.length,o=[],r=qe.test(e)||"string"!=typeof e?ue(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ue.find.matchesSelector(i,e))){i=o.push(i);break}return this.pushStack(o.length>1?ue.unique(o):o)},index:function(e){return e?"string"==typeof e?ue.inArray(this[0],ue(e)):ue.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ue(e,t):ue.makeArray(e&&e.nodeType?[e]:e),n=ue.merge(this.get(),i);return this.pushStack(ue.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ue.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ue.dir(e,"parentNode",i)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ue.dir(e,"nextSibling")},prevAll:function(e){return ue.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ue.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ue.dir(e,"previousSibling",i)},siblings:function(e){return ue.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ue.sibling(e.firstChild)},contents:function(e){return ue.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ue.merge([],e.childNodes)}},function(e,t){ue.fn[e]=function(i,n){var s=ue.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ue.filter(n,s)),this.length>1&&(Ge[e]||(s=ue.unique(s)),Ue.test(e)&&(s=s.reverse())),this.pushStack(s)}}),ue.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ue.find.matchesSelector(n,e)?[n]:[]:ue.find.matches(e,ue.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var s=[],o=e[i];o&&9!==o.nodeType&&(n===t||1!==o.nodeType||!ue(o).is(n));)1===o.nodeType&&s.push(o),o=o[i];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var We="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ve=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+We+")[\\s/>]","i"),Je=/^\s+/,Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ke=/<([\w:]+)/,Xe=/<tbody/i,Ze=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^$|\/(?:java|ecma)script/i,st=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ue.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},at=p(Q),lt=at.appendChild(Q.createElement("div"));rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,ue.fn.extend({text:function(e){return ue.access(this,function(e){return e===t?ue.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ue.filter(e,this):this,s=0;null!=(i=n[s]);s++)t||1!==i.nodeType||ue.cleanData(b(i)),i.parentNode&&(t&&ue.contains(i.ownerDocument,i)&&v(b(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ue.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ue.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ue.clone(this,e,t)})},html:function(e){return ue.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Ve,""):t;if("string"==typeof e&&!et.test(e)&&(ue.support.htmlSerialize||!Ye.test(e))&&(ue.support.leadingWhitespace||!Je.test(e))&&!rt[(Ke.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Qe,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(ue.cleanData(b(i,!1)),i.innerHTML=e);i=0}catch(o){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ue.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],s=e[t++];s&&(n&&n.parentNode!==s&&(n=this.nextSibling),ue(this).remove(),s.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=ne.apply([],e);var n,s,o,r,a,l,c=0,u=this.length,d=this,h=u-1,p=e[0],f=ue.isFunction(p);if(f||!(1>=u||"string"!=typeof p||ue.support.checkClone)&&it.test(p))return this.each(function(n){var s=d.eq(n);f&&(e[0]=p.call(this,n,s.html())),s.domManip(e,t,i)});if(u&&(l=ue.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(r=ue.map(b(l,"script"),m),o=r.length;u>c;c++)s=l,c!==h&&(s=ue.clone(s,!0,!0),o&&ue.merge(r,b(s,"script"))),t.call(this[c],s,c);if(o)for(a=r[r.length-1].ownerDocument,ue.map(r,g),c=0;o>c;c++)s=r[c],nt.test(s.type||"")&&!ue._data(s,"globalEval")&&ue.contains(a,s)&&(s.src?ue._evalUrl(s.src):ue.globalEval((s.text||s.textContent||s.innerHTML||"").replace(ot,"")));l=n=null}return this}}),ue.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ue.fn[e]=function(e){for(var i,n=0,s=[],o=ue(e),r=o.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ue(o[n])[t](i),se.apply(s,i.get());return this.pushStack(s)}}),ue.extend({clone:function(e,t,i){var n,s,o,r,a,l=ue.contains(e.ownerDocument,e);if(ue.support.html5Clone||ue.isXMLDoc(e)||!Ye.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(lt.innerHTML=e.outerHTML,lt.removeChild(o=lt.firstChild)),!(ue.support.noCloneEvent&&ue.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ue.isXMLDoc(e)))for(n=b(o),a=b(e),r=0;null!=(s=a[r]);++r)n[r]&&y(s,n[r]);if(t)if(i)for(a=a||b(e),n=n||b(o),r=0;null!=(s=a[r]);r++)_(s,n[r]);else _(e,o);return n=b(o,"script"),n.length>0&&v(n,!l&&b(e,"script")),n=a=s=null,o},buildFragment:function(e,t,i,n){for(var s,o,r,a,l,c,u,d=e.length,h=p(t),f=[],m=0;d>m;m++)if(o=e[m],o||0===o)if("object"===ue.type(o))ue.merge(f,o.nodeType?[o]:o);else if(Ze.test(o)){for(a=a||h.appendChild(t.createElement("div")),l=(Ke.exec(o)||["",""])[1].toLowerCase(),u=rt[l]||rt._default,a.innerHTML=u[1]+o.replace(Qe,"<$1></$2>")+u[2],s=u[0];s--;)a=a.lastChild;if(!ue.support.leadingWhitespace&&Je.test(o)&&f.push(t.createTextNode(Je.exec(o)[0])),!ue.support.tbody)for(o="table"!==l||Xe.test(o)?"<table>"!==u[1]||Xe.test(o)?0:a:a.firstChild,s=o&&o.childNodes.length;s--;)ue.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(ue.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(t.createTextNode(o));for(a&&h.removeChild(a),ue.support.appendChecked||ue.grep(b(f,"input"),w),m=0;o=f[m++];)if((!n||-1===ue.inArray(o,n))&&(r=ue.contains(o.ownerDocument,o),a=b(h.appendChild(o),"script"),r&&v(a),i))for(s=0;o=a[s++];)nt.test(o.type||"")&&i.push(o);return a=null,h},cleanData:function(e,t){for(var i,n,s,o,r=0,a=ue.expando,l=ue.cache,c=ue.support.deleteExpando,u=ue.event.special;null!=(i=e[r]);r++)if((t||ue.acceptData(i))&&(s=i[a],o=s&&l[s])){if(o.events)for(n in o.events)u[n]?ue.event.remove(i,n):ue.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[a]:typeof i.removeAttribute!==Y?i.removeAttribute(a):i[a]=null,te.push(s))}},_evalUrl:function(e){return ue.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ue.fn.extend({wrapAll:function(e){if(ue.isFunction(e))return this.each(function(t){ue(this).wrapAll(e.call(this,t))});if(this[0]){var t=ue(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ue.isFunction(e)?this.each(function(t){ue(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ue(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ue.isFunction(e);return this.each(function(i){ue(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ue.nodeName(this,"body")||ue(this).replaceWith(this.childNodes)}).end()}});var ct,ut,dt,ht=/alpha\([^)]*\)/i,pt=/opacity\s*=\s*([^)]*)/,ft=/^(top|right|bottom|left)$/,mt=/^(none|table(?!-c[ea]).+)/,gt=/^margin/,vt=new RegExp("^("+de+")(.*)$","i"),_t=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),yt=new RegExp("^([+-])=("+de+")","i"),bt={BODY:"block"},wt={position:"absolute",visibility:"hidden",display:"block"},xt={letterSpacing:0,fontWeight:400},kt=["Top","Right","Bottom","Left"],St=["Webkit","O","Moz","ms"];ue.fn.extend({css:function(e,i){return ue.access(this,function(e,i,n){var s,o,r={},a=0;if(ue.isArray(i)){for(o=ut(e),s=i.length;s>a;a++)r[i[a]]=ue.css(e,i[a],!1,o);return r}return n!==t?ue.style(e,i,n):ue.css(e,i)},e,i,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:k(this))?ue(this).show():ue(this).hide()})}}),ue.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=dt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ue.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,l=ue.camelCase(i),c=e.style;if(i=ue.cssProps[l]||(ue.cssProps[l]=x(c,l)),a=ue.cssHooks[i]||ue.cssHooks[l],n===t)return a&&"get"in a&&(o=a.get(e,!1,s))!==t?o:c[i];if(r=typeof n,"string"===r&&(o=yt.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ue.css(e,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||ue.cssNumber[l]||(n+="px"),ue.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,s))===t)))try{c[i]=n}catch(u){}}},css:function(e,i,n,s){var o,r,a,l=ue.camelCase(i);return i=ue.cssProps[l]||(ue.cssProps[l]=x(e.style,l)),a=ue.cssHooks[i]||ue.cssHooks[l],a&&"get"in a&&(r=a.get(e,!0,n)),r===t&&(r=dt(e,i,s)),"normal"===r&&i in xt&&(r=xt[i]),""===n||n?(o=parseFloat(r),n===!0||ue.isNumeric(o)?o||0:r):r}}),e.getComputedStyle?(ut=function(t){return e.getComputedStyle(t,null)},dt=function(e,i,n){var s,o,r,a=n||ut(e),l=a?a.getPropertyValue(i)||a[i]:t,c=e.style;return a&&(""!==l||ue.contains(e.ownerDocument,e)||(l=ue.style(e,i)),_t.test(l)&&gt.test(i)&&(s=c.width,o=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=s,c.minWidth=o,c.maxWidth=r)),l}):Q.documentElement.currentStyle&&(ut=function(e){return e.currentStyle},dt=function(e,i,n){var s,o,r,a=n||ut(e),l=a?a[i]:t,c=e.style;return null==l&&c&&c[i]&&(l=c[i]),_t.test(l)&&!ft.test(i)&&(s=c.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=s,r&&(o.left=r)),""===l?"auto":l}),ue.each(["height","width"],function(e,t){ue.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&mt.test(ue.css(e,"display"))?ue.swap(e,wt,function(){return M(e,t,n)}):M(e,t,n):void 0},set:function(e,i,n){var s=n&&ut(e);return C(e,i,n?T(e,t,n,ue.support.boxSizing&&"border-box"===ue.css(e,"boxSizing",!1,s),s):0)}}}),ue.support.opacity||(ue.cssHooks.opacity={get:function(e,t){return pt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=ue.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ue.trim(o.replace(ht,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ht.test(o)?o.replace(ht,s):o+" "+s)}}),ue(function(){ue.support.reliableMarginRight||(ue.cssHooks.marginRight={get:function(e,t){return t?ue.swap(e,{display:"inline-block"},dt,[e,"marginRight"]):void 0}}),!ue.support.pixelPosition&&ue.fn.position&&ue.each(["top","left"],function(e,t){ue.cssHooks[t]={get:function(e,i){return i?(i=dt(e,t),_t.test(i)?ue(e).position()[t]+"px":i):void 0}}})}),ue.expr&&ue.expr.filters&&(ue.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ue.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ue.css(e,"display"))},ue.expr.filters.visible=function(e){return!ue.expr.filters.hidden(e)}),ue.each({margin:"",padding:"",border:"Width"},function(e,t){ue.cssHooks[e+t]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[e+kt[n]+t]=o[n]||o[n-2]||o[0];return s}},gt.test(e)||(ue.cssHooks[e+t].set=C)});var Ct=/%20/g,Tt=/\[\]$/,Mt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;ue.fn.extend({serialize:function(){return ue.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ue.prop(this,"elements");return e?ue.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ue(this).is(":disabled")&&Pt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var i=ue(this).val();return null==i?null:ue.isArray(i)?ue.map(i,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:i.replace(Mt,"\r\n")}}).get()}}),ue.param=function(e,i){var n,s=[],o=function(e,t){t=ue.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=ue.ajaxSettings&&ue.ajaxSettings.traditional),ue.isArray(e)||e.jquery&&!ue.isPlainObject(e))ue.each(e,function(){o(this.name,this.value)});else for(n in e)E(n,e[n],i,o);return s.join("&").replace(Ct,"+")},ue.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ue.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ue.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Et,At,Ft=ue.now(),It=/\?/,Nt=/#.*$/,Ot=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Bt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ht=ue.fn.load,$t={},Ut={},qt="*/".concat("*");try{At=J.href}catch(Gt){At=Q.createElement("a"),At.href="",At=At.href}Et=Bt.exec(At.toLowerCase())||[],ue.fn.load=function(e,i,n){if("string"!=typeof e&&Ht)return Ht.apply(this,arguments);var s,o,r,a=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),ue.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(r="POST"),a.length>0&&ue.ajax({url:e,type:r,dataType:"html",data:i}).done(function(e){o=arguments,a.html(s?ue("<div>").append(ue.parseHTML(e)).find(s):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},ue.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ue.fn[t]=function(e){return this.on(t,e)}}),ue.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At,type:"GET",isLocal:jt.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ue.parseJSON,"text xml":ue.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,ue.ajaxSettings),t):I(ue.ajaxSettings,e)},ajaxPrefilter:A($t),ajaxTransport:A(Ut),ajax:function(e,i){function n(e,i,n,s){var o,d,_,y,w,k=i;2!==b&&(b=2,l&&clearTimeout(l),u=t,a=s||"",x.readyState=e>0?4:0,o=e>=200&&300>e||304===e,n&&(y=N(h,x,n)),y=O(h,y,x,o),o?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ue.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(ue.etag[r]=w)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=y.state,d=y.data,_=y.error,o=!_)):(_=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(i||k)+"",o?m.resolveWith(p,[d,k,x]):m.rejectWith(p,[x,k,_]),x.statusCode(v),v=t,c&&f.trigger(o?"ajaxSuccess":"ajaxError",[x,h,o?d:_]),g.fireWith(p,[x,k]),c&&(f.trigger("ajaxComplete",[x,h]),--ue.active||ue.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var s,o,r,a,l,c,u,d,h=ue.ajaxSetup({},i),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?ue(p):ue.event,m=ue.Deferred(),g=ue.Callbacks("once memory"),v=h.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!d)for(d={};t=Rt.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,_[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),n(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||At)+"").replace(Nt,"").replace(Lt,Et[1]+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=ue.trim(h.dataType||"*").toLowerCase().match(he)||[""],null==h.crossDomain&&(s=Bt.exec(h.url.toLowerCase()),h.crossDomain=!(!s||s[1]===Et[1]&&s[2]===Et[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Et[3]||("http:"===Et[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ue.param(h.data,h.traditional)),F($t,h,i,x),2===b)return x;c=h.global,c&&0===ue.active++&&ue.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!zt.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(It.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ot.test(r)?r.replace(Ot,"$1_="+Ft++):r+(It.test(r)?"&":"?")+"_="+Ft++)),h.ifModified&&(ue.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ue.lastModified[r]),ue.etag[r]&&x.setRequestHeader("If-None-Match",ue.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+qt+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)x.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(p,x,h)===!1||2===b))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](h[o]);if(u=F(Ut,h,i,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,u.send(_,n)}catch(k){if(!(2>b))throw k;n(-1,k)}}else n(-1,"No Transport");return x},getJSON:function(e,t,i){return ue.get(e,t,i,"json")},getScript:function(e,i){return ue.get(e,t,i,"script")}}),ue.each(["get","post"],function(e,i){ue[i]=function(e,n,s,o){return ue.isFunction(n)&&(o=o||s,s=n,n=t),ue.ajax({url:e,type:i,dataType:o,data:n,success:s})}}),ue.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ue.globalEval(e),e}}}),ue.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ue.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=Q.head||ue("head")[0]||Q.documentElement;
return{send:function(t,s){i=Q.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Wt=[],Vt=/(=)\?(?=&|$)|\?\?/;ue.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||ue.expando+"_"+Ft++;return this[e]=!0,e}}),ue.ajaxPrefilter("json jsonp",function(i,n,s){var o,r,a,l=i.jsonp!==!1&&(Vt.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(o=i.jsonpCallback=ue.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Vt,"$1"+o):i.jsonp!==!1&&(i.url+=(It.test(i.url)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return a||ue.error(o+" was not called"),a[0]},i.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},s.always(function(){e[o]=r,i[o]&&(i.jsonpCallback=n.jsonpCallback,Wt.push(o)),a&&ue.isFunction(r)&&r(a[0]),a=r=t}),"script"):void 0});var Yt,Jt,Qt=0,Kt=e.ActiveXObject&&function(){var e;for(e in Yt)Yt[e](t,!0)};ue.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&R()||j()}:R,Jt=ue.ajaxSettings.xhr(),ue.support.cors=!!Jt&&"withCredentials"in Jt,Jt=ue.support.ajax=!!Jt,Jt&&ue.ajaxTransport(function(i){if(!i.crossDomain||ue.support.cors){var n;return{send:function(s,o){var r,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)l.setRequestHeader(a,s[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,s){var a,c,u,d;try{if(n&&(s||4===l.readyState))if(n=t,r&&(l.onreadystatechange=ue.noop,Kt&&delete Yt[r]),s)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{u=l.statusText}catch(h){u=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){s||o(-1,p)}d&&o(a,u,d,c)},i.async?4===l.readyState?setTimeout(n):(r=++Qt,Kt&&(Yt||(Yt={},ue(e).unload(Kt)),Yt[r]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var Xt,Zt,ei=/^(?:toggle|show|hide)$/,ti=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),ii=/queueHooks$/,ni=[$],si={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=ti.exec(t),o=s&&s[3]||(ue.cssNumber[e]?"":"px"),r=(ue.cssNumber[e]||"px"!==o&&+n)&&ti.exec(ue.css(i.elem,e)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,ue.style(i.elem,e,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(i.unit=o,i.start=+r||+n||0,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};ue.Animation=ue.extend(B,{tweener:function(e,t){ue.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;s>n;n++)i=e[n],si[i]=si[i]||[],si[i].unshift(t)},prefilter:function(e,t){t?ni.unshift(e):ni.push(e)}}),ue.Tween=U,U.prototype={constructor:U,init:function(e,t,i,n,s,o){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ue.cssNumber[i]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,i=U.propHooks[this.prop];return this.options.duration?this.pos=t=ue.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ue.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ue.fx.step[e.prop]?ue.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ue.cssProps[e.prop]]||ue.cssHooks[e.prop])?ue.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ue.each(["toggle","show","hide"],function(e,t){var i=ue.fn[t];ue.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(q(t,!0),e,n,s)}}),ue.fn.extend({fadeTo:function(e,t,i,n){return this.filter(k).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=ue.isEmptyObject(e),o=ue.speed(t,i,n),r=function(){var t=B(this,ue.extend({},e),o);r.finish=function(){t.stop(!0)},(s||ue._data(this,"finish"))&&t.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,i,n){var s=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ue.timers,r=ue._data(this);if(i)r[i]&&r[i].stop&&s(r[i]);else for(i in r)r[i]&&r[i].stop&&ii.test(i)&&s(r[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&ue.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ue._data(this),n=i[e+"queue"],s=i[e+"queueHooks"],o=ue.timers,r=n?n.length:0;for(i.finish=!0,ue.queue(this,e,[]),s&&s.cur&&s.cur.finish&&s.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ue.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ue.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ue.speed=function(e,t,i){var n=e&&"object"==typeof e?ue.extend({},e):{complete:i||!i&&t||ue.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ue.isFunction(t)&&t};return n.duration=ue.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ue.fx.speeds?ue.fx.speeds[n.duration]:ue.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ue.isFunction(n.old)&&n.old.call(this),n.queue&&ue.dequeue(this,n.queue)},n},ue.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ue.timers=[],ue.fx=U.prototype.init,ue.fx.tick=function(){var e,i=ue.timers,n=0;for(Xt=ue.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||ue.fx.stop(),Xt=t},ue.fx.timer=function(e){e()&&ue.timers.push(e)&&ue.fx.start()},ue.fx.interval=13,ue.fx.start=function(){Zt||(Zt=setInterval(ue.fx.tick,ue.fx.interval))},ue.fx.stop=function(){clearInterval(Zt),Zt=null},ue.fx.speeds={slow:600,fast:200,_default:400},ue.fx.step={},ue.expr&&ue.expr.filters&&(ue.expr.filters.animated=function(e){return ue.grep(ue.timers,function(t){return e===t.elem}).length}),ue.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ue.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return i=r.documentElement,ue.contains(i,o)?(typeof o.getBoundingClientRect!==Y&&(s=o.getBoundingClientRect()),n=G(r),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},ue.offset={setOffset:function(e,t,i){var n=ue.css(e,"position");"static"===n&&(e.style.position="relative");var s,o,r=ue(e),a=r.offset(),l=ue.css(e,"top"),c=ue.css(e,"left"),u=("absolute"===n||"fixed"===n)&&ue.inArray("auto",[l,c])>-1,d={},h={};u?(h=r.position(),s=h.top,o=h.left):(s=parseFloat(l)||0,o=parseFloat(c)||0),ue.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):r.css(d)}},ue.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ue.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ue.nodeName(e[0],"html")||(i=e.offset()),i.top+=ue.css(e[0],"borderTopWidth",!0),i.left+=ue.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ue.css(n,"marginTop",!0),left:t.left-i.left-ue.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||K;e&&!ue.nodeName(e,"html")&&"static"===ue.css(e,"position");)e=e.offsetParent;return e||K})}}),ue.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);ue.fn[e]=function(s){return ue.access(this,function(e,s,o){var r=G(e);return o===t?r?i in r?r[i]:r.document.documentElement[s]:e[s]:void(r?r.scrollTo(n?ue(r).scrollLeft():o,n?o:ue(r).scrollTop()):e[s]=o)},e,s,arguments.length,null)}}),ue.each({Height:"height",Width:"width"},function(e,i){ue.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,s){ue.fn[s]=function(s,o){var r=arguments.length&&(n||"boolean"!=typeof s),a=n||(s===!0||o===!0?"margin":"border");return ue.access(this,function(i,n,s){var o;return ue.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+e],o["scroll"+e],i.body["offset"+e],o["offset"+e],o["client"+e])):s===t?ue.css(i,n,a):ue.style(i,n,s,a)},i,r?s:t,r,null)}})}),ue.fn.size=function(){return this.length},ue.fn.andSelf=ue.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=ue:(e.jQuery=e.$=ue,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ue}))}(window),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){var s=e.Backbone,o=[],r=(o.push,o.slice);o.splice;t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var s=this,o=i.once(function(){s.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var s,o,r,a,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),l=0,u=a.length;u>l;l++)if(e=a[l],r=this._events[e]){if(this._events[e]=s=[],t||n)for(d=0,h=r.length;h>d;d++)o=r[d],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&s.push(o);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},stopListening:function(e,t,n){var s=this._listeningTo;if(!s)return this;var o=!t&&!n;n||"object"!=typeof t||(n=this),e&&((s={})[e._listenId]=e);for(var r in s)e=s[r],e.off(t,n,this),(o||i.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)e[t].apply(e,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),r=0,a=o.length;a>r;r++)e[t].apply(e,[o[r]].concat(n));return!1}return!0},u=function(e,t){var i,n=-1,s=e.length,o=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(e,t){a[t]=function(t,n,s){var o=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=i.uniqueId("l"));return o[r]=t,s||"object"!=typeof n||(s=this),t[e](n,s,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var h=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var s,o,r,a,l,c,u,d;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;r=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)t=o[s],i.isEqual(d[s],t)||a.push(s),i.isEqual(u[s],t)?delete this.changed[s]:this.changed[s]=t,r?delete d[s]:d[s]=t;if(!l){a.length&&(this._pending=n);for(var h=0,p=a.length;p>h;h++)this.trigger("change:"+a[h],this,d[a[h]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in e)i.isEqual(s[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var s,o,r,a=this.attributes;if(null==e||"object"==typeof e?(s=e,n=t):(s={})[e]=t,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},a,s)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=i.extend(s||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},j(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=s),r=this.sync(o,this,n),s&&n.wait&&(this.attributes=a),r},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&s(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;j(this,e);var o=this.sync("delete",this,e);return e.wait||s(),o},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var s,o,r,a;for(s=0,o=e.length;o>s;s++)a=e[s]=this.get(e[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var s,o,r,a,l,c,u,d=t.at,p=this.model,f=this.comparator&&null==d&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],_=[],y={},b=t.add,w=t.merge,x=t.remove,k=!f&&b&&x?[]:!1;for(s=0,o=e.length;o>s;s++){if(l=e[s]||{},r=l instanceof h?a=l:l[p.prototype.idAttribute||"id"],c=this.get(r))x&&(y[c.cid]=!0),w&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!u&&c.hasChanged(g)&&(u=!0)),e[s]=c;else if(b){if(a=e[s]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=c||a,!k||!a.isNew()&&y[a.id]||k.push(a),y[a.id]=!0}if(x){for(s=0,o=this.length;o>s;++s)y[(a=this.models[s]).cid]||_.push(a);_.length&&this.remove(_,t)}if(v.length||k&&k.length)if(f&&(u=!0),this.length+=v.length,null!=d)for(s=0,o=v.length;o>s;s++)this.models.splice(d+s,0,v[s]);else{k&&(this.models.length=0);var S=k||v;for(s=0,o=S.length;o>s;s++)this.models.push(S[s])}if(u&&this.sort({silent:!0}),!t.silent){for(s=0,o=v.length;o>s;s++)(a=v[s]).trigger("add",a,this,t);(u||k&&k.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var s=e.reset?"reset":"set";n[s](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,s=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),s&&s(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var _=["groupBy","countBy","sortBy","indexBy"];i.each(_,function(e){f.prototype[e]=function(t,n){var s=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,s,n)}});var y=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var s=t.match(b),o=s[1],r=s[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,s){var o=k[e];i.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||R()),null!=s.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&x&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(i.extend(r,s));return n.trigger("request",n,l,s),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,M=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(S.prototype,a,{initialize:function(){},route:function(e,n,s){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return t.history.route(e,function(i){var r=o._extractParameters(e,i);o.execute(s,r),o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),t.history.trigger("route",o,n,r)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(D,"\\$&").replace(C,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,F=/msie [\w.]+/,I=/\/$/,N=/#.*$/;P.started=!1,i.extend(P.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(E,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,o=F.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(A,"/"),o&&this._wantsHashChange){var r=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!P.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(N,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new P;var O=function(e,t){var n,s=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,t);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,e&&i.extend(n.prototype,e),n.__super__=s.prototype,n};h.extend=f.extend=S.extend=y.extend=P.extend=O;var R=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),/*! backbone.paginator - v0.9.0-dev - 10/25/2013
* http://github.com/backbone-paginator/backbone.paginator
* Copyright (c) 2013 Addy Osmani; Licensed MIT */
Backbone.Paginator=function(e,t,i){"use strict";var n=t.map(e.VERSION.split("."),function(e){return parseInt(e,10)}),s={};s.version="0.9.0-dev",s.clientPager=e.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var e=t.defaults(this.paginator_ui,this.defaults_ui);t.defaults(this,e)},addModel:function(e){this.origModels.push(e)},removeModel:function(e){var i=t.indexOf(this.origModels,e);this.origModels.splice(i,1)},sync:function(s,o,r){var a=this;this.setDefaults();var l={};t.each(t.result(a,"server_api"),function(e,i){t.isFunction(e)&&(e=t.bind(e,a),e=e()),l[i]=e});var c=t.clone(a.paginator_core);t.each(c,function(e,i){t.isFunction(e)&&(e=t.bind(e,a),e=e()),c[i]=e}),c=t.defaults(c,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),c=t.extend(c,{data:decodeURIComponent(i.param(l)),processData:!1,url:t.result(c,"url")},r);var u=!(0===n[0]&&9===n[1]&&10===n[2]),d=0===n[0],h=c.success;c.success=function(e,t,i){h&&(u?h(e,t,i):h(o,e,c)),d&&o&&o.trigger&&o.trigger("sync",o,e,c)};var p=c.error;c.error=function(e){p&&p(o,e,c),d&&o&&o.trigger&&o.trigger("error",o,e,c)};var f=c.xhr=e.ajax(c);return o&&o.trigger&&o.trigger("request",o,f,c),f},nextPage:function(e){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(e))},previousPage:function(e){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(e))},goTo:function(e,t){void 0!==e&&(this.currentPage=parseInt(e,10),this.pager(t))},howManyPer:function(e){if(void 0!==e){var t=this.perPage;this.perPage=parseInt(e,10),this.currentPage=Math.ceil((t*(this.currentPage-1)+1)/e),this.pager()}},setSort:function(e,t){void 0!==e&&void 0!==t&&(this.lastSortColumn=this.sortColumn,this.sortColumn=e,this.sortDirection=t,this.pager(),this.info())},setFieldFilter:function(e){t.isEmpty(e)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=e,this.pager(),this.info())},doFakeFieldFilter:function(e){if(!t.isEmpty(e)){var i=this.origModels;return void 0===i&&(i=this.models),i=this._fieldFilter(i,e),""!==this.filterExpression&&(i=this._filter(i,this.filterFields,this.filterExpression)),i.length}},setFilter:function(e,t){void 0!==e&&void 0!==t&&(this.filterFields=e,this.lastFilterExpression=this.filterExpression,this.filterExpression=t,this.pager(),this.info())},doFakeFilter:function(e,i){if(void 0!==e&&void 0!==i){var n=this.origModels;return void 0===n&&(n=this.models),t.isEmpty(this.fieldFilterRules)||(n=this._fieldFilter(n,this.fieldFilterRules)),n=this._filter(n,e,i),n.length}},pager:function(e){var i=this,n=this.perPage,s=(i.currentPage-1)*n,o=s+n;void 0===i.origModels&&(i.origModels=i.models),i.models=i.origModels.slice(),""!==this.sortColumn&&(i.models=i._sort(i.models,this.sortColumn,this.sortDirection)),t.isEmpty(this.fieldFilterRules)||(i.models=i._fieldFilter(i.models,this.fieldFilterRules)),""!==this.filterExpression&&(i.models=i._filter(i.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&t.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(s=0,o=s+n,i.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),i.sortedAndFilteredModels=i.models.slice(),i.info(),i.reset(i.models.slice(s,o)),t.result(e,"success")},_sort:function(e,i,n){return e=e.sort(function(e,s){var o=e.get(i),r=s.get(i);if(t.isUndefined(o)||t.isUndefined(r)||null===o||null===r)return 0;if(o=o.toString().toLowerCase(),r=r.toString().toLowerCase(),"desc"===n)if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!r.match(/[^\-\d\.]/)&&r.match(/-?[\d\.]+/)){if(r-0>o-0)return 1;if(o-0>r-0)return-1}else{if(r>o)return 1;if(o>r)return-1}else if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!r.match(/[^\-\d\.]/)&&r.match(/-?[\d\.]+/)){if(r-0>o-0)return-1;if(o-0>r-0)return 1}else{if(r>o)return-1;if(o>r)return 1}if(e.cid&&s.cid){var a=e.cid,l=s.cid;if(l>a)return-1;if(a>l)return 1}return 0})},_fieldFilter:function(e,i){if(t.isEmpty(i))return e;var n=[];return t.each(e,function(e){var s=!0;t.each(i,function(i){if(!s)return!1;if(s=!1,"function"===i.type){var n=t.wrap(i.value,function(t){return t(e.get(i.field))});n()&&(s=!0)}else"required"===i.type?t.isEmpty(e.get(i.field).toString())||(s=!0):"min"===i.type?!t.isNaN(Number(e.get(i.field)))&&!t.isNaN(Number(i.value))&&Number(e.get(i.field))>=Number(i.value)&&(s=!0):"max"===i.type?!t.isNaN(Number(e.get(i.field)))&&!t.isNaN(Number(i.value))&&Number(e.get(i.field))<=Number(i.value)&&(s=!0):"range"===i.type?!t.isNaN(Number(e.get(i.field)))&&t.isObject(i.value)&&!t.isNaN(Number(i.value.min))&&!t.isNaN(Number(i.value.max))&&Number(e.get(i.field))>=Number(i.value.min)&&Number(e.get(i.field))<=Number(i.value.max)&&(s=!0):"minLength"===i.type?e.get(i.field).toString().length>=i.value&&(s=!0):"maxLength"===i.type?e.get(i.field).toString().length<=i.value&&(s=!0):"rangeLength"===i.type?t.isObject(i.value)&&!t.isNaN(Number(i.value.min))&&!t.isNaN(Number(i.value.max))&&e.get(i.field).toString().length>=i.value.min&&e.get(i.field).toString().length<=i.value.max&&(s=!0):"oneOf"===i.type?t.isArray(i.value)&&t.include(i.value,e.get(i.field))&&(s=!0):"equalTo"===i.type?i.value===e.get(i.field)&&(s=!0):"containsAllOf"===i.type?t.isArray(i.value)&&t.isArray(e.get(i.field))&&t.intersection(i.value,e.get(i.field)).length===i.value.length&&(s=!0):"pattern"===i.type?e.get(i.field).toString().match(i.value)&&(s=!0):s=!1}),s&&n.push(e)}),n},_filter:function(i,n,s){var o=this,r={};if(t.isString(n)?r[n]={cmp_method:"regexp"}:t.isArray(n)?t.each(n,function(e){r[e]={cmp_method:"regexp"}}):t.each(n,function(e,i){r[i]=t.defaults(e,{cmp_method:"regexp"})}),n=r,t.has(e.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin&&(s=e.Paginator.removeDiacritics(s)),""===s||!t.isString(s))return i;var a=t.map(s.match(/\w+/gi),function(e){return e.toLowerCase()}),l="("+t.uniq(a).join("|")+")",c=new RegExp(l,"igm"),u=[];return t.each(i,function(i){var r=[];t.each(n,function(n,l){var u=i.get(l);if(u){var d=[];if(u=t.has(e.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin?e.Paginator.removeDiacritics(u.toString()):u.toString(),"levenshtein"===n.cmp_method&&t.has(e.Paginator,"levenshtein")&&o.useLevenshteinPlugin){var h=e.Paginator.levenshtein(u,s);t.defaults(n,{max_distance:0}),h<=n.max_distance&&(d=t.uniq(a))}else d=u.match(c);d=t.map(d,function(e){return e.toString().toLowerCase()}),t.each(d,function(e){r.push(e)})}}),r=t.uniq(t.without(r,"")),t.isEmpty(t.difference(a,r))&&u.push(i)}),u},info:function(){var e=this,t={},i=e.sortedAndFilteredModels?e.sortedAndFilteredModels.length:e.length,n=Math.ceil(i/e.perPage);return t={totalUnfilteredRecords:e.origModels.length,totalRecords:i,currentPage:e.currentPage,perPage:this.perPage,totalPages:n,lastPage:n,previous:!1,next:!1,startRecord:0===i?0:(e.currentPage-1)*this.perPage+1,endRecord:Math.min(i,e.currentPage*this.perPage)},e.currentPage>1&&(t.previous=e.currentPage-1),e.currentPage<t.totalPages&&(t.next=e.currentPage+1),t.pageSet=e.setPagination(t),e.information=t,t},setPagination:function(e){var t=[],i=0,n=0,s=2*this.pagesInRange,o=Math.ceil(e.totalRecords/e.perPage);if(o>1)if(1+s>=o)for(i=1,n=o;n>=i;i++)t.push(i);else if(e.currentPage<=this.pagesInRange+1)for(i=1,n=2+s;n>i;i++)t.push(i);else if(o-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(i=e.currentPage-this.pagesInRange;i<=e.currentPage+this.pagesInRange;i++)t.push(i);else for(i=o-s;o>=i;i++)t.push(i);return t},bootstrap:function(e){return t.extend(this,e),this.goTo(1),this.info(),this}}),s.clientPager.prototype.prevPage=s.clientPager.prototype.previousPage;var o=function(){var e=new i.Deferred;return e.reject(),e.promise()};return s.requestPager=e.Collection.extend({sync:function(s,o,r){var a=this;a.setDefaults();var l={};t.each(t.result(a,"server_api"),function(e,i){t.isFunction(e)&&(e=t.bind(e,a),e=e()),l[i]=e});var c=t.clone(a.paginator_core);t.each(c,function(e,i){t.isFunction(e)&&(e=t.bind(e,a),e=e()),c[i]=e}),c=t.defaults(c,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),r.data?r.data=decodeURIComponent(i.param(t.extend(l,r.data))):r.data=decodeURIComponent(i.param(l)),c=t.extend(c,{data:decodeURIComponent(i.param(l)),processData:!1,url:t.result(c,"url")},r);var u=!(0===n[0]&&9===n[1]&&10===n[2]),d=0===n[0],h=c.success;c.success=function(e,t,i){h&&(u?h(e,t,i):h(o,e,c)),d&&o&&o.trigger&&o.trigger("sync",o,e,c)};var p=c.error;c.error=function(e){p&&p(e),d&&o&&o.trigger&&o.trigger("error",o,e,c)};var f=c.xhr=e.ajax(c);return o&&o.trigger&&o.trigger("request",o,f,c),f},setDefaults:function(){var e=this;t.defaults(e.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),t.each(e.paginator_ui,function(i,n){t.isUndefined(e[n])&&(e[n]=e.paginator_ui[n])})},requestNextPage:function(e){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(e)):o()},requestPreviousPage:function(e){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(e)):o()},updateOrder:function(e,t){return void 0!==e?(this.sortField=e,this.pager(t)):o()},goTo:function(e,t){return void 0!==e?(this.currentPage=parseInt(e,10),this.pager(t)):o()},howManyPer:function(e,t){return void 0!==e?(this.currentPage=this.firstPage,this.perPage=e,this.pager(t)):o()},info:function(){var e={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(e.previous=this.currentPage-1),this.currentPage<e.totalPages&&(e.next=this.currentPage+1),e.hasNext=e.next,e.hasPrevious=e.next,e.pageSet=this.setPagination(e),this.information=e,e},setPagination:function(e){var t=[],i=0,n=0,s=2*this.pagesInRange,o=Math.ceil(e.totalRecords/e.perPage);if(o>1)if(1+s>=o)for(i=1,n=o;n>=i;i++)t.push(i);else if(e.currentPage<=this.pagesInRange+1)for(i=1,n=2+s;n>i;i++)t.push(i);else if(o-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(i=e.currentPage-this.pagesInRange;i<=e.currentPage+this.pagesInRange;i++)t.push(i);else for(i=o-s;o>=i;i++)t.push(i);return t},pager:function(e){return t.isObject(e)||(e={}),this.fetch(e)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(e){return t.extend(this,e),this.setDefaults(),this.info(),this}}),s.requestPager.prototype.nextPage=s.requestPager.prototype.requestNextPage,s.requestPager.prototype.prevPage=s.requestPager.prototype.requestPreviousPage,s}(Backbone,_,jQuery),/*
  backbone.paginator 2.0.0
  http://github.com/backbone-paginator/backbone.paginator

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
function(e){if("object"==typeof exports&&"function"==typeof require)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){"use strict";function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function n(e){for(var t,i,n,s,o={},r=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var u=a[l];t=u.split("="),i=t[0],n=t[1]||!0,i=r(i),n=r(n),s=o[i],f(s)?s.push(n):s?o[i]=[s,n]:o[i]=n}return o}function s(e,t,i){var n=e._events[t];if(n&&n.length){var s=n[n.length-1],o=s.callback;s.callback=function(){try{o.apply(this,arguments),i()}catch(e){throw e}finally{s.callback=o}}}else i()}var o=e.extend,r=e.omit,a=e.clone,l=e.each,c=e.pick,u=e.contains,d=e.isEmpty,h=e.pairs,p=e.invert,f=e.isArray,m=e.isFunction,g=e.isObject,v=e.keys,_=e.isUndefined,y=Math.ceil,b=Math.floor,w=Math.max,x=t.Collection.prototype,k=/[\s'"]/g,S=/[<>\s'"]/g,C=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){x.constructor.apply(this,arguments),t=t||{};var i=this.mode=t.mode||this.mode||T.mode,n=o({},T.queryParams,this.queryParams,t.queryParams||{});n.directions=o({},T.queryParams.directions,this.queryParams.directions,n.directions||{}),this.queryParams=n;var s=this.state=o({},T.state,this.state,t.state||{});s.currentPage=null==s.currentPage?s.firstPage:s.currentPage,f(e)||(e=e?[e]:[]),e=e.slice(),"server"==i||null!=s.totalRecords||d(e)||(s.totalRecords=e.length),this.switchMode(i,o({fetch:!1,resetState:!1,models:e},t));var r=t.comparator;if(s.sortKey&&!r&&this.setSorting(s.sortKey,s.order,t),"server"!=i){var l=this.fullCollection;r&&t.full&&(this.comparator=null,l.comparator=r),t.full&&l.sort(),e&&!d(e)&&(this.reset(e,o({silent:!0},t)),this.getPage(s.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(e,i){var n,s,o,r=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,s=r.length;s>n;n++)o=r[n],_(a[o])||(l[o]=a[o]);var c=new(t.Collection.extend(l))(e,i);for(n=0,s=r.length;s>n;n++)o=r[n],this[o]!==a[o]&&(c[o]=this[o]);return c},_makeCollectionEventHandler:function(e,t){return function(i,n,r,c){var u=e._handlers;l(v(u),function(i){var n=u[i];e.off(i,n),t.off(i,n)});var d=a(e.state),h=d.firstPage,p=0===h?d.currentPage:d.currentPage-1,f=d.pageSize,m=p*f,g=m+f;if("add"==i){var b,w,x,k,c=c||{};if(r==t)w=t.indexOf(n),w>=m&&g>w&&(k=e,b=x=w-m);else{b=e.indexOf(n),w=m+b,k=t;var x=_(c.at)?w:c.at+m}if(c.onRemove||(++d.totalRecords,delete c.onRemove),e.state=e._checkState(d),k){k.add(n,o({},c||{},{at:x}));var S=b>=f?n:!_(c.at)&&g>x&&e.length>f?e.at(f):null;S&&s(r,i,function(){e.remove(S,{onAdd:!0})})}}if("remove"==i)if(c.onAdd)delete c.onAdd;else{if(--d.totalRecords){var C=d.totalPages=y(d.totalRecords/f);d.lastPage=0===h?C-1:C||h,d.currentPage>C&&(d.currentPage=d.lastPage)}else d.totalRecords=null,d.totalPages=null;e.state=e._checkState(d);var T,M=c.index;r==e?((T=t.at(g))?s(e,i,function(){e.push(T,{onRemove:!0})}):!e.length&&d.totalRecords&&e.reset(t.models.slice(m-f,g-f),o({},c,{parse:!1})),t.remove(n)):M>=m&&g>M&&((T=t.at(g-1))&&s(e,i,function(){e.push(T,{onRemove:!0})}),e.remove(n),!e.length&&d.totalRecords&&e.reset(t.models.slice(m-f,g-f),o({},c,{parse:!1})))}if("reset"==i)if(c=r,r=n,r==e&&null==c.from&&null==c.to){var D=t.models.slice(0,m),P=t.models.slice(m+e.models.length);t.reset(D.concat(e.models).concat(P),c)}else r==t&&((d.totalRecords=t.models.length)||(d.totalRecords=null,d.totalPages=null),"client"==e.mode&&(d.lastPage=d.currentPage=d.firstPage),e.state=e._checkState(d),e.reset(t.models.slice(m,g),o({},c,{parse:!1})));"sort"==i&&(c=r,r=n,r===t&&e.reset(t.models.slice(m,g),o({},c,{parse:!1}))),l(v(u),function(i){var n=u[i];l([e,t],function(e){e.on(i,n);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,s=e.totalRecords,o=e.pageSize,r=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=s&&null!=o&&null!=r&&null!=a&&("infinite"==t?n:!0)){if(s=i(s,"totalRecords"),o=i(o,"pageSize"),r=i(r,"currentPage"),a=i(a,"firstPage"),1>o)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=y(s/o),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?w(0,l-1):l||a,"infinite"==t){if(!n[r+""])throw new RangeError("No link found for page "+r)}else if(a>r||l>0&&(a?r>l:r>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?"<":"<=")+" totalPages if "+a+"-based. Got "+r+".")}return e},setPageSize:function(e,t){e=i(e,"pageSize"),t=t||{first:!1};var n=this.state,s=y(n.totalRecords/e),a=s?w(n.firstPage,b(s*n.currentPage/n.totalPages)):n.firstPage;return n=this.state=this._checkState(o({},n,{pageSize:e,currentPage:t.first?n.firstPage:a,totalPages:s})),this.getPage(n.currentPage,r(t,["first"]))},switchMode:function(t,i){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var n=this.state=i.resetState?a(this._initState):this._checkState(o({},this.state));this.mode=t;var s,c=this,d=this.fullCollection,h=this._handlers=this._handlers||{};if("server"==t||d)"server"==t&&d&&(l(v(h),function(e){s=h[e],c.off(e,s),d.off(e,s)}),delete this._handlers,this._fullComparator=d.comparator,delete this.fullCollection);else{d=this._makeFullCollection(i.models||[],i),d.pageableCollection=this,this.fullCollection=d;var p=this._makeCollectionEventHandler(this,d);l(["add","remove","reset","sort"],function(t){h[t]=s=e.bind(p,{},t),c.on(t,s),d.on(t,s)}),d.comparator=this._fullComparator}if("infinite"==t)for(var f=this.links={},m=n.firstPage,g=y(n.totalRecords/n.pageSize),_=0===m?w(0,g-1):g||m,b=n.firstPage;_>=b;b++)f[b]=this.url;else this.links&&delete this.links;return i.fetch?this.fetch(r(i,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,s=this.fullCollection;t=t||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,u=a.lastPage,h=a.pageSize,p=e;switch(e){case"first":p=l;break;case"prev":p=c-1;break;case"next":p=c+1;break;case"last":p=u;break;default:p=i(e,"index")}this.state=this._checkState(o({},a,{currentPage:p})),t.from=c,t.to=p;var f=(0===l?p:p-1)*h,m=s&&s.length?s.models.slice(f,f+h):[];return"client"!=n&&("infinite"!=n||d(m))||t.fetch?("infinite"==n&&(t.url=this.links[p]),this.fetch(r(t,"fetch"))):(this.reset(m,r(t,"fetch")),this)},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e);var n=b(e/this.state.pageSize);return 0!==this.state.firstPage&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,i,n){var s=this;if("infinite"==s.mode){var r=n.success,a=s.state.currentPage;n.success=function(e,t,i){var l=s.links,c=s.parseLinks(e,o({xhr:i},n));c.first&&(l[s.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),r&&r(e,t,i)}}return(x.sync||t.sync).call(s,e,i,n)},parseLinks:function(e,t){var i={},n=t.xhr.getResponseHeader("Link");if(n){var s=["first","prev","next"];l(n.split(","),function(e){var t=e.split(";"),n=t[0].replace(S,""),o=t.slice(1);l(o,function(e){var t=e.split("="),o=t[0].replace(k,""),r=t[1].replace(k,"");"rel"==o&&u(s,r)&&(i[r]=n)})})}return i},parse:function(e,t){var i=this.parseState(e,a(this.queryParams),a(this.state),t);return i&&(this.state=this._checkState(o({},this.state,i))),this.parseRecords(e,t)},parseState:function(t,i,n,s){if(t&&2===t.length&&g(t[0])&&f(t[1])){var o=a(n),c=t[0];return l(h(r(i,"directions")),function(t){var i=t[0],n=t[1],s=c[n];_(s)||e.isNull(s)||(o[i]=c[n])}),c.order&&(o.order=1*p(i.directions)[c.order]),o}},parseRecords:function(e,t){return e&&2===e.length&&g(e[0])&&f(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),i=this.mode;"infinite"!=i||e.url||(e.url=this.links[t.currentPage]);var s=e.data||{},l=e.url||this.url||"";m(l)&&(l=l.call(this));var u=l.indexOf("?");-1!=u&&(o(s,n(l.slice(u+1))),l=l.slice(0,u)),e.url=l,e.data=s;var d,p,f,g,y="client"==this.mode?c(this.queryParams,"sortKey","order"):r(c(this.queryParams,v(T.queryParams)),"directions"),b=h(y),w=a(this);for(d=0;d<b.length;d++)p=b[d],f=p[0],g=p[1],g=m(g)?g.call(w):g,null!=t[f]&&null!=g&&(s[g]=t[f]);if(t.sortKey&&t.order){var k=m(y.order)?y.order.call(w):y.order;s[k]=this.queryParams.directions[t.order+""]}else t.sortKey||delete s[y.order];var S=h(r(this.queryParams,v(T.queryParams)));for(d=0;d<S.length;d++)p=S[d],g=p[1],g=m(g)?g.call(w):g,null!=g&&(s[p[0]]=g);if("server"!=i){var C=this,M=this.fullCollection,D=e.success;return e.success=function(t,n,s){s=s||{},_(e.silent)?delete s.silent:s.silent=e.silent;var r=t.models;"client"==i?M.reset(r,s):(M.add(r,o({at:M.length},o(s,{parse:!1}))),C.trigger("reset",C,s)),D&&D(t,n,s)},x.fetch.call(this,o({},e,{silent:!0}))}return x.fetch.call(this,e)},_makeComparator:function(e,t,i){var n=this.state;return e=e||n.sortKey,t=t||n.order,e&&t?(i||(i=function(e,t){return e.get(t)}),function(n,s){var o,r=i(n,e),a=i(s,e);return 1===t&&(o=r,r=a,a=o),r===a?0:a>r?-1:1}):void 0},setSorting:function(e,t,i){var n=this.state;n.sortKey=e,n.order=t=t||n.order;var s=this.fullCollection,r=!1,a=!1;e||(r=a=!0);var l=this.mode;i=o({side:"client"==l?l:"server",full:!0},i);var c=this._makeComparator(e,t,i.sortValue),u=i.full,d=i.side;return"client"==d?u?(s&&(s.comparator=c),r=!0):(this.comparator=c,a=!0):"server"!=d||u||(this.comparator=c),r&&(this.comparator=null),a&&s&&(s.comparator=null),this}}),T=C.prototype;return C}),/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
function(e,t){function i(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function n(e){return d?d(e):"[object Array]"===h.call(e)}function s(e){return e&&"[object Object]"===h.call(e)}function o(e,t){var i;e=e||{},t=t||{};for(i in t)t.hasOwnProperty(i)&&null==e[i]&&(e[i]=t[i]);return e}function r(e,t,i){var n,s,o=[];if(!e)return o;if(u&&e.map===u)return e.map(t,i);for(n=0,s=e.length;s>n;n++)o[n]=t.call(i,e[n],n,e);return o}function a(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function l(e){var t=c.settings.currency.format;return"function"==typeof e&&(e=e()),i(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:i(t)?c.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var c={};c.version="0.3.2",c.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var u=Array.prototype.map,d=Array.isArray,h=Object.prototype.toString,p=c.unformat=c.parse=function(e,t){if(n(e))return r(e,function(e){return p(e,t)});if(e=e||0,"number"==typeof e)return e;t=t||c.settings.number.decimal;var i=new RegExp("[^0-9-"+t+"]",["g"]),s=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(i,"").replace(t,"."));return isNaN(s)?0:s},f=c.toFixed=function(e,t){t=a(t,c.settings.number.precision);var i=Math.pow(10,t);return(Math.round(c.unformat(e)*i)/i).toFixed(t)},m=c.formatNumber=function(e,t,i,l){if(n(e))return r(e,function(e){return m(e,t,i,l)});e=p(e);var u=o(s(t)?t:{precision:t,thousand:i,decimal:l},c.settings.number),d=a(u.precision),h=0>e?"-":"",g=parseInt(f(Math.abs(e||0),d),10)+"",v=g.length>3?g.length%3:0;return h+(v?g.substr(0,v)+u.thousand:"")+g.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+u.thousand)+(d?u.decimal+f(Math.abs(e),d).split(".")[1]:"")},g=c.formatMoney=function(e,t,i,u,d,h){if(n(e))return r(e,function(e){return g(e,t,i,u,d,h)});e=p(e);var f=o(s(t)?t:{symbol:t,precision:i,thousand:u,decimal:d,format:h},c.settings.currency),v=l(f.format),_=e>0?v.pos:0>e?v.neg:v.zero;return _.replace("%s",f.symbol).replace("%v",m(Math.abs(e),a(f.precision),f.thousand,f.decimal))};c.formatColumn=function(e,t,u,d,h,f){if(!e)return[];var g=o(s(t)?t:{symbol:t,precision:u,thousand:d,decimal:h,format:f},c.settings.currency),v=l(g.format),_=v.pos.indexOf("%s")<v.pos.indexOf("%v")?!0:!1,y=0,b=r(e,function(e,t){if(n(e))return c.formatColumn(e,g);e=p(e);var i=e>0?v.pos:0>e?v.neg:v.zero,s=i.replace("%s",g.symbol).replace("%v",m(Math.abs(e),a(g.precision),g.thousand,g.decimal));return s.length>y&&(y=s.length),s});return r(b,function(e,t){return i(e)&&e.length<y?_?e.replace(g.symbol,g.symbol+new Array(y-e.length+1).join(" ")):new Array(y-e.length+1).join(" ")+e:e})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.accounting=c):"function"==typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(i){return function(){return e.accounting=i,c.noConflict=t,c}}(e.accounting),e.accounting=c)}(this),/*!
 * money.js / fx() v0.2
 * Copyright 2014 Open Exchange Rates
 *
 * JavaScript library for realtime currency conversion and exchange rate calculation.
 *
 * Freely distributable under the MIT license.
 * Portions of money.js are inspired by or borrowed from underscore.js
 *
 * For details, examples and documentation:
 * http://openexchangerates.github.io/money.js/
 */
function(e,t){var i=function(e){return new r(e)};i.version="0.2";var n=e.fxSetup||{rates:{},base:""};i.rates=n.rates,i.base=n.base,i.settings={from:n.from||i.base,to:n.to||i.base};var s=i.convert=function(e,t){if("object"==typeof e&&e.length){for(var n=0;n<e.length;n++)e[n]=s(e[n],t);return e}return t=t||{},t.from||(t.from=i.settings.from),t.to||(t.to=i.settings.to),e*o(t.to,t.from)},o=function(e,t){var n=i.rates;if(n[i.base]=1,!n[e]||!n[t])throw"fx error";return t===i.base?n[e]:e===i.base?1/n[t]:n[e]*(1/n[t])},r=function(e){"string"==typeof e?(this._v=parseFloat(e.replace(/[^0-9-.]/g,"")),this._fx=e.replace(/([^A-Za-z])/g,"")):this._v=e},a=i.prototype=r.prototype;a.convert=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this._v),s.apply(i,e)},a.from=function(e){var t=i(s(this._v,{from:e,to:i.base}));return t._fx=i.base,t},a.to=function(e){return s(this._v,{from:this._fx?this._fx:i.settings.from,to:e})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.fx=i):"function"==typeof define&&define.amd?define([],function(){return i}):(i.noConflict=function(n){return function(){return e.fx=n,i.noConflict=t,i}}(e.fx),e.fx=i)}(this),function(e,t){var i={EUR_TO_USD:"1.1775",EUR_TO_JPY:"129.03",EUR_TO_BGN:"1.9558",EUR_TO_CZK:"25.642",EUR_TO_DKK:"7.4381",EUR_TO_GBP:"0.86545",EUR_TO_HUF:"359.45",EUR_TO_PLN:"4.5954",EUR_TO_RON:"4.9255",EUR_TO_SEK:"10.2535",EUR_TO_CHF:"1.0838",EUR_TO_ISK:"146.9",EUR_TO_NOK:"10.617",EUR_TO_HRK:"7.521",EUR_TO_RUB:"87.6775",EUR_TO_TRY:"10.0664",EUR_TO_AUD:"1.6082",EUR_TO_BRL:"6.1633",EUR_TO_CAD:"1.5023",EUR_TO_CNY:"7.6305",EUR_TO_HKD:"9.1529",EUR_TO_IDR:"17143.51",EUR_TO_ILS:"3.881",EUR_TO_INR:"87.921",EUR_TO_KRW:"1352.39",EUR_TO_MXN:"23.599",EUR_TO_MYR:"4.9743",EUR_TO_NZD:"1.7049",EUR_TO_PHP:"60.005",EUR_TO_SGD:"1.6106",EUR_TO_THB:"38.634",EUR_TO_ZAR:"17.1349",EUR_TO_EUR:1},n="EUR",s=t.keys(i).map(function(e){return e.replace(n+"_TO_","")}),o=t.object(s,t.values(i));e.base=n,e.rates=o}(window.fx,_),function(e){I18n.fallbacks=!0,I18n.defaultLocale=Gigmit.default_locale,I18n.locale=Gigmit.current_locale,I18n.defaultCurrency="eur",I18n.toHumanNumber=function(e){for(var t,i,n=[null,"K","M","B","T"],s=1e3,o=e,r=0;o>=s&&4>r;)o/=s,r+=1;return 0===r?i=0:(t=n[r],i=o-Math.floor(o)===0?0:1),[o.toFixed(i),t||""].join("")},Gigmit.Constants={apis:{gigmit:{key:"iSSEikG3RAOudAesEBSA6sJkyRVYa78S1CoEKqfV"},soundcloud:{client_id:"f786274bad6d922f5f6dd68bc2e7c3ad"},youtube:{api_key:"AIzaSyCXeiGJtYgrLxkN3V66Vv5s1ldZk27Dbu8"},youtubeVideoImport:{clientId:"346835254196-7brjrla99usertoht3in1qudkrbd1hfu.apps.googleusercontent.com"},facebook:{appId:"409140249152943",defaultScopes:"email,manage_pages,read_insights",defaultFields:"email,first_name,last_name,locale,currency"}},accommodation_standards:["friends","hostel","pension","three_star_hotel","four_star_hotel","five_star_hotel"],artistSalaryClasses:[200,500,1e3,2e3,5e3,5001],ArtistsSearch:{fee_class_min:"0",fee_class_max:"5",fee_class_initial:1,fee_classes:[200,500,1e3,2e3,5e3,5001]},currencies:{"default":"eur",regions:{EUR:["de","en"],GBP:["en-GB"],USD:["en-US"]},supported:["EUR","GBP","USD"]},description_max_length:500,distanceOptions:[50,100,200,500],stage_types:["live_stage","dj_booth"],value_added_tax:.19,commission_percentage:8,profileImagePlaceholderImageURL:"https://www.gigmit.com/assets/shared/gigmit_Icon_Invert_White_800px_WEB-8b1ade6ae07b50c73a275136f6efec92.jpg",profileImageUploadPlacehoderImageURL:"https://www.gigmit.com/assets/microsite/title-image-default-processing-save-580x326-97712ed92e8ea137eb4116c3cbf32f05.gif",gigTypes:["concert","party","festival","fair","corporate_event","contest","misc","support","private","wedding"],nanoscrollerDefaultOptions:{contentClass:"scroll-content",paneClass:"scroll-pane",sliderClass:"scroll-slider",preventPageScrolling:!0},validations:{files:{images:{maxFileSize:10485760,acceptedFileTypes:/(\.|\/)(jpg|jpeg|png|webp)$/i},riders:{maxFileSize:20971520,acceptedFileTypes:/(\.|\/)(jpg|jpeg|png|webp|pdf|xlsx|xls|ods|doc|docx|rtf|odt|txt|md|markdown)$/i},pressItems:{maxFileSize:52428800,acceptedFileTypes:/(\.|\/)(jpg|jpeg|png|webp|pdf|xlsx|xls|ods|doc|docx|rtf|odt|txt|md|markdown|tif|tiff|eps|ai|svg)$/i}}}},Gigmit.Formats={de:{date:{datepicker:"dd.mm.yyyy",momentjs:"DD.MM.YYYY"},time:{datepicker:"hh:mm",momentjs:"HH:mm"},datetime:{momentjs:"DD.MM.YYYY, HH:mm","default":"%d. %b. %Y, %H:%M %Z"},monthOnly:{momentjs:"MM/YYYY"}},en:{date:{datepicker:"yyyy-mm-dd",momentjs:"YYYY-MM-DD"},time:{datepicker:"hh:mm",momentjs:"HH:mm"},datetime:{momentjs:"YYYY-MM-DD, HH:mm","default":"%d. %b. %Y, %H:%M %Z"},monthOnly:{momentjs:"MM/YYYY"}}},Gigmit.Formats=_.extend(Gigmit.Formats[Gigmit.current_locale],{iso8601:"YYYY-MM-DD[T]HH:mm:ss[Z]",opportunitiesSearch:{date:{full:"DD. MMM. YYYY",day_only:"DD.",day_and_month_only:"DD. MMM."}}}),Gigmit=_.extend(Gigmit,Backbone.Events),void 0!==e.moment&&(moment.defaultFormat=Gigmit.Formats.datetime.momentjs)}(window),/*! URI.js v1.11.2 http://medialize.github.com/URI.js/ */
function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.IPv6=t(e)}(this,function(e){var t=e&&e.IPv6;return{best:function(e){e=e.toLowerCase().split(":");var t=e.length,i=8;""===e[0]&&""===e[1]&&""===e[2]?(e.shift(),e.shift()):""===e[0]&&""===e[1]?e.shift():""===e[t-1]&&""===e[t-2]&&e.pop(),t=e.length,-1!==e[t-1].indexOf(".")&&(i=7);var n;for(n=0;t>n&&""!==e[n];n++);if(i>n)for(e.splice(n,1,"0000");e.length<i;)e.splice(n,0,"0000");for(n=0;i>n;n++){for(var t=e[n].split(""),s=0;3>s&&("0"===t[0]&&1<t.length);s++)t.splice(0,1);e[n]=t.join("")}var t=-1,o=s=0,r=-1,a=!1;for(n=0;i>n;n++)a?"0"===e[n]?o+=1:(a=!1,o>s&&(t=r,s=o)):"0"==e[n]&&(a=!0,r=n,o=1);for(o>s&&(t=r,s=o),s>1&&e.splice(t,s,""),t=e.length,i="",""===e[0]&&(beststr=":"),n=0;t>n&&(i+=e[n],n!==t-1);n++)i+=":";return""===e[t-1]&&(i+=":"),i},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}),function(e){function t(e){throw RangeError(M[e])}function i(e,t){for(var i=e.length;i--;)e[i]=t(e[i]);return e}function n(e,t){return i(e.split(T),t).join(".")}function s(e){for(var t,i,n=[],s=0,o=e.length;o>s;)t=e.charCodeAt(s++),t>=55296&&56319>=t&&o>s?(i=e.charCodeAt(s++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),s--)):n.push(t);return n}function o(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=E(e>>>10&1023|55296),e=56320|1023&e),t+=E(e)}).join("")}function r(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function a(e,t,i){var n=0;for(e=i?P(e/b):e>>1,e+=P(e/t);e>D*_>>1;n+=g)e=P(e/D);return P(n+(D+1)*e/(e+y))}function l(e){var i,n,s,r,l,c,u=[],d=e.length,h=0,p=x,f=w;for(n=e.lastIndexOf(k),0>n&&(n=0),s=0;n>s;++s)128<=e.charCodeAt(s)&&t("not-basic"),u.push(e.charCodeAt(s));for(n=n>0?n+1:0;d>n;){for(s=h,i=1,r=g;n>=d&&t("invalid-input"),l=e.charCodeAt(n++),l=10>l-48?l-22:26>l-65?l-65:26>l-97?l-97:g,(l>=g||l>P((m-h)/i))&&t("overflow"),h+=l*i,c=f>=r?v:r>=f+_?_:r-f,!(c>l);r+=g)l=g-c,i>P(m/l)&&t("overflow"),i*=l;i=u.length+1,f=a(h-s,i,0==s),P(h/i)>m-p&&t("overflow"),p+=P(h/i),h%=i,u.splice(h++,0,p)}return o(u)}function c(e){var i,n,o,l,c,u,d,h,p,f,y,b,S=[];for(e=s(e),f=e.length,i=x,n=0,c=w,u=0;f>u;++u)p=e[u],128>p&&S.push(E(p));for((o=l=S.length)&&S.push(k);f>o;){for(d=m,u=0;f>u;++u)p=e[u],p>=i&&d>p&&(d=p);for(y=o+1,d-i>P((m-n)/y)&&t("overflow"),n+=(d-i)*y,i=d,u=0;f>u;++u)if(p=e[u],i>p&&++n>m&&t("overflow"),p==i){for(h=n,d=g;p=c>=d?v:d>=c+_?_:d-c,!(p>h);d+=g)b=h-p,h=g-p,S.push(E(r(p+b%h,0))),h=P(b/h);S.push(E(r(h,0))),c=a(n,y,o==l),n=0,++o}++n,++i}return S.join("")}var u="object"==typeof exports&&exports,d="object"==typeof module&&module&&module.exports==u&&module,h="object"==typeof global&&global;(h.global===h||h.window===h)&&(e=h);var p,f,m=2147483647,g=36,v=1,_=26,y=38,b=700,w=72,x=128,k="-",S=/^xn--/,C=/[^ -~]/,T=/\x2E|\u3002|\uFF0E|\uFF61/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=g-v,P=Math.floor,E=String.fromCharCode;if(p={version:"1.2.3",ucs2:{decode:s,encode:o},decode:l,encode:c,toASCII:function(e){return n(e,function(e){return C.test(e)?"xn--"+c(e):e})},toUnicode:function(e){return n(e,function(e){return S.test(e)?l(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return p});else if(u&&!u.nodeType)if(d)d.exports=p;else for(f in p)p.hasOwnProperty(f)&&(u[f]=p[f]);else e.punycode=p}(this),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SecondLevelDomains=t(e)}(this,function(e){var t=e&&e.SecondLevelDomains,i=Object.prototype.hasOwnProperty,n={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(e){return!!e.match(n.has_expression)},is:function(e){return!!e.match(n.is_expression)},get:function(e){return(e=e.match(n.has_expression))&&e[1]||null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this},init:function(){var e,t="";for(e in n.list)i.call(n.list,e)&&(t+="|("+("("+n.list[e]+")."+e)+")");n.has_expression=RegExp("\\.("+t.substr(1)+")$","i"),n.is_expression=RegExp("^("+t.substr(1)+")$","i")}};return n.init(),n}),function(e,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,i,n){function s(e,t){return this instanceof s?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new s(e,t)}function o(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function r(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function a(e){return"Array"===r(e)}function l(e,t){var i,n;if(a(t)){for(i=0,n=t.length;n>i;i++)if(!l(e,t[i]))return!1;return!0}var s=r(t);for(i=0,n=e.length;n>i;i++)if("RegExp"===s){if("string"==typeof e[i]&&e[i].match(t))return!0}else if(e[i]===t)return!0;return!1}function c(e,t){if(!a(e)||!a(t)||e.length!==t.length)return!1;e.sort(),t.sort();for(var i=0,n=e.length;n>i;i++)if(e[i]!==t[i])return!1;return!0}function u(e){return escape(e)}function d(e){return encodeURIComponent(e).replace(/[!'()*]/g,u).replace(/\*/g,"%2A")}var h=n&&n.URI,p=s.prototype,f=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,s.idn_expression=/[^a-z0-9\.-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},s.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:s.domAttributes[t]}},s.encode=d,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=d,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},s.encodeQuery=function(e,t){var i=s.encode(e+"");return t?i.replace(/%20/g,"+"):i},s.decodeQuery=function(e,t){e+="";try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(i){return e}},s.recodePath=function(e){e=(e+"").split("/");for(var t=0,i=e.length;i>t;t++)e[t]=s.encodePathSegment(s.decode(e[t]));return e.join("/")},s.decodePath=function(e){e=(e+"").split("/");for(var t=0,i=e.length;i>t;t++)e[t]=s.decodePathSegment(e[t]);return e.join("/")};var m,g={encode:"encode",decode:"decode"},v=function(e,t){return function(i){return s[t](i+"").replace(s.characters[e][t].expression,function(i){return s.characters[e][t].map[i]})}};for(m in g)s[m+"PathSegment"]=v("pathname",g[m]);s.encodeReserved=v("reserved","encode"),s.parse=function(e,t){var i;return t||(t={}),i=e.indexOf("#"),i>-1&&(t.fragment=e.substring(i+1)||null,e=e.substring(0,i)),i=e.indexOf("?"),i>-1&&(t.query=e.substring(i+1)||null,e=e.substring(0,i)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=s.parseAuthority(e,t)):(i=e.indexOf(":"),i>-1&&(t.protocol=e.substring(0,i)||null,t.protocol&&!t.protocol.match(s.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(i+3):"//"===e.substring(i+1,i+3)?(e=e.substring(i+3),e=s.parseAuthority(e,t)):(e=e.substring(i+1),t.urn=!0))),t.path=e,t},s.parseHost=function(e,t){var i,n=e.indexOf("/");return-1===n&&(n=e.length),"["===e.charAt(0)?(i=e.indexOf("]"),t.hostname=e.substring(1,i)||null,t.port=e.substring(i+2,n)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&"/"!==e.substring(n).charAt(0)&&(n++,e="/"+e),e.substring(n)||"/"},s.parseAuthority=function(e,t){return e=s.parseUserinfo(e,t),s.parseHost(e,t)},s.parseUserinfo=function(e,t){var i=e.indexOf("/"),n=i>-1?e.lastIndexOf("@",i):e.indexOf("@");return n>-1&&(-1===i||i>n)?(i=e.substring(0,n).split(":"),t.username=i[0]?s.decode(i[0]):null,i.shift(),t.password=i[0]?s.decode(i.join(":")):null,e=e.substring(n+1)):(t.username=null,t.password=null),e},s.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var i,n,o={},r=e.split("&"),a=r.length,l=0;a>l;l++)i=r[l].split("="),n=s.decodeQuery(i.shift(),t),i=i.length?s.decodeQuery(i.join("="),t):null,o[n]?("string"==typeof o[n]&&(o[n]=[o[n]]),o[n].push(i)):o[n]=i;return o},s.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=s.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},s.buildHost=function(e){var t="";return e.hostname?(s.ip6_expression.test(e.hostname)?t=e.port?t+("["+e.hostname+"]:"+e.port):t+e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)},s.buildUserinfo=function(e){var t="";return e.username&&(t+=s.encode(e.username),e.password&&(t+=":"+s.encode(e.password)),t+="@"),t},s.buildQuery=function(e,t,i){var n,o,r,l,c="";for(o in e)if(f.call(e,o)&&o)if(a(e[o]))for(n={},r=0,l=e[o].length;l>r;r++)void 0!==e[o][r]&&void 0===n[e[o][r]+""]&&(c+="&"+s.buildQueryParameter(o,e[o][r],i),!0!==t&&(n[e[o][r]+""]=!0));else void 0!==e[o]&&(c+="&"+s.buildQueryParameter(o,e[o],i));return c.substring(1)},s.buildQueryParameter=function(e,t,i){return s.encodeQuery(e,i)+(null!==t?"="+s.encodeQuery(t,i):"")},s.addQuery=function(e,t,i){if("object"==typeof t)for(var n in t)f.call(t,n)&&s.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===e[t]?e[t]=i:("string"==typeof e[t]&&(e[t]=[e[t]]),a(i)||(i=[i]),e[t]=e[t].concat(i))}},s.removeQuery=function(e,t,i){var n;if(a(t))for(i=0,n=t.length;n>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(n in t)f.call(t,n)&&s.removeQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==i){if(e[t]===i)e[t]=void 0;else if(a(e[t])){n=e[t];var o,r,l={};if(a(i))for(o=0,r=i.length;r>o;o++)l[i[o]]=!0;else l[i]=!0;for(o=0,r=n.length;r>o;o++)void 0!==l[n[o]]&&(n.splice(o,1),r--,o--);e[t]=n}}else e[t]=void 0}},s.hasQuery=function(e,t,i,n){if("object"==typeof t){for(var o in t)if(f.call(t,o)&&!s.hasQuery(e,o,t[o]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(r(i)){case"Undefined":return t in e;case"Boolean":return e=Boolean(a(e[t])?e[t].length:e[t]),i===e;case"Function":return!!i(e[t],t,e);case"Array":return a(e[t])?(n?l:c)(e[t],i):!1;case"RegExp":return a(e[t])?n?l(e[t],i):!1:Boolean(e[t]&&e[t].match(i));case"Number":i=String(i);case"String":return a(e[t])?n?l(e[t],i):!1:e[t]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.commonPath=function(e,t){var i,n=Math.min(e.length,t.length);for(i=0;n>i;i++)if(e.charAt(i)!==t.charAt(i)){i--;break}return 1>i?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(i)||"/"!==t.charAt(i))&&(i=e.substring(0,i).lastIndexOf("/")),e.substring(0,i+1))},s.withinString=function(e,t){return e.replace(s.find_uri_expression,t)},s.ensureValidHostname=function(t){if(t.match(s.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(s.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},s.noConflict=function(e){return e?(e={URI:this.noConflict()},URITemplate&&"function"==typeof URITemplate.noConflict&&(e.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(e.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(e.SecondLevelDomains=SecondLevelDomains.noConflict()),e):(n.URI===this&&(n.URI=h),this)},p.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new s(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},g={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},v=function(e){return function(t,i){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!i),this)}};for(m in g)p[m]=v(g[m]);g={query:"?",fragment:"#"},v=function(e,t){return function(i,n){return void 0===i?this._parts[e]||"":(null!==i&&(i+="",i.charAt(0)===t&&(i=i.substring(1))),this._parts[e]=i,this.build(!n),this)}};for(m in g)p[m]=v(m,g[m]);g={search:["?","query"],hash:["#","fragment"]},v=function(e,t){return function(i,n){var s=this[e](i,n);return"string"==typeof s&&s.length?t+s:s}};for(m in g)p[m]=v(g[m][1],g[m][0]);p.pathname=function(e,t){if(void 0===e||!0===e){var i=this._parts.path||(this._parts.hostname?"/":"");return e?s.decodePath(i):i}return this._parts.path=e?s.recodePath(e):"/",this.build(!t),this},p.path=p.pathname,p.href=function(e,t){var i;if(void 0===e)return this.toString();this._string="",this._parts=s._parts();var n=e instanceof s,o="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName&&(o=s.getDomAttribute(e),e=e[o]||"",o=!1),!n&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=s.parse(e,this._parts);else{if(!n&&!o)throw new TypeError("invalid input");for(i in n=n?e._parts:e)f.call(this._parts,i)&&(this._parts[i]=n[i])}return this.build(!t),this},p.is=function(e){var t=!1,n=!1,o=!1,r=!1,a=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,n=s.ip4_expression.test(this._parts.hostname),o=s.ip6_expression.test(this._parts.hostname),t=n||o,a=(r=!t)&&i&&i.has(this._parts.hostname),l=r&&s.idn_expression.test(this._parts.hostname),c=r&&s.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return r;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var _=p.protocol,y=p.port,b=p.hostname;p.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),e.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-]");return _.call(this,e,t)},p.scheme=p.protocol,p.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return y.call(this,e,t)},p.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var i={};s.parseHost(e,i),e=i.hostname}return b.call(this,e,t)},p.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?s.buildHost(this._parts):"":(s.parseHost(e,this._parts),this.build(!t),this)},p.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?s.buildAuthority(this._parts):"":(s.parseAuthority(e,this._parts),this.build(!t),this)},p.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var i=s.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==e[e.length-1]&&(e+="@"),s.parseUserinfo(e,this._parts),this.build(!t),this},p.resource=function(e,t){var i;return void 0===e?this.path()+this.search()+this.hash():(i=s.parse(e),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!t),this)},p.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}return i=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,i),i=RegExp("^"+o(i)),e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&s.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(i,e),this.build(!t),this},p.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);return i&&2>i.length?this._parts.hostname:(i=this._parts.hostname.length-this.tld(t).length-1,i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||"")}if(!e)throw new TypeError("cannot set domain empty");return s.ensureValidHostname(e),!this._parts.hostname||this.is("IP")?this._parts.hostname=e:(i=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)),this.build(!t),this},p.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(n+1);return!0!==t&&i&&i.list[n.toLowerCase()]?i.get(this._parts.hostname)||n:n}if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");n=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");n=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,e)}return this.build(!t),this},p.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return e?s.decodePath(i):i}return i=this._parts.path.length-this.filename().length,i=this._parts.path.substring(0,i),i=RegExp("^"+o(i)),this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=s.recodePath(e),this._parts.path=this._parts.path.replace(i,e),this.build(!t),this},p.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var i=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(i+1);return e?s.decodePathSegment(i):i}i=!1,"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var n=RegExp(o(this.filename())+"$");return e=s.recodePath(e),this._parts.path=this._parts.path.replace(n,e),i?this.normalizePath(t):this.build(!t),this},p.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),n=i.lastIndexOf(".");return-1===n?"":(i=i.substring(n+1),i=/^[a-z0-9%]+$/i.test(i)?i:"",e?s.decodePathSegment(i):i)}if("."===e.charAt(0)&&(e=e.substring(1)),i=this.suffix())n=e?RegExp(o(i)+"$"):RegExp(o("."+i)+"$");else{if(!e)return this;this._parts.path+="."+s.recodePath(e)}return n&&(e=s.recodePath(e),this._parts.path=this._parts.path.replace(n,e)),this.build(!t),this},p.segment=function(e,t,i){var n=this._parts.urn?":":"/",s=this.path(),o="/"===s.substring(0,1),s=s.split(n);if(void 0!==e&&"number"!=typeof e&&(i=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw Error("Bad segment '"+e+"', must be 0-based integer");if(o&&s.shift(),0>e&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(a(t)){s=[],e=0;for(var r=t.length;r>e;e++)(t[e].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(t[e]))}else(t||"string"==typeof t)&&(""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t||"string"==typeof t&&t.length?s[e]=t:s.splice(e,1);return o&&s.unshift(""),this.path(s.join(n),i)},p.segmentCoded=function(e,t,i){var n,o;if("number"!=typeof e&&(i=t,t=e,e=void 0),void 0===t){if(e=this.segment(e,t,i),a(e))for(n=0,o=e.length;o>n;n++)e[n]=s.decode(e[n]);else e=void 0!==e?s.decode(e):void 0;return e}if(a(t))for(n=0,o=t.length;o>n;n++)t[n]=s.decode(t[n]);else t="string"==typeof t?s.encode(t):t;return this.segment(e,t,i)};var w=p.query;return p.query=function(e,t){if(!0===e)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var i=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,i);return this._parts.query=s.buildQuery(n||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):w.call(this,e,t)},p.setQuery=function(e,t,i){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var o in e)f.call(e,o)&&(n[o]=e[o]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");n[e]=void 0!==t?t:null}return this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.addQuery=function(e,t,i){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(n,e,void 0===t?null:t),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.removeQuery=function(e,t,i){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(n,e,t),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(i=t),this.build(!i),this},p.hasQuery=function(e,t,i){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(n,e,t,i)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},p.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},p.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},p.normalizePath=function(e){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var t,i,n,o=this._parts.path;for("/"!==o.charAt(0)&&(t=!0,o="/"+o),o=o.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");i=o.indexOf("/../"),-1!==i;){if(0===i){o=o.substring(3);break}n=o.substring(0,i).lastIndexOf("/"),-1===n&&(n=i),o=o.substring(0,n)+o.substring(i+3)}return t&&this.is("relative")&&(o=o.substring(1)),
o=s.recodePath(o),this._parts.path=o,this.build(!e),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},p.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var e=s.encode,t=s.decode;return s.encode=escape,s.decode=decodeURIComponent,this.normalize(),s.encode=e,s.decode=t,this},p.unicode=function(){var e=s.encode,t=s.decode;return s.encode=d,s.decode=unescape,this.normalize(),s.encode=e,s.decode=t,this},p.readable=function(){var t=this.clone();t.username("").password("").normalize();var i="";if(t._parts.protocol&&(i+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(i+=e.toUnicode(t._parts.hostname),t._parts.port&&(i+=":"+t._parts.port)):i+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(i+="/"),i+=t.path(!0),t._parts.query){for(var n="",o=0,r=t._parts.query.split("&"),a=r.length;a>o;o++){var l=(r[o]||"").split("="),n=n+("&"+s.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(n+="="+s.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}i+="?"+n.substring(1)}return i+=s.decodeQuery(t.hash(),!0)},p.absoluteTo=function(e){var t,i,n=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e instanceof s||(e=new s(e)),n._parts.protocol||(n._parts.protocol=e._parts.protocol),this._parts.hostname)return n;for(t=0;i=o[t];t++)n._parts[i]=e._parts[i];for(o=["query","path"],t=0;i=o[t];t++)!n._parts[i]&&e._parts[i]&&(n._parts[i]=e._parts[i]);return"/"!==n.path().charAt(0)&&(e=e.directory(),n._parts.path=(e?e+"/":"")+n._parts.path,n.normalizePath()),n.build(),n},p.relativeTo=function(e){var t,i,n,o,r=this.clone().normalize();if(r._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e=new s(e).normalize(),t=r._parts,i=e._parts,n=r.path(),o=e.path(),"/"!==n.charAt(0))throw Error("URI is already relative");if("/"!==o.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return t.protocol===i.protocol&&(t.protocol=null),t.username!==i.username||t.password!==i.password||null!==t.protocol||null!==t.username||null!==t.password||t.hostname!==i.hostname||t.port!==i.port?r.build():(t.hostname=null,t.port=null,n===o?(t.path="",r.build()):(e=s.commonPath(r.path(),e.path()))?(i=i.path.substring(e.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),t.path=i+t.path.substring(e.length),r.build()):r.build())},p.equals=function(e){var t=this.clone();e=new s(e);var i,n={},o={},r={};if(t.normalize(),e.normalize(),t.toString()===e.toString())return!0;if(n=t.query(),o=e.query(),t.query(""),e.query(""),t.toString()!==e.toString()||n.length!==o.length)return!1;n=s.parseQuery(n,this._parts.escapeQuerySpace),o=s.parseQuery(o,this._parts.escapeQuerySpace);for(i in n)if(f.call(n,i)){if(a(n[i])){if(!c(n[i],o[i]))return!1}else if(n[i]!==o[i])return!1;r[i]=!0}for(i in o)if(f.call(o,i)&&!r[i])return!1;return!0},p.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},p.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},s}),function(e,t,i,n,s,o){e.Formatters=e.Formatters||{};var r={};r.formatScalar=function(e){return 0>e?"-"+t.toHumanNumber(-1*e):t.toHumanNumber(e)},r.formatGrowthValue=function(e,i,n){var o,r=e>=0?"+":"",a=s.isUndefined(i)&&s.isUndefined(n),l=t.t("artist_page.fan_base_module."+n+"."+i+"_count",{count:e});return e=0>e?"-"+t.toHumanNumber(-1*e):t.toHumanNumber(e),o=s.compact([[r,e].join(""),a?void 0:l]).join(" ")},r.formatGrowthRate=function(e){var i,n=Math.round(100*e),s=n>0?"+":"";return i=[s,t.toPercentage(n,{precision:0})].join("")},e.Formatters.InsightsNumberFormatter=r,e.Utils={currencyToLocale:function(t){return s.first(e.Constants.currencies.regions[t])},getCurrencyFormatOptions:function(i){var n=e.Utils.currencyToLocale(i);return{format:t.t("number.currency.format.format",{locale:n}),unit:t.t("number.currency.format.unit",{locale:n})}},convertToCurrency:function(e,t,n){return i(e).from(t).to(n)},getErrorMessage:function(e){var i,n=t.t("forms.errors.default_html");return s.isEmpty(e)||(i=[s.first(s.keys(e)),s.first(s.first(s.values(e)))].join(": "),n=[n,i].join("<br><br>")),n},updateHistory:function(e){var t=o();t.search(""),t.search(n.param(e)),window.history.replaceState(null,"",t.resource())}}}(window.Gigmit,window.I18n,window.fx,window.jQuery,window._,window.URI),function(){for(var e,t=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=i.length,s=window.console=window.console||{};n--;)e=i[n],s[e]||(s[e]=t)}(),function(e){Gigmit.Tracking={trackAction:function(t,i){i=i||{},args=e.defaults({},{event:"gigmit."+t,event_nice_name:t},i),window.dataLayer.push(args)}}}(window._),function(e,t){var i=function(){this.eventProperties={},this.trackEvent=function(e,i,n){return i=t.extend({},this.eventProperties,i),t.isEmpty(e)?!1:(this.eventProperties={},window.amplitude.getInstance().logEvent(e,i,n))},this.trackPageview=function(e){return this.trackEvent("Pageview: "+e,{page_url:window.location.href})},this.trackPromoterGigApplicantionView=function(e){if(t.isEmpty(window.Gigmit)||t.isEmpty(window.Gigmit.promoter))return!1;var i=t.extend({},this.eventProperties,{event_source:e||"direct"});return this.trackEvent("Promoter Gig Handling - Viewed Applicant",i)},this.trackArtistExternalMediaItemPlay=function(e){if(t.isEmpty(window.Gigmit)||t.isEmpty(window.Gigmit.promoter))return!1;var i=t.extend({},this.eventProperties,{media_item_id:e.vendorItemId,media_item_vendor:e.vendor}),n=/\/inquiries\//.test(window.location.pathname)?"gig_application":"artist_page";return i.event_source=n,this.trackEvent("Promoter - Played Artist Media",i)},this.trackClick=function(e,t){return this.trackEvent(e,{page_path:window.location.pathname},t)},this.trackViewProTrialOffer=function(e){return this.trackEvent("Artist Subscriptions - Viewed gigmit PRO FREE TRIAL Offer",{page_path:window.location.pathname},e)},this.setEventPropertiesForArtist=function(e){var i={};t.isEmpty(e)||(i={artist_id:e.get("id"),artist_name:e.get("name"),artist_is_phone_number_provided:!t.isEmpty(e.get("phone_number")),artist_completeness_score:e.get("score"),artist_genres:e.getAllMusicGenres().map(function(e){return e.get("sanitized_name")}),artist_total_manually_added_future_gigs:e.get("upcoming_gigs").length,artist_total_manually_added_past_gigs:e.get("played_gigs").length,artist_has_photo_uplodaded:!t.isEmpty(e.get("profile_image")),artist_has_song_provided:e.hasSounds(),artist_has_video_provided:e.hasVideos(),artist_has_youtube_connected:t.has(e.get("fanradar"),"youtube"),artist_youtube_views:t.result(e.get("fanradar"),"youtube",null),artist_has_twitter_connected:t.has(e.get("fanradar"),"twitter"),artist_twitter_followers:t.result(e.get("fanradar"),"twitter",null),artist_has_soundcloud_connected:t.has(e.get("fanradar"),"soundcloud"),artist_soundcloud_plays:t.result(e.get("fanradar"),"soundcloud",null),artist_has_facebook_connected:t.has(e.get("fanradar"),"facebook"),artist_facebook_fans:t.result(e.get("fanradar"),"facebook",null),artist_has_provided_billing_data:e.isBillingDataValid(),artist_is_minimum_epk_requirement_met:e.isEpkComplete(),artist_location_city:e.get("address.city"),artist_location_country:e.get("address.country"),artist_plays_cover_songs:e.get("artistic_profile.plays_cover_songs"),artist_plays_unplugged:e.get("artistic_profile.plays_unplugged"),artist_total_number_of_members:e.get("artistic_profile.total_number_of_members")}),this.eventProperties=t.extend({},this.eventProperties,i)},this.setEventPropertiesForPromoter=function(e){var i={};t.isEmpty(e)||(i={promoter_id:e.get("id"),promoter_name:e.get("name"),promoter_location_city:e.get("address.city"),promoter_location_country:e.get("address.country")}),this.eventProperties=t.extend({},this.eventProperties,i)},this.setSessionId=function(e){window.amplitude.getInstance().setSessionId(e)},this.setUserId=function(e){window.amplitude.getInstance().setUserId(e)},this.setUserProperties=function(e){window.amplitude.getInstance().setUserProperties(e)}};window.Gigmit=window.Gigmit||{},window.Gigmit.AmplitudeTracker=new i,e(function(){e('[data-tracking-event="click"][data-tracking-name]').click(function(t){var i=e(this).attr("data-tracking-name"),n=e(this).attr("href");return t.preventDefault(),window.Gigmit.AmplitudeTracker.trackClick(i,function(){window.location=n}),!1})})}(window.jQuery,window._),function(e,t){t(document).on("click",'[data-track-event][href]:not([href^="#"])',function(e){var i=t(this),n=i.data("track-event"),s=i.data("track-data")||"";""!==n&&(e.preventDefault(),Gigmit.Tracking.trackAction(n,s),setTimeout(function(){document.location.href=i.attr("href")},100))})}(window,jQuery),function(e){var t=function(){this.getArtist=function(t){return e.getJSON("/api/v1/spotify/artists/"+t+"?api_key="+window.Gigmit.artist.get("api_key"))},this.getTopTracksOfArtist=function(t){return e.getJSON("/api/v1/spotify/artists/"+t+"/top_tracks?api_key="+window.Gigmit.artist.get("api_key"))},this.getTrack=function(t){return e.getJSON("/api/v1/spotify/tracks/"+t+"?api_key="+window.Gigmit.artist.get("api_key"))}};window.Gigmit=window.Gigmit||{},window.Gigmit.SpotifyApiClient=new t}(window.jQuery),function(){var e=[].slice;!function(e){if("function"==typeof define&&define.amd)define(["underscore","backbone"],e);else if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else{if(null==window.Backbone||null==Backbone.Model||null==Backbone.Events)throw"Backbone must be loaded before backbone-chaining";if(null!=Backbone.Chaining)return;e(_,Backbone)}}(function(t,i){var n;return n=i.Chaining={install:function(e){return function(){return t.extend(i.Model.prototype,n.Model),t.extend(i.Model.prototype,n.Events),t.extend(i.Collection.prototype,n.Events),n}}(this),throwMalformed:function(e){return function(e,t){throw"Backbone.Chaining: malformed chain '"+e+"': "+t}}(this),throwNullSet:function(e){return function(e,t){throw"Backbone.Chaining: can't set '"+e+".tail': no value for '"+e+"'"}}(this),pattern:/[\.\[\]]/,parseChain:function(e,i){var s,o,r,a,l;if(o=null!=e?e.search(n.pattern):void 0,!(o>=0))return null;if(i=t.extend({"throw":!0},null!=i?i:{}),i.trailing&&(o=e.length-1-e.split("").reverse().join("").search(n.pattern)),a=e[o],s=e.slice(0,o),l=e.slice(o+1),0===l.length)return i["throw"]&&n.throwMalformed(e,"no attribute after '"+a+"'"),null;if(!i.trailing)switch(a){case"]":n.throwMalformed(e,"unbalanced ']'");break;case"[":o=l.indexOf("]"),-1===o&&n.throwMalformed(e,"unbalanced '['"),r=l.slice(0,o),"*"!==r&&"#"!==r&&(r=parseInt(r)),o===l.length-1?l=null:("."!==l[o+1]&&n.throwMalformed(e,"missing '.' after ']'"),l=l.slice(o+2),0===l.length&&n.throwMalformed(e,"no text after '.'"))}return{head:s,tail:l,index:r}},parseEvent:function(e){var t,i,s;return i=e.indexOf("@"),-1===i?!1:(s=e.slice(0,i),t=e.slice(i+1),0===t.length&&n.throwMalformed(e,"missing attributes after '@'"),-1!==t.indexOf("@")&&n.throwMalformed(e,"too many '@'s"),{name:s,attr:t})},toArray:function(e){return t.compact(t.isArray(e)?t.flatten(e):[e])},valuesAtIndex:function(e,t){var i;switch(t){case"*":return i=e.models.slice(),i.multiple=!0,i;case"#":return[e.last()];default:return[e.at(t)]}},Model:{_primitiveGet:i.Model.prototype.get,_primitiveSet:i.Model.prototype.set,get:function(e){var i,s,o,r;return(i=n.parseChain(e))?(r=this._primitiveGet(i.head))?(null!=i.index?(o=n.valuesAtIndex(r,i.index),s=o.multiple,i.tail&&(o=t.map(o,function(e){return null!=e?e.get(i.tail):void 0})),s||(o=o[0])):o=r.get(i.tail),o):void 0:this._primitiveGet(e)},set:function(e,i,s){var o,r,a,l,c;switch(!1){case"object"!=typeof e:r=e,s=i;break;case!e:(r={})[e]=i}if(t.isEmpty(r))return this._primitiveSet.apply(this,arguments);c=this;for(o in r)i=r[o],(a=n.parseChain(o,{trailing:!0}))&&(l=this.get(a.head),null!=l?(t.each(n.toArray(l),function(e){return e.set(a.tail,i,s)?void 0:c=!1}),delete r[o]):s.ifExists||n.throwNullSet(a.head,a.tail));return t.isEmpty(r)||this._primitiveSet(r,s)||(c=!1),c}},Events:{_primitiveOn:i.Events.on,_primitiveOff:i.Events.off,on:function(e,i,s){var o;return t.isString(e)&&-1===e.search(/\s/)&&(o=n.parseEvent(e))?(null==this._eventChainProxies&&(this._eventChainProxies=[]),void this._eventChainProxies.push(new n.EventChainProxy(this,o.name,o.attr,i,s))):this._primitiveOn.apply(this,arguments)},off:function(e,i,s){var o;if(!this._eventChainProxies||e&&!(o=n.parseEvent(e))||(this._eventChainProxies=t.reject(this._eventChainProxies,function(e){return function(t){return t.match(e,null!=o?o.name:void 0,null!=o?o.attr:void 0,i,s)?(t.close(),!0):void 0}}(this)),0===this._eventChainProxies.length&&delete this._eventChainProxies,!e))return this._primitiveOff.apply(this,arguments)}}},i.Chaining.EventChainProxy=function(){function s(e,t,i,n,s){this.requester=e,this.eventName=t,this.attr=i,this.callback=n,this.context=s,this.context||(this.context=this.requester),this.thisEvent=""+this.eventName+"@"+this.attr,this.listenToRemotes()}return t.extend(s.prototype,i.Events),s.prototype.listenToRemotes=function(){var i;return this.requester.models?(t.each(this.requester.models,function(t){return function(i){return t.listenTo(i,t.thisEvent,function(){var i;return i=1<=arguments.length?e.call(arguments,0):[],t.callback.apply(t.context,i)})}}(this)),void this.listenTo(this.requester,"add remove reset",this.reset)):(t.each(n.toArray(this.requester.get(this.attr)),function(i){return function(n){return n&&t.isFunction(n.on)?i.listenTo(n,i.eventName,function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],i.callback.apply(i.context,t)}):void 0}}(this)),this.walkBack(this.attr,function(e){return function(i,s){var o;return o=s.index?"add remove reset sort":"change:"+s.tail,t.each(n.toArray(e.requester.get(i)),function(t){return t?e.listenTo(t,o,e.reset):void 0})}}(this)),this.updateEvent="change:"+((null!=(i=n.parseChain(this.attr))?i.head:void 0)||this.attr),this.listenTo(this.requester,this.updateEvent,this.reset,this))},s.prototype.walkBack=function(e,i){for(var s,o,r;;){if("]"===t.last(e))o=e.lastIndexOf("["),r={index:e.substring(o+1,e.length-1)},e=e.substring(0,o);else{if(s=n.parseChain(e,{trailing:!0}),!s)return;r={tail:s.tail},e=s.head}i(e,r)}},s.prototype.reset=function(){return this.stop(),this.listenToRemotes()},s.prototype.stop=function(){return this.stopListening()},s.prototype.close=function(){return this.closed?void 0:(this.closed=!0,this.stop())},s.prototype.match=function(e,t,i,n,s){return this.requester!==e?!1:t&&this.eventName!==t?!1:i&&this.attr!==i?!1:n&&this.callback!==n?!1:s&&this.context!==s?!1:!0},s}(),n.install()})}.call(this),Backbone.Validation=function(e){"use strict";var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(e,i){return l[t.labelFormatter](e,i)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},n=function(t,i,s){return i=i||{},s=s||"",e.each(t,function(e,o){t.hasOwnProperty(o)&&(e&&"object"==typeof e&&!(e instanceof Array||e instanceof Date||e instanceof RegExp||e instanceof Backbone.Model||e instanceof Backbone.Collection)?n(e,i,s+o+"."):i[s+o]=e)}),i},s=function(){var s=function(t){return e.reduce(e.keys(e.result(t,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},r=function(t,i){var n=t.validation?e.result(t,"validation")[i]||{}:{};return(e.isFunction(n)||e.isString(n))&&(n={fn:n}),e.isArray(n)||(n=[n]),e.reduce(n,function(t,i){return e.each(e.without(e.keys(i),"msg"),function(e){t.push({fn:c[e],val:i[e],msg:i.msg})}),t},[])},a=function(t,n,s,o){return e.reduce(r(t,n),function(r,a){var l=e.extend({},i,c),u=a.fn.call(l,s,n,a.val,t,o);return u===!1||r===!1?!1:u&&!r?e.result(a,"msg")||u:r},"")},l=function(t,i){var s,o={},r=!0,l=e.clone(i),c=n(i);return e.each(c,function(e,i){s=a(t,i,e,l),s&&(o[i]=s,r=!1)}),{invalidAttrs:o,isValid:r}},u=function(t,i){return{preValidate:function(t,i){var n,s=this,o={};return e.isObject(t)?(e.each(t,function(e,t){n=s.preValidate(t,e),n&&(o[t]=n)}),e.isEmpty(o)?void 0:o):a(this,t,i,e.extend({},this.attributes))},isValid:function(t){var i=n(this.attributes);return e.isString(t)?!a(this,t,i[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,n){return t&&!a(this,n,i[n],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(o,r){var a=this,c=!o,u=e.extend({},i,r),d=s(a),h=e.extend({},d,a.attributes,o),p=n(o||h),f=l(a,h);return a._isValid=f.isValid,e.each(d,function(e,i){var n=f.invalidAttrs.hasOwnProperty(i);n||u.valid(t,i,u.selector)}),e.each(d,function(e,i){var n=f.invalidAttrs.hasOwnProperty(i),s=p.hasOwnProperty(i);n&&(s||c)&&u.invalid(t,i,f.invalidAttrs[i],u.selector)}),e.defer(function(){a.trigger("validated",a._isValid,a,f.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,f.invalidAttrs)}),!u.forceUpdate&&e.intersection(e.keys(f.invalidAttrs),e.keys(p)).length>0?f.invalidAttrs:void 0}}},d=function(t,i,n){e.extend(i,u(t,n))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){d(this.view,e,this.options)},f=function(e){h(e)};return{version:"0.9.0",configure:function(i){e.extend(t,i)},bind:function(i,n){n=e.extend({},t,o,n);var s=n.model||i.model,r=n.collection||i.collection;if("undefined"==typeof s&&"undefined"==typeof r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";s?d(i,s,n):r&&(r.each(function(e){d(i,e,n)}),r.bind("add",p,{view:i,options:n}),r.bind("remove",f))},unbind:function(t,i){i=e.extend({},i);var n=i.model||t.model,s=i.collection||t.collection;n&&h(n),s&&(s.each(function(e){h(e)}),s.unbind("add",p),s.unbind("remove",f))},mixin:u(null,t)}}(),o=s.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},r=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},l=s.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||l.sentenceCase(e,t)}},c=s.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(t){return e.isNumber(t)||e.isString(t)&&t.match(r.number)},n=function(i){return!(e.isNull(i)||e.isUndefined(i)||e.isString(i)&&""===t(i)||e.isArray(i)&&e.isEmpty(i))};return{fn:function(t,i,n,s,o){return e.isString(n)&&(n=s[n]),n.call(s,t,i,o)},required:function(t,i,s,o,r){var l=e.isFunction(s)?s.call(o,t,i,r):s;return l||n(t)?l&&!n(t)?this.format(a.required,this.formatLabel(i,o)):void 0:!1},acceptance:function(t,i,n,s){return"true"===t||e.isBoolean(t)&&t!==!1?void 0:this.format(a.acceptance,this.formatLabel(i,s))},min:function(e,t,n,s){return!i(e)||n>e?this.format(a.min,this.formatLabel(t,s),n):void 0},max:function(e,t,n,s){return!i(e)||e>n?this.format(a.max,this.formatLabel(t,s),n):void 0},range:function(e,t,n,s){return!i(e)||e<n[0]||e>n[1]?this.format(a.range,this.formatLabel(t,s),n[0],n[1]):void 0},length:function(t,i,n,s){return e.isString(t)&&t.length===n?void 0:this.format(a.length,this.formatLabel(i,s),n)},minLength:function(t,i,n,s){return!e.isString(t)||t.length<n?this.format(a.minLength,this.formatLabel(i,s),n):void 0},maxLength:function(t,i,n,s){return!e.isString(t)||t.length>n?this.format(a.maxLength,this.formatLabel(i,s),n):void 0},rangeLength:function(t,i,n,s){return!e.isString(t)||t.length<n[0]||t.length>n[1]?this.format(a.rangeLength,this.formatLabel(i,s),n[0],n[1]):void 0},oneOf:function(t,i,n,s){return e.include(n,t)?void 0:this.format(a.oneOf,this.formatLabel(i,s),n.join(", "))},equalTo:function(e,t,i,n,s){return e!==s[i]?this.format(a.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,s){return n(e)&&e.toString().match(r[i]||i)?void 0:this.format(a[i]||a.inlinePattern,this.formatLabel(t,s),i)}}}();return e.each(c,function(t,n){c[n]=e.bind(c[n],e.extend({},i,c))}),s}(_),function(e){"function"==typeof define&&define.amd?define(["underscore","jquery","backbone"],e):e(_,$,Backbone)}(function(e,t,i){if(!i)throw"Please include Backbone.js before Backbone.ModelBinder.js";return i.ModelBinder=function(){e.bindAll.apply(e,[this].concat(e.functions(this)))},i.ModelBinder.SetOptions=function(e){i.ModelBinder.options=e},i.ModelBinder.VERSION="1.0.2",i.ModelBinder.Constants={},i.ModelBinder.Constants.ModelToView="ModelToView",i.ModelBinder.Constants.ViewToModel="ViewToModel",e.extend(i.ModelBinder.prototype,{bind:function(e,i,n,s){this.unbind(),this._model=e,this._rootEl=i,this._setOptions(s),this._model||this._throwException("model must be specified"),this._rootEl||this._throwException("rootEl must be specified"),n?(this._attributeBindings=t.extend(!0,{},n),this._initializeAttributeBindings(),this._initializeElBindings()):this._initializeDefaultBindings(),this._bindModelToView(),this._bindViewToModel()},bindCustomTriggers:function(e,t,i,n,s){this._triggers=i,this.bind(e,t,n,s)},unbind:function(){this._unbindModelToView(),this._unbindViewToModel(),this._attributeBindings&&(delete this._attributeBindings,this._attributeBindings=void 0)},_setOptions:function(t){this._options=e.extend({boundAttribute:"name"},i.ModelBinder.options,t),this._options.modelSetOptions||(this._options.modelSetOptions={}),this._options.modelSetOptions.changeSource="ModelBinder",this._options.changeTriggers||(this._options.changeTriggers={"":"change","[contenteditable]":"blur"}),this._options.initialCopyDirection||(this._options.initialCopyDirection=i.ModelBinder.Constants.ModelToView)},_initializeAttributeBindings:function(){var t,i,n,s,o;for(t in this._attributeBindings){for(i=this._attributeBindings[t],e.isString(i)?n={elementBindings:[{selector:i}]}:e.isArray(i)?n={elementBindings:i}:e.isObject(i)?n={elementBindings:[i]}:this._throwException("Unsupported type passed to Model Binder "+n),s=0;s<n.elementBindings.length;s++)o=n.elementBindings[s],o.attributeBinding=n;n.attributeName=t,this._attributeBindings[t]=n}},_initializeDefaultBindings:function(){var e,i,n,s,o;for(this._attributeBindings={},i=t("["+this._options.boundAttribute+"]",this._rootEl),e=0;e<i.length;e++)n=i[e],s=t(n).attr(this._options.boundAttribute),this._attributeBindings[s]?this._attributeBindings[s].elementBindings.push({attributeBinding:this._attributeBindings[s],boundEls:[n]}):(o={attributeName:s},o.elementBindings=[{attributeBinding:o,boundEls:[n]}],this._attributeBindings[s]=o)},_initializeElBindings:function(){var e,i,n,s,o,r,a;for(e in this._attributeBindings)for(i=this._attributeBindings[e],n=0;n<i.elementBindings.length;n++)if(s=i.elementBindings[n],o=""===s.selector?t(this._rootEl):t(s.selector,this._rootEl),0===o.length)this._throwException("Bad binding found. No elements returned for binding selector "+s.selector);else for(s.boundEls=[],r=0;r<o.length;r++)a=o[r],s.boundEls.push(a)},_bindModelToView:function(){this._model.on("change",this._onModelChange,this),this._options.initialCopyDirection===i.ModelBinder.Constants.ModelToView&&this.copyModelAttributesToView()},copyModelAttributesToView:function(t){var i,n;for(i in this._attributeBindings)(void 0===t||-1!==e.indexOf(t,i))&&(n=this._attributeBindings[i],this._copyModelToView(n))},copyViewValuesToModel:function(){var e,i,n,s,o,r;for(e in this._attributeBindings)for(i=this._attributeBindings[e],n=0;n<i.elementBindings.length;n++)if(s=i.elementBindings[n],this._isBindingUserEditable(s))if(this._isBindingRadioGroup(s))r=this._getRadioButtonGroupCheckedEl(s),r&&this._copyViewToModel(s,r);else for(o=0;o<s.boundEls.length;o++)r=t(s.boundEls[o]),this._isElUserEditable(r)&&this._copyViewToModel(s,r)},_unbindModelToView:function(){this._model&&(this._model.off("change",this._onModelChange),this._model=void 0)},_bindViewToModel:function(){e.each(this._options.changeTriggers,function(e,i){t(this._rootEl).delegate(i,e,this._onElChanged)},this),this._options.initialCopyDirection===i.ModelBinder.Constants.ViewToModel&&this.copyViewValuesToModel()},_unbindViewToModel:function(){this._options&&this._options.changeTriggers&&e.each(this._options.changeTriggers,function(e,i){t(this._rootEl).undelegate(i,e,this._onElChanged)},this)},_onElChanged:function(e){var i,n,s,o;for(i=t(e.target)[0],n=this._getElBindings(i),s=0;s<n.length;s++)o=n[s],this._isBindingUserEditable(o)&&this._copyViewToModel(o,i)},_isBindingUserEditable:function(e){return void 0===e.elAttribute||"text"===e.elAttribute||"html"===e.elAttribute},_isElUserEditable:function(e){var t=e.attr("contenteditable");return t||e.is("input")||e.is("select")||e.is("textarea")},_isBindingRadioGroup:function(e){var i,n,s=e.boundEls.length>0;for(i=0;i<e.boundEls.length;i++)if(n=t(e.boundEls[i]),"radio"!==n.attr("type")){s=!1;break}return s},_getRadioButtonGroupCheckedEl:function(e){var i,n;for(i=0;i<e.boundEls.length;i++)if(n=t(e.boundEls[i]),"radio"===n.attr("type")&&n.attr("checked"))return n;return void 0},_getElBindings:function(e){var t,i,n,s,o,r,a=[];for(t in this._attributeBindings)for(i=this._attributeBindings[t],n=0;n<i.elementBindings.length;n++)for(s=i.elementBindings[n],o=0;o<s.boundEls.length;o++)r=s.boundEls[o],r===e&&a.push(s);return a},_onModelChange:function(){var e,t;for(e in this._model.changedAttributes())t=this._attributeBindings[e],t&&this._copyModelToView(t)},_copyModelToView:function(e){var n,s,o,r,a,l;for(a=this._model.get(e.attributeName),n=0;n<e.elementBindings.length;n++)for(s=e.elementBindings[n],o=0;o<s.boundEls.length;o++)r=s.boundEls[o],r._isSetting||(l=this._getConvertedValue(i.ModelBinder.Constants.ModelToView,s,a),this._setEl(t(r),s,l))},_setEl:function(e,t,i){t.elAttribute?this._setElAttribute(e,t,i):this._setElValue(e,i)},_setElAttribute:function(t,n,s){switch(n.elAttribute){case"html":t.html(s);break;case"text":t.text(s);break;case"enabled":t.prop("disabled",!s);break;case"displayed":t[s?"show":"hide"]();break;case"hidden":t[s?"hide":"show"]();break;case"css":t.css(n.cssAttribute,s);break;case"class":var o=this._model.previous(n.attributeBinding.attributeName),r=this._model.get(n.attributeBinding.attributeName);e.isUndefined(o)&&e.isUndefined(r)||(o=this._getConvertedValue(i.ModelBinder.Constants.ModelToView,n,o),t.removeClass(o)),s&&t.addClass(s);break;default:t.attr(n.elAttribute,s)}},_setElValue:function(t,i){if(t.attr("type"))switch(t.attr("type")){case"radio":t.val()===i?(t.prop("checked")||e.defer(function(){t.trigger("change")}),t.prop("checked",!0)):t.prop("checked",!1);break;case"checkbox":t.prop("checked")===!!i||e.defer(function(){t.trigger("change")}),t.prop("checked",!!i);break;case"file":break;default:t.val(i)}else t.is("input")||t.is("select")||t.is("textarea")?t.val(i||(0===i?"0":"")):t.text(i||(0===i?"0":""))},_copyViewToModel:function(e,n){var s,o,r;n._isSetting||(n._isSetting=!0,s=this._setModel(e,t(n)),n._isSetting=!1,s&&e.converter&&(o=this._model.get(e.attributeBinding.attributeName),r=this._getConvertedValue(i.ModelBinder.Constants.ModelToView,e,o),this._setEl(t(n),e,r)))},_getElValue:function(e,t){switch(t.attr("type")){case"checkbox":return t.prop("checked")?!0:!1;default:return void 0!==t.attr("contenteditable")?t.html():t.val()}},_setModel:function(e,t){var n={},s=this._getElValue(e,t);return s=this._getConvertedValue(i.ModelBinder.Constants.ViewToModel,e,s),n[e.attributeBinding.attributeName]=s,this._model.set(n,this._options.modelSetOptions)},_getConvertedValue:function(e,t,i){return t.converter&&(i=t.converter(e,i,t.attributeBinding.attributeName,this._model,t.boundEls)),i},_throwException:function(e){if(!this._options.suppressThrows)throw e;console&&console.error&&console.error(e)}}),i.ModelBinder.CollectionConverter=function(t){if(this._collection=t,!this._collection)throw"Collection must be defined";e.bindAll(this,"convert")},e.extend(i.ModelBinder.CollectionConverter.prototype,{convert:function(e,t){return e===i.ModelBinder.Constants.ModelToView?t?t.id:void 0:this._collection.get(t)}}),i.ModelBinder.createDefaultBindings=function(e,i,n,s){var o,r,a,l,c={};for(o=t("["+i+"]",e),r=0;r<o.length;r++)if(a=o[r],l=t(a).attr(i),!c[l]){var u={selector:"["+i+'="'+l+'"]'};c[l]=u,n&&(c[l].converter=n),s&&(c[l].elAttribute=s)}return c},i.ModelBinder.combineBindings=function(t,i){return e.each(i,function(e,i){var n={selector:e.selector};e.converter&&(n.converter=e.converter),e.elAttribute&&(n.elAttribute=e.elAttribute),t[i]?t[i]=[t[i],n]:t[i]=n}),t},i.ModelBinder}),function(e,t,i,n,s,o){i.ModelBinder.Converters={Booleans:function(e,t){return e===i.ModelBinder.Constants.ViewToModel?"true"==t?!0:!1:e===i.ModelBinder.Constants.ModelToView?1==t?"true":"false":void 0},InverseBooleans:function(e,t){return e===i.ModelBinder.Constants.ViewToModel?1==t?!1:!0:e===i.ModelBinder.Constants.ModelToView?1==t?!1:!0:void 0},Numbers:function(e,t){return e===i.ModelBinder.Constants.ViewToModel?s.unformat(t):e===i.ModelBinder.Constants.ModelToView?o.toNumber(t,{precision:o.t("number.format.precision"),
separator:o.t("number.format.separator"),delimiter:o.t("number.format.delimiter")}):void 0},OptionalNumbers:function(t,n){return t===i.ModelBinder.Constants.ViewToModel?e.isEmpty(n)?n:s.unformat(n):t===i.ModelBinder.Constants.ModelToView?!e.isNumber(n)&&e.isEmpty(n)?n:o.toNumber(n,{precision:o.t("number.format.precision"),separator:o.t("number.format.separator"),delimiter:o.t("number.format.delimiter")}):void 0},Integer:function(e,t){return e===i.ModelBinder.Constants.ViewToModel?s.unformat(t):e===i.ModelBinder.Constants.ModelToView?o.toNumber(t,{precision:0,separator:"",delimiter:""}):void 0},OptionalInteger:function(t,n){return t===i.ModelBinder.Constants.ViewToModel?e.isEmpty(n)?n:s.unformat(n):t===i.ModelBinder.Constants.ModelToView?!e.isNumber(n)&&e.isEmpty(n)?n:o.toNumber(n,{precision:0,separator:"",delimiter:""}):void 0},OptionalFloatPercentage:function(t,n){return t===i.ModelBinder.Constants.ViewToModel?e.isEmpty(n)?n:s.unformat(n)/100:t===i.ModelBinder.Constants.ModelToView?!e.isNumber(n)&&e.isEmpty(n)?n:o.toNumber(100*n,{precision:o.t("number.format.precision"),separator:o.t("number.format.separator"),delimiter:o.t("number.format.delimiter")}):void 0},FloatPercentage:function(e,t){return e===i.ModelBinder.Constants.ViewToModel?s.unformat(t)/100:e===i.ModelBinder.Constants.ModelToView?o.toPercentage(100*t,{precision:0,separator:o.t("number.format.separator"),delimiter:o.t("number.format.delimiter")}):void 0},DateTime:function(e,s){return e===i.ModelBinder.Constants.ViewToModel?t(s,n.Formats.datetime.momentjs)._d:e===i.ModelBinder.Constants.ModelToView?s.isValid()?s.format(n.Formats.datetime.momentjs):s:void 0},DateConverter:function(e,s){if(e===i.ModelBinder.Constants.ViewToModel)return t(s,n.Formats.date.momentjs)._d;if(e===i.ModelBinder.Constants.ModelToView){var o=t(s);return o.isValid()?o.format(n.Formats.date.momentjs):s}},Currency:function(t,s,r,a){if(t===i.ModelBinder.Constants.ViewToModel)return s;if(t===i.ModelBinder.Constants.ModelToView){var l={};if(a&&e.contains(["Gig","Inquiry","Contract"],a.modelName)){var c=a.get("gig")||a,u=c.get("currency");l=n.Utils.getCurrencyFormatOptions(u)}return o.toCurrency(s,l)}},CurrencyUnit:function(e,t){if(e===i.ModelBinder.Constants.ViewToModel)return t;if(e===i.ModelBinder.Constants.ModelToView){var s=n.Utils.currencyToLocale(t);return o.t("number.currency.format.unit",{locale:s})}},OptionalDate:function(t,n){return e.isEmpty(n)||(n=i.ModelBinder.Converters.DateConverter(t,n)),n},Date:function(s,o){return s===i.ModelBinder.Constants.ViewToModel?t(o,n.Formats.date.momentjs)._d:s===i.ModelBinder.Constants.ModelToView?(t.isMoment(o)?o=o.format(n.Formats.date.momentjs):e.isDate(o)?o=t(o).format(n.Formats.date.momentjs):e.isEmpty(o)||e.isUndefined(o)||(o=t(o).format(n.Formats.date.momentjs)),o):void 0},Time:function(s,o,r,a){if(s===i.ModelBinder.Constants.ViewToModel)return t(o,n.Formats.time.momentjs);if(s===i.ModelBinder.Constants.ModelToView){var l=a.defaults[r],c=!e.isEmpty(l);return!o.isValid()&&c&&(o=a.defaults[r]),o.format(n.Formats.time.momentjs)}},MonthOnlyDate:function(s,o){return s===i.ModelBinder.Constants.ViewToModel?t(o,n.Formats.monthOnly.momentjs)._d:s===i.ModelBinder.Constants.ModelToView?(t.isMoment(o)?o=o.format(n.Formats.monthOnly.momentjs):e.isDate(o)?o=t(o).format(n.Formats.monthOnly.momentjs):e.isEmpty(o)||e.isUndefined(o)||(o=t(o).format(n.Formats.monthOnly.momentjs)),o):void 0}}}(window._,window.moment,window.Backbone,window.Gigmit,window.accounting,window.I18n),function(e,t){"function"==typeof define&&define.amd?define(["exports","backbone","underscore"],t):"undefined"!=typeof exports?t(exports,require("backbone"),require("underscore")):t(e,e.Backbone,e._)}(this,function(e,t,i){"use strict";t.Relational={showWarnings:!0},t.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},t.BlockingQueue=function(){this._queue=[]},i.extend(t.BlockingQueue.prototype,t.Semaphore,{_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;for(this._queue=[];e&&e.length;)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),t.Relational.eventQueue=new t.BlockingQueue,t.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[e]},i.extend(t.Store.prototype,t.Events,{initializeRelation:function(e,n,s){var o=i.isString(n.type)?t[n.type]||this.getObjectByName(n.type):n.type;if(o&&o.prototype instanceof t.Relation){new o(e,n,s)}else t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",n)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=i.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){i.find(this._subModels,function(t){return i.filter(t.subModels||[],function(i,n){var s=this.getObjectByName(i);return e===s?(t.superModelType._subModels[n]=e,e._superModel=t.superModelType,e._subModelTypeValue=n,e._subModelTypeAttribute=t.superModelType.prototype.subModelTypeAttribute,!0):void 0},this).length},this)},addReverseRelation:function(e){var t=i.any(this._reverseRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var t=i.any(this._orphanRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){i.each(this._orphanRelations.slice(0),function(e){var n=t.Relational.store.getObjectByName(e.relatedModel);n&&(this.initializeRelation(null,e),this._orphanRelations=i.without(this._orphanRelations,e))},this)},_addRelation:function(e,t){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(t),i.each(e._subModels||[],function(e){this._addRelation(e,t)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){if(t instanceof e.model){new e.type(t,e)}},this)},getCollection:function(e,n){e instanceof t.RelationalModel&&(e=e.constructor);for(var s=e;s._superModel;)s=s._superModel;var o=i.find(this._collections,function(e){return e.model===s});return o||n===!1||(o=this._createCollection(s)),o},getObjectByName:function(e){var t=e.split("."),n=null;return i.find(this._modelScopes,function(e){return n=i.reduce(t||[],function(e,t){return e?e[t]:void 0},e),n&&n!==e?!0:void 0},this),n},_createCollection:function(e){var i;return e instanceof t.RelationalModel&&(e=e.constructor),e.prototype instanceof t.RelationalModel&&(i=new t.Collection,i.model=e,this._collections.push(i)),i},resolveIdForItem:function(e,n){var s=i.isString(n)||i.isNumber(n)?n:null;return null===s&&(n instanceof t.RelationalModel?s=n.id:i.isObject(n)&&(s=n[e.prototype.idAttribute])),s||0===s||(s=null),s},find:function(e,t){var i=this.resolveIdForItem(e,t),n=this.getCollection(e);if(n){var s=n.get(i);if(s instanceof e)return s}return null},register:function(e){var t=this.getCollection(e);if(t){var i=e.collection;t.add(e),e.collection=i}},checkId:function(e,i){var n=this.getCollection(e),s=n&&n.get(i);if(s&&e!==s)throw t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",s,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t.contains(e)||this.register(e),t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e){var n,s;e instanceof t.Model?(n=this.getCollection(e),s=[e]):e instanceof t.Collection?(n=this.getCollection(e.model),s=i.clone(e.models)):(n=this.getCollection(e),s=i.clone(n.models)),i.each(s,function(e){this.stopListening(e),i.invoke(e.getRelations(),"stopListening")},this),i.contains(this._collections,e)?n.reset([]):i.each(s,function(e){n.get(e)?n.remove(e):n.trigger("relational:remove",e,n)},this)},reset:function(){this.stopListening(),i.each(this._collections,function(e){this.unregister(e)},this),this._collections=[],this._subModels=[],this._modelScopes=[e]}}),t.Relational.store=new t.Store,t.Relation=function(e,n,s){if(this.instance=e,n=i.isObject(n)?n:{},this.reverseRelation=i.defaults(n.reverseRelation||{},this.options.reverseRelation),this.options=i.defaults(n,this.options,t.Relation.prototype.options),this.reverseRelation.type=i.isString(this.reverseRelation.type)?t[this.reverseRelation.type]||t.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,i.isUndefined(this.relatedModel)&&(this.relatedModel=this.model),!i.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof t.RelationalModel||(this.relatedModel=i.result(this,"relatedModel")),i.isString(this.relatedModel)&&(this.relatedModel=t.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&t.Relational.store.addReverseRelation(i.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),e)){var o=this.keySource;o!==this.key&&i.isObject(this.instance.get(this.key))&&(o=this.key),this.setKeyContents(this.instance.get(o)),this.relatedCollection=t.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(s),this.options.autoFetch&&this.instance.getAsync(this.key,i.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},t.Relation.extend=t.Model.extend,i.extend(t.Relation.prototype,t.Events,t.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,n=this.key,s=this.model,o=this.relatedModel,r=t.Relational.showWarnings&&"undefined"!=typeof console;if(!s||!n||!o)return r&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,s,n,o),!1;if(!(s.prototype instanceof t.RelationalModel))return r&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1;if(!(o.prototype instanceof t.RelationalModel))return r&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,o),!1;if(this instanceof t.HasMany&&this.reverseRelation.type===t.HasMany)return r&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&i.keys(e._relations).length){var a=i.find(e._relations,function(e){return e.key===n},this);if(a)return r&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,n,e,a),!1}return!0},setRelated:function(e){this.related=e,this.instance.attributes[this.key]=e},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){for(var t=[],n=i.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e],s=null,o=null,r=0;r<(n||[]).length;r++){s=n[r].getRelations()||[];for(var a=0;a<s.length;a++)o=s[a],this._isReverseRelation(o)&&t.push(o)}return t},destroy:function(){this.stopListening(),this instanceof t.HasOne?this.setRelated(null):this instanceof t.HasMany&&this.setRelated(this._prepareCollection()),i.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),t.HasOne=t.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var t=this.findRelated(e);this.setRelated(t),i.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var t=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof this.relatedModel)t=this.keyContents;else if(this.keyContents||0===this.keyContents){var n=i.defaults({create:this.options.createModels},e);t=this.relatedModel.findOrCreate(this.keyContents,n)}return t&&(this.keyId=null),t},setKeyContents:function(e){this.keyContents=e,this.keyId=t.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,n,s){if(!this.isLocked()){this.acquire(),s=s?i.clone(s):{};var o=i.isUndefined(s.__related),r=o?this.related:s.__related;if(o){this.setKeyContents(n);var a=this.findRelated(s);this.setRelated(a)}if(r&&this.related!==r&&i.each(this.getReverseRelations(r),function(e){e.removeRelated(this.instance,null,s)},this),i.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,s)},this),!s.silent&&this.related!==r){var l=this;this.changed=!0,t.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,s,!0),l.changed=!1})}this.release()}},tryAddRelated:function(e,t,i){!this.keyId&&0!==this.keyId||e.id!==this.keyId||(this.addRelated(e,i),this.keyId=null)},addRelated:function(e,t){var n=this;e.queue(function(){if(e!==n.related){var s=n.related||null;n.setRelated(e),n.onChange(n.instance,e,i.defaults({__related:s},t))}})},removeRelated:function(e,t,n){if(this.related&&e===this.related){var s=this.related||null;this.setRelated(null),this.onChange(this.instance,e,i.defaults({__related:s},n))}}}),t.HasMany=t.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:t.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!i.isFunction(this.collectionType)||this.collectionType===t.Collection||this.collectionType.prototype instanceof t.Collection||(this.collectionType=i.result(this,"collectionType")),i.isString(this.collectionType)&&(this.collectionType=t.Relational.store.getObjectByName(this.collectionType)),this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var n=this.findRelated(e);this.setRelated(n)},_prepareCollection:function(e){if(this.related&&this.stopListening(this.related),!(e&&e instanceof t.Collection)){var n=i.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,n)}if(e.model=this.relatedModel,this.options.collectionKey){var s=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[s]&&e[s]!==this.instance?t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,s,this.options.collectionKey):s&&(e[s]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var n=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof t.Collection)this._prepareCollection(this.keyContents),n=this.keyContents;else{var s=[];i.each(this.keyContents,function(t){var n=null;n=t instanceof this.relatedModel?t:i.isObject(t)&&e.parse&&this.relatedModel.prototype.parse?this.relatedModel.prototype.parse(i.clone(t),e):t,n&&s.push(n)},this),n=this.related instanceof t.Collection?this.related:this._prepareCollection(),n.set(s,i.defaults({parse:!1},e))}return this.keyIds=i.difference(this.keyIds,i.pluck(n.models,"id")),n},setKeyContents:function(e){this.keyContents=e instanceof t.Collection?e:null,this.keyIds=[],this.keyContents||!e&&0!==e||(this.keyContents=i.isArray(e)?e:[e],i.each(this.keyContents,function(e){var i=t.Relational.store.resolveIdForItem(this.relatedModel,e);(i||0===i)&&this.keyIds.push(i)},this))},onChange:function(e,n,s){s=s?i.clone(s):{},this.setKeyContents(n),this.changed=!1;var o=this.findRelated(s);if(this.setRelated(o),!s.silent){var r=this;t.Relational.eventQueue.add(function(){r.changed&&(r.instance.trigger("change:"+r.key,r.instance,r.related,s,!0),r.changed=!1)})}},handleAddition:function(e,n,s){s=s?i.clone(s):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,s)},this);var o=this;!s.silent&&t.Relational.eventQueue.add(function(){o.instance.trigger("add:"+o.key,e,o.related,s)})},handleRemoval:function(e,n,s){s=s?i.clone(s):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,s)},this);var o=this;!s.silent&&t.Relational.eventQueue.add(function(){o.instance.trigger("remove:"+o.key,e,o.related,s)})},handleReset:function(e,n){var s=this;n=n?i.clone(n):{},!n.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("reset:"+s.key,s.related,n)})},tryAddRelated:function(e,t,n){var s=i.contains(this.keyIds,e.id);s&&(this.addRelated(e,n),this.keyIds=i.without(this.keyIds,e.id))},addRelated:function(e,t){var n=this;e.queue(function(){n.related&&!n.related.get(e)&&n.related.add(e,i.defaults({parse:!1},t))})},removeRelated:function(e,t,i){this.related.get(e)&&this.related.remove(e,i)}}),t.RelationalModel=t.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(e,n){if(n&&n.collection){var s=this,o=this.collection=n.collection;delete n.collection,this._deferProcessing=!0;var r=function(e){e===s&&(s._deferProcessing=!1,s.processQueue(),o.off("relational:add",r))};o.on("relational:add",r),i.defer(function(){r(s)})}t.Relational.store.processOrphanRelations(),t.Relational.store.listenTo(this,"relational:unregister",t.Relational.store.unregister),this._queue=new t.BlockingQueue,this._queue.block(),t.Relational.eventQueue.block();try{t.Model.apply(this,arguments)}finally{t.Relational.eventQueue.unblock()}},trigger:function(e){if(e.length>5&&0===e.indexOf("change")){var i=this,n=arguments;t.Relational.eventQueue.isBlocked()?t.Relational.eventQueue.add(function(){var s=!0;if("change"===e)s=i.hasChanged()||i._attributeChangeFired,i._attributeChangeFired=!1;else{var o=e.slice(7),r=i.getRelation(o);r?(s=n[4]===!0,s?i.changed[o]=n[2]:r.changed||delete i.changed[o]):s&&(i._attributeChangeFired=!0)}s&&t.Model.prototype.trigger.apply(i,n)}):t.Model.prototype.trigger.apply(i,n)}else"destroy"===e?(t.Model.prototype.trigger.apply(this,arguments),t.Relational.store.unregister(this)):t.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},i.each(this.relations||[],function(i){t.Relational.store.initializeRelation(this,i,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e,t){this._isInitialized&&!this.isLocked()&&i.each(this._relations,function(i){if(!e||i.keySource in e||i.key in e){var n=this.attributes[i.keySource]||this.attributes[i.key],s=e&&(e[i.keySource]||e[i.key]);(i.related!==n||null===n&&null===s)&&this.trigger("relational:change:"+i.key,this,n,t||{})}i.keySource!==i.key&&delete this.attributes[i.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return i.values(this._relations)},getIdsToFetch:function(e,n){var s=e instanceof t.Relation?e:this.getRelation(e),o=s?s.keyIds&&s.keyIds.slice(0)||(s.keyId||0===s.keyId?[s.keyId]:[]):[];if(n){var r=s.related&&(s.related.models||[s.related]);i.each(r,function(e){(e.id||0===e.id)&&o.push(e.id)})}return o},getAsync:function(e,n){n=i.extend({add:!0,remove:!1,refresh:!1},n);var s=this,o=[],r=this.getRelation(e),a=r&&this.getIdsToFetch(r,n.refresh),l=r.related instanceof t.Collection?r.related:r.relatedCollection;if(a&&a.length){var c,u=[],d=[],h=function(){u=i.map(a,function(e){var t=r.relatedModel.findModel(e);if(!t){var i={};i[r.relatedModel.prototype.idAttribute]=e,t=r.relatedModel.findOrCreate(i,n),d.push(t)}return t},this)};if(l instanceof t.Collection&&i.isFunction(l.url)){var p=l.url();c=l.url(a),c===p&&(h(),c=l.url(u),c===p&&(c=null))}if(c){var f=i.defaults({error:function(){i.each(d,function(e){e.trigger("destroy",e,e.collection,n)}),n.error&&n.error.apply(u,arguments)},url:c},n);o=[l.fetch(f)]}else u.length||h(),o=i.map(u,function(e){var t=i.defaults({error:function(){i.contains(d,e)&&e.trigger("destroy",e,e.collection,n),n.error&&n.error.apply(u,arguments)}},n);return e.fetch(t)},this)}return this.deferArray(o).then(function(){return t.Model.prototype.get.call(s,e)})},deferArray:function(e){return t.$.when.apply(null,e)},set:function(e,n,s){t.Relational.eventQueue.block();var o,r;i.isObject(e)||null==e?(o=e,s=n):(o={},o[e]=n);try{var a=this.id,l=o&&this.idAttribute in o&&o[this.idAttribute];t.Relational.store.checkId(this,l),r=t.Model.prototype.set.apply(this,arguments),this._isInitialized||this.isLocked()?l&&l!==a&&t.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(l||0===l)&&t.Relational.store.register(this),this.initializeRelations(s)),o&&this.updateRelations(o,s)}finally{t.Relational.eventQueue.unblock()}return r},clone:function(){var e=i.clone(this.attributes);return i.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),i.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var n=t.Model.prototype.toJSON.call(this,e);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in n||(n[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),i.each(this._relations,function(s){var o=n[s.key],r=s.options.includeInJSON,a=null;r===!0?o&&i.isFunction(o.toJSON)&&(a=o.toJSON(e)):i.isString(r)?(o instanceof t.Collection?a=o.pluck(r):o instanceof t.Model&&(a=o.get(r)),r===s.relatedModel.prototype.idAttribute&&(s instanceof t.HasMany?a=a.concat(s.keyIds):s instanceof t.HasOne&&(a=a||s.keyId,a||i.isObject(s.keyContents)||(a=s.keyContents||null)))):i.isArray(r)?o instanceof t.Collection?(a=[],o.each(function(e){var t={};i.each(r,function(i){t[i]=e.get(i)}),a.push(t)})):o instanceof t.Model&&(a={},i.each(r,function(e){a[e]=o.get(e)})):delete n[s.key],null===a&&e&&e.wait&&(a=o),r&&(n[s.keyDestination]=a),s.keyDestination!==s.key&&delete n[s.key]}),this.release(),n}},{setup:function(e){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?t.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,i.each(this.prototype.relations||[],function(e){if(e.model||(e.model=this),e.reverseRelation&&e.model===this){var n=!0;if(i.isString(e.relatedModel)){var s=t.Relational.store.getObjectByName(e.relatedModel);n=s&&s.prototype instanceof t.RelationalModel}n?t.Relational.store.initializeRelation(null,e):i.isString(e.relatedModel)&&t.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var i=this._findSubModelType(this,e)||this;return new i(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var i=t[e.prototype.subModelTypeAttribute],n=e._subModels[i];if(n)return n;for(i in e._subModels)if(n=this._findSubModelType(e._subModels[i],t))return n}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var e=i.keys(this._subModels),n=i.omit(this.prototype.subModelTypes,e);i.each(n,function(e){var i=t.Relational.store.getObjectByName(e);i&&i.initializeModelHierarchy()})}},inheritRelations:function(){if(i.isUndefined(this._superModel)||i.isNull(this._superModel))if(t.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var e=i.filter(this._superModel.prototype.relations||[],function(e){return!i.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,t){t||(t={});var n=i.isObject(e)&&t.parse&&this.prototype.parse?this.prototype.parse(i.clone(e),t):e,s=this.findModel(n);return i.isObject(e)&&(s&&t.merge!==!1?(delete t.collection,delete t.url,s.set(n,t)):s||t.create===!1||(s=this.build(n,i.defaults({parse:!1},t)))),s},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)},findModel:function(e){return t.Relational.store.find(this,e)}}),i.extend(t.RelationalModel.prototype,t.Semaphore),t.Collection.prototype.__prepareModel=t.Collection.prototype._prepareModel,t.Collection.prototype._prepareModel=function(e,n){var s;return e instanceof t.Model?(e.collection||(e.collection=this),s=e):(n=n?i.clone(n):{},n.collection=this,s="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(e,n):new this.model(e,n),s&&s.validationError&&(this.trigger("invalid",this,e,n),s=!1)),s};var n=t.Collection.prototype.__set=t.Collection.prototype.set;t.Collection.prototype.set=function(e,s){if(!(this.model.prototype instanceof t.RelationalModel))return n.call(this,e,s);s&&s.parse&&(e=this.parse(e,s));var o=!i.isArray(e),r=[],a=[],l=null;e=o?e?[e]:[]:i.clone(e);for(var c=0;c<e.length;c++)l=e[c],l instanceof t.Model||(l=t.Collection.prototype._prepareModel.call(this,l,s)),l&&(a.push(l),this.get(l)||this.get(l.cid)?null!==l.id&&void 0!==l.id&&(this._byId[l.id]=l):r.push(l));a=o?a.length?a[0]:null:a;var u=n.call(this,a,i.defaults({merge:!1,parse:!1},s));for(c=0;c<r.length;c++)l=r[c],(this.get(l)||this.get(l.cid))&&this.trigger("relational:add",l,this,s);return u};var s=t.Collection.prototype.___removeModels=t.Collection.prototype._removeModels;t.Collection.prototype._removeModels=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return s.call(this,e,n);var o=[];i.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&o.push(e)},this);var r=s.call(this,o,n);return i.each(o,function(e){this.trigger("relational:remove",e,this,n)},this),r};var o=t.Collection.prototype.__reset=t.Collection.prototype.reset;t.Collection.prototype.reset=function(e,n){n=i.extend({merge:!0},n);var s=o.call(this,e,n);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,n),s};var r=t.Collection.prototype.__sort=t.Collection.prototype.sort;t.Collection.prototype.sort=function(e){var i=r.call(this,e);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,e),i};var a=t.Collection.prototype.__trigger=t.Collection.prototype.trigger;t.Collection.prototype.trigger=function(e){if(!(this.model.prototype instanceof t.RelationalModel))return a.apply(this,arguments);if("add"===e||"remove"===e||"reset"===e||"sort"===e){var n=this,s=arguments;i.isObject(s[3])&&(s=i.toArray(s),s[3]=i.clone(s[3])),t.Relational.eventQueue.add(function(){a.apply(n,s)})}else a.apply(this,arguments);return this},t.RelationalModel.extend=function(e,i){var n=t.Model.extend.call(this,e,i);return n.setup(this),n}}),function(e,t,i,n,s,o,r){t.extend(window.Gigmit,{Collections:{},Instances:{},Mixins:{Views:{}},Models:{},Views:{Artists:{Dialogs:{},Lists:{},Search:{Filters:{}},Microsite:{}},ArtistSearch:{Filters:{}},VenuesSearch:{Filters:{}},GigSearch:{Filters:{}},GigInquiriesSearch:{Filters:{}},FilterBar:{},Components:{},Forms:{},Gigs:{Forms:{},Inquiries:{Filters:{}}},Helpers:{},Profiles:{Dialogs:{}},Promoters:{Dialogs:{}},Register:{}},Routers:{},Widgets:{}}),t.extend(o,i.Events),t.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},i.Relational.store.removeModelScope(window),i.Relational.store.addModelScope(o.Models),i.ajax=function(){return i.$.ajaxSetup.call(i.$,{beforeSend:function(t,n){if(!n.crossDomain){var s=e('meta[name="csrf-token"]').attr("content");t.setRequestHeader("X-CSRF-Token",s);var r=(o.artist||o.promoter||new i.Model).get("api_key");r&&t.setRequestHeader("X-Gigmit-Api-Key",r)}}}),i.$.ajax.apply(i.$,arguments)},i.ModelBinder.default_options={boundAttribute:"data-bind",changeTriggers:{"":"change"}},i.ModelBinder.SetOptions(i.ModelBinder.default_options),t.extend(i.RelationalModel.prototype,{relationsHasChanges:function(){var e=!1,n=this.getRelations();return t.each(n,function(n){var s=n.related;t.isObject(s)&&(s.constructor==i.Collection?t.each(s.models,function(i){e=e||!t.isEmpty(i.changed)}):e=e||!t.isEmpty(s.changed))}),e}}),t.extend(i.Model.prototype,{updateAttributes:function(e,i){return i=t.extend({},i,{data:r.stringify(e),dataType:"json",contentType:"application/json"}),this.save(void 0,i)},reset:function(e,i){i=t.extend({reset:!0},i);var n=t.result(this,"defaults");return e=t.defaults(t.extend({},n,e),n),this.clear({silent:!0}).set(e,i),i.silent||this.trigger("model:reset",this,i),this},toJSON:function(){var e,i=t.clone(this.attributes);return i=t.each(i,function(e,t){"_"==t.charAt(0)&&"_destroy"!=t&&delete i[t]}),e=["created_at","updated_at"],t.omit(i,e)}}),t.extend(i.Collection.prototype,{isValid:function(){var e=!0;return t.each(this.models,function(i){e=e&&t.isUndefined(i.validate())}),e},_stripDestroyed:function(){t.each(t.compact(this.models),t.bind(function(e){t.has(e.attributes,"_destroy")&&this.remove(e)},this))}}),t.extend(i.View.prototype,{options:{tooltip:{content:" ",hide:"unfocus keyup change",position:{my:"centerLeft",at:"centerRight"},show:!1,style:{classes:"qtip-validation-error",tip:{height:7,width:15},width:"auto"}}},_showValidationError:function(t){var i=e(t.currentTarget);i.data("hasqtip")||i.qtip("show")},_addValidationError:function(t,i){t.addClass("error"),t.qtip(this.options.tooltip),t.qtip("option","content.text",i),t.on("focus",function(){e(this).qtip("show")})},_hideValidationError:function(e){e.removeClass("error"),e.qtip("hide")},_processErrors:function(e){return t.isEmpty(e)?(t.each(this.bindings,t.bind(function(e,t){this._hideValidationError(this.$el.find('[data-bind="'+t+'"]'))},this)),!0):(t.each(e,t.bind(function(e,t){this._addValidationError(this.$el.find('[data-bind="'+t+'"]'),e)},this)),!1)},toCurrency:function(e,i,s,r){i=i||o.Constants.currencies["default"],s=s||o.Constants.currencies["default"],r=r||{};var a,l=o.Utils.convertToCurrency(e,i,s);if(r=t.extend(r,o.Utils.getCurrencyFormatOptions(s)),a=n.toCurrency(l,r),i!=s){var c=n.toCurrency(e,o.Utils.getCurrencyFormatOptions(i));a=n.t("common.calculated_amount_html",{base_amount:c,calculated_amount:a})}return a}}),o.Views.DefaultFormView=i.View.extend({_modelBinder:void 0,initialize:function(e){this.generate_bindings(),i.Validation.bind(this),t.isUndefined(this.summary_lists)||t.each(this.summary_lists,function(e,t){this.listenTo(this.model,e.join(" "),this["_update_"+t+"_step_summary"])},this),t.isUndefined(this._initialize)||this._initialize(e)},close:function(){t.isUndefined(this._modelBinder)||this._modelBinder.unbind(),this.stopListening()},generate_bindings:function(){t.isUndefined(this.converters)||(this.bindings={},t.isUndefined(this._check_conditional_bindings)||this._check_conditional_bindings(),this.add_bindings(this.converters),this.bindings=t.extend(i.ModelBinder.createDefaultBindings(this.el,i.ModelBinder.options.boundAttribute),this.bindings),this._modelBinder=new i.ModelBinder,this._modelBinder.bind(this.model,this.el,this.bindings));
},add_bindings:function(e){t.each(e,function(e,i){t.each(e,function(e){this.add_binding(e,i)},this)},this)},add_binding:function(e,t){t="undefined"!=typeof t?i.ModelBinder.Converters[t]:void 0,this.bindings[e]={selector:"["+i.ModelBinder.options.boundAttribute+'="'+e+'"]',converter:t}},remove_binding:function(e){this.bindings=t.omit(this.bindings,e)},_fill_containers_history:function(i){var n=this;if("undefined"==typeof s){var s={};t.each(this.$el.find(".container-with-tip"),function(i){t.each(e(i).find("input, textarea"),function(t){s[e(t).data("bind")]=n.model.get(e(t).data("bind"))})})}else s[i]=n.model.get(i)},_update_summary_list:function(i,n){var s=[];t.each(n,function(i){var n=e("<span>").html(i.message),o=e("<li>");switch(i.icon){case"edit":o.addClass("icon-pencil icon--margin");break;case"ok":o.addClass("icon-ok-sign icon--margin");break;case"not_ok":o.addClass("icon-remove-sign icon--margin");break;case"exclamation":o.addClass("icon-exclamation-sign icon--margin")}t.isUndefined(i.details)?o.append(n):o.append(n," ",i.details),s.push(o)}),i.empty().append(s)},_get_details_container_for_attribute:function(t,i,s){s="undefined"!=typeof s?s:n.t("common.details");var o=e("<i>").addClass("icon-chevron-sign-down"),r=e("<a>").addClass("collapsed").attr("data-toggle","collapse").attr("data-target","#"+t+"-details").append(o,s),a=e("<div>").attr("id",t+"-details").addClass("collapse").html(e("<div>").html(i));return[r,a]},_getDealDetailsSummaryTable:function(e){var s='<table id="deal-details-summary">',r={};if(s+="<tr><td>"+n.t("common.min_entry_fee")+"</td><td>{{net_min_entry_fee}} <small>"+n.t("common.netto")+"</small> | {{gross_min_entry_fee}} <small>{{tax_hint}}</small></td></tr>",r=t.extend(r,{net_min_entry_fee:n.toCurrency(e.get("deal_possible_fee_min_without_tax"),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency"))),gross_min_entry_fee:n.toCurrency(e.get("deal_possible_fee_min"),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency"))),tax_hint:n.t("common.gross_incl_tax",{tax:i.ModelBinder.Converters.FloatPercentage("ModelToView",e.get("gig").get("deal_possible_fee_tax"))})}),s+='<tr rowspan="2"><td>'+n.t("common.distribution")+"</td><td>{{distribution_summary_artist}}</td></tr>",s+="<tr><td></td><td>{{distribution_summary_promoter}}</td></tr>",r=t.extend(r,{distribution_summary_artist:n.t("common.distribution_summary_html",{net_fee:n.toCurrency(e.net_deal_possible_fee_min_artist_share(),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency"))),profile_type:n.t("common.musician"),distribution:i.ModelBinder.Converters.FloatPercentage("ModelToView",e.get("deal_split_amount_for_artist"))}),distribution_summary_promoter:n.t("common.distribution_summary_html",{net_fee:n.toCurrency(e.net_deal_possible_fee_min_promoter_share(),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency"))),profile_type:n.t("common.promoter"),distribution:i.ModelBinder.Converters.FloatPercentage("ModelToView",e.get("deal_split_amount_for_promoter"))})}),e.get("gig").isBreakDeal()){s="<p>{{short_description}}</p>"+s;var a=o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency")),l=n.toCurrency(e.get("deal_fee_max"),a),c=n.toCurrency(e.get("deal_guaranteed_artist_fee"),a),u=n.t("common.break_deal_short_explanation_html",{deal_max:l,guaranteed_artist_fee:c});r=t.extend(r,{short_description:u}),s+="<tr><td> "+n.t("common.guaranteed_artist_fee")+" </td><td>{{guaranteed_artist_fee}} <small>"+n.t("common.netto")+"</small></td></tr>",r=t.extend(r,{guaranteed_artist_fee:n.toCurrency(e.get("deal_guaranteed_artist_fee"),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency")))}),s+="<tr><td> "+n.t("common.break_even_point")+" </td><td>{{break_even_point_description}}</td></tr>",r=t.extend(r,{break_even_point_description:n.t("common.break_even_amount_or_person",{bep_amount:n.toCurrency(e.get("gig").get("deal_break_even_point"),o.Utils.getCurrencyFormatOptions(e.get("gig").get("currency"))),bep_audience:e.get("amount_of_audience_until_break_even_point")})})}return s+="<tr><td> "+n.t("common.max_number_of_audience")+" </td><td>{{max_number_of_audience}}</td></tr>",r=t.extend(r,{max_number_of_audience:e.get("gig").get("deal_max_number_of_audience")}),t.template(s)(r)},_get_form_error:function(t,i){return e("<label>").addClass("error").attr("for",i).text(t)}}),o.Views.DefaultDialogView=i.View.extend({_get_submit_error_alert:function(t){t="undefined"!=typeof t?t:n.t("forms.errors.default_html");var i=e("<div>").addClass("alert alert-error").html(t).hide();return i},show:function(){this.$el.dialog("open")},hide:function(){this.$el.dialog("close")}}),t.extend(i.Model.prototype,{modelName:"Model"}),t.extend(i.Model.prototype,i.Validation.mixin),t.extend(i.Validation.validators,{datetime:function(e){var i=s(e),o=i.invalidAt();return t.contains([0,1,2],o)?n.t("forms.errors.valid_date"):t.contains([3,4,5,6],o)?n.t("forms.errors.valid_time"):i.isValid()?void 0:[n.t("forms.errors.valid_date"),n.t("forms.errors.valid_time")].join(" ")},time:function(e){return e=e||void 0,t.isDate(e)||t.isUndefined(e)||s(e,o.Formats.time.momentjs).isValid()?void 0:n.t("forms.errors.valid_time")},currentOrPastYear:function(e){var i="TODO: error invalid year",n="TODO: please enter a year in the past";return t.isNumber(e)?0>e||e>s().year?n:void 0:i},date:function(e){return e=e||void 0,t.isDate(e)||t.isUndefined(e)||s(e,o.Formats.date.momentjs).isValid()?void 0:n.t("forms.errors.valid_date")},isPastDate:function(e){var t=s(e);return t.isBefore(s())?void 0:n.t("forms.errors.valid_date_past")},isFutureDate:function(e){var t=s(e);return t.isAfter(s())?void 0:n.t("forms.errors.valid_date_future")},isBeforeOrAtGivenDate:function(e,t,i){var o=s(e),r=s(i);return o.isAfter(r)?n.t("forms.errors.valid_date_future_or_current",{date:r.add(1,"days")}):void 0},isAfterOrAtGivenDate:function(e,i,r){var a=t.isDate(e)?s(e):s(e,o.Formats.date.momentjs),l=t.isDate(r)?s(r):s(r,o.Formats.date.momentjs);return a.isBefore(l)?n.t("forms.errors.valid_date_past_or_current",{date:l.format(o.Formats.date.momentjs)}):void 0},isFutureOrCurrentDate:function(e){var t=s(e),i=s(new Date);return t.isBefore(i,"day")?n.t("forms.errors.valid_date_future_or_current",{date:i.add(1,"days").format(o.Formats.date.momentjs)}):void 0},is_future_date:function(e){if(e=e||void 0,t.isDate(e)){var i=s(e).endOf("day"),r=s().endOf("day");if(0>=i-r)return n.t("forms.errors.valid_date_future")}else if(!t.isUndefined(e)&&(i=(s(e,o.Formats.date.momentjs).endOf("day")||s()).endOf("day"),r=t.isEmpty(e)?s.endOf("day"):s(),0>=i-r))return n.t("forms.errors.valid_date_future")}})}(window.jQuery,window._,window.Backbone,window.I18n,window.moment,window.Gigmit,window.JSON),/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(e,t){function i(t,i){var s,o,r,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+o+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(t,i,n){var s,o,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],s=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},o=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==t&&(e.isPlainObject(o)?i[s]=e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):i[s]=o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(r||{})._init():e.data(this,o,new s(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=e.widget.extend({},this.options[i]),r=0;r<s.length-1;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,r){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?s.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),r=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&e.effects&&e.effects.effect[a]?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),/*!
 * jQuery UI Dialog 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var s,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(s))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(s,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var s=this,o=!1,r={};e.each(t,function(e,t){s._setOption(e,t),e in i&&(o=!0),e in n&&(r[e]=t)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=s.is(":data(ui-resizable)"),n&&!t&&s.resizable("destroy"),n&&"string"==typeof t&&s.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),i={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),/*!
 * jQuery UI Menu 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e,t){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),o===s?r=!0:o=s+o,a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),/*!
 * jQuery UI Mouse 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return e("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,p,m,g,v,_,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),x=(t.collision||"flip").split(" "),k={};return _=s(y),y[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),k[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=i(k.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var s,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=n(this,"marginLeft"),_=n(this,"marginTop"),S=d+f+n(this,"marginRight")+w.width,C=h+_+n(this,"marginBottom")+w.height,T=e.extend({},v),M=i(k.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?T.left-=d:"center"===t.my[0]&&(T.left-=d/2),"bottom"===t.my[1]?T.top-=h:"center"===t.my[1]&&(T.top-=h/2),T.left+=M[0],T.top+=M[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),s={marginLeft:f,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[x[i]]&&e.ui.position[x[i]][n](T,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:s,collisionWidth:S,collisionHeight:C,offset:[o[0]+M[0],o[1]+M[1]],my:t.my,at:t.at,within:b,elem:u})}),t.using&&(c=function(e){var i=g.left-T.left,n=i+p-d,s=g.top-T.top,o=s+m-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:T.left,top:T.top,width:d,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};d>p&&a(i+n)<p&&(l.horizontal="center"),h>m&&a(s+o)<m&&(l.vertical="middle"),r(a(i),a(n))>r(a(s),a(o))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),u.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-o-s;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-s,e.left+=l-i):c>0&&0>=l?e.left=s:l>c?e.left=s+o-t.collisionWidth:e.left=s:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-o-s;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-s,e.top+=l-i):c>0&&0>=l?e.top=s:l>c?e.top=s+o-t.collisionHeight:e.top=s:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+h+p+f+t.collisionWidth-r-o,(0>i||i<a(u))&&(e.left+=h+p+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<d)&&(e.left+=h+p+f))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-r-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+p+f+m+t.collisionHeight-r-o,e.top+p+f+m>u&&(0>n||n<a(u))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||a(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}()}(jQuery),/*!
 * jQuery UI Autocomplete 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),/*!
 * jQuery UI Slider 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)r.push(o);this.handles=s.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,r,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));(s>i||s===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(s=i,o=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var n,s,o,r,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(r=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-r)}this._slide(t,a,o)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),/*!
 * jQuery UI Button 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){var i,n,s,o,r="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},u=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,d=l?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),l&&(this.element.bind("change"+this.eventNamespace,function(){o||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,n=e.pageX,s=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(n!==e.pageX||s!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];u(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),i=this,void t.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),/*!
 * jQuery UI Resizable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,s,o,r=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),o="ui-resizable-"+n,s=e("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:a.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(t){var i,n,s,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var n,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=i(this.helper.css("left")),s=i(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,s+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-o.left||0,h=t.pageY-o.top||0,p=this._change[r];return p?(i=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==c&&(s.width=this.size.width+"px"),this.size.height!==u&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,s,o,r,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,r={width:u.helper.width()-o,height:u.helper.height()-s},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,s,o,r,a=this.options;r={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),s>r.minHeight&&(r.minHeight=s),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=n(e.width)&&t.minWidth&&t.minWidth>e.width,a=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&u&&(e.left=l-t.minWidth),s&&u&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),o&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,o=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,s,o,r,a,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){n[e]=i(t.css("padding"+s))}),c.containerOffset=t.offset(),c.containerPosition=t.position(),c.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},s=c.containerOffset,o=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:r,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:s.left,top:s.top,width:a,height:l}))},resize:function(t){var i,n,s,o,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},h=r.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,s=t.containerPosition,o=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),o={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,s=t.originalSize,o=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-s.width)/l)*l,d=Math.round((n.height-s.height)/c)*c,h=s.width+u,p=s.height+d,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(r)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.top=o.top-d):/^(sw)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.left=o.left-u):(t.size.width=h,t.size.height=p,t.position.top=o.top-d,t.position.left=o.left-u)}})}(jQuery),/*!
 * jQuery UI Tooltip @VERSION
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.position.js
 */
function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"@VERSION",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,s){function o(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,l,c=e.extend({},this.options.position);if(s){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),t(n,r.attr("id")),r.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):r.position(e.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(o(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),/*!
 * jQuery UI Draggable @VERSION
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.mouse.js
 *  jquery.ui.widget.js
 */
function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,o,r,a,l,c,u,d,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,y=_+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)a=p.snapElements[d].left,l=a+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,a-m>v||g>l+m||c-m>y||_>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-y)<=m,s=Math.abs(u-_)<=m,o=Math.abs(a-v)<=m,r=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||s||o||r,"outer"!==f.snapMode&&(n=Math.abs(c-_)<=m,s=Math.abs(u-y)<=m,o=Math.abs(a-g)<=m,r=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(n||s||o||r||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=n||s||o||r||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),/*!
 * jQuery UI Sortable @VERSION
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.mouse.js
 *  jquery.ui.widget.js
 */
function(e,t){function i(e,t,i){return e>t&&t+i>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,s=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||t+u>o&&r>t+u,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,s,o,r=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(s=e(l[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,s,o,r,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(s=e(h[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),u.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var s,o,r,a,l,c,u,d,h,p,f=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||i(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[o][c]-u)&&(h=!0,d+=this.items[o][c]),Math.abs(d-u)<r&&(r=Math.abs(d-u),a=this.items[o],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s=this.options,o=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function(e,t,i){function n(e){return e}function s(e){return decodeURIComponent(e.replace(o," "))}var o=/\+/g,r=e.cookie=function(o,a,l){if(a!==i){if(l=e.extend({},r.defaults,l),null===a&&(l.expires=-1),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setDate(u.getDate()+c)}return a=r.json?JSON.stringify(a):String(a),t.cookie=[encodeURIComponent(o),"=",r.raw?a:encodeURIComponent(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=r.raw?n:s,h=t.cookie.split("; "),p=0,f=h.length;f>p;p++){var m=h[p].split("=");if(d(m.shift())===o){var g=d(m.join("="));return r.json?JSON.parse(g):g}}return null};r.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}}(jQuery,document),!function(e,t,i){function n(e,i){var n,s=t.createElement(e||"div");for(n in i)s[n]=i[n];return s}function s(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function o(e,t,i,n){var s=["opacity",t,~~(100*e),i,n].join("-"),o=.01+i/n*100,r=Math.max(1-(1-e)/t*(100-o),e),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return h[s]||(p.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",p.cssRules.length),h[s]=1),s}function r(e,t){var n,s,o=e.style;if(o[t]!==i)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),s=0;s<d.length;s++)if(n=d[s]+t,o[n]!==i)return n}function a(e,t){for(var i in t)e.style[r(e,i)||i]=t[i];return e}function l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)e[s]===i&&(e[s]=n[s])}return e}function c(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var u,d=["webkit","Moz","ms","O"],h={},p=function(){var e=n("style",{type:"text/css"});return s(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"},m=function g(e){return this.spin?void(this.opts=l(e||{},g.defaults,f)):new g(e)};m.defaults={},l(m.prototype,{spin:function(e){this.stop();var t,i,s=this,o=s.opts,r=s.el=a(n(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),l=o.radius+o.length+o.width;if(e&&(e.insertBefore(r,e.firstChild||null),i=c(e),t=c(r),a(r,{left:("auto"==o.left?i.x-t.x+(e.offsetWidth>>1):parseInt(o.left,10)+l)+"px",top:("auto"==o.top?i.y-t.y+(e.offsetHeight>>1):parseInt(o.top,10)+l)+"px"})),r.setAttribute("aria-role","progressbar"),s.lines(r,s.opts),!u){var d=0,h=o.fps,p=h/o.speed,f=(1-o.opacity)/(p*o.trail/100),m=p/o.lines;!function g(){d++;for(var e=o.lines;e;e--){var t=Math.max(1-(d+e*m)%p*f,o.opacity);s.opacity(r,o.lines-e,t,o)}s.timeout=s.el&&setTimeout(g,~~(1e3/h))}()}return s},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=i),this},lines:function(e,t){function i(e,i){return a(n(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*l+t.rotate)+"deg) translate("+t.radius+"px,0)",borderRadius:(t.corners*t.width>>1)+"px"})}for(var r,l=0;l<t.lines;l++)r=a(n(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:u&&o(t.opacity,t.trail,l,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&s(r,a(i("#000","0 0 4px #000"),{top:"2px"})),s(e,s(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}}),function(){function e(e,t){return n("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=a(n("group"),{behavior:"url(#default#VML)"});!r(t,"transform")&&t.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(t,i){function n(){return a(e("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function o(t,o,r){s(d,s(a(n(),{rotation:360/i.lines*t+"deg",left:~~o}),s(a(e("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:r}),e("fill",{color:i.color,opacity:i.opacity}),e("stroke",{opacity:0}))))}var r,l=i.length+i.width,c=2*l,u=2*-(i.width+i.length)+"px",d=a(n(),{position:"absolute",top:u,left:u});if(i.shadow)for(r=1;r<=i.lines;r++)o(r,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(r=1;r<=i.lines;r++)o(r);return s(t,d)},m.prototype.opacity=function(e,t,i,n){var s=e.firstChild;n=n.shadow&&n.lines||0,s&&t+n<s.childNodes.length&&(s=s.childNodes[t+n],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=i))}):u=r(t,"animation")}(),"function"==typeof define&&define.amd?define(function(){return m}):e.Spinner=m}(window,document),function(e){e.spinner={},e.spinner.default_options={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:17,top:"auto",left:"auto"}}(jQuery),/*!
 * Ladda 0.7.0
 * http://lab.hakim.se/ladda
 * MIT licensed
 *
 * Copyright (C) 2013 Hakim El Hattab, http://hakim.se
 */
function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["spin"],t):e.Ladda=t(e.Spinner)}(this,function(e){"use strict";function t(e){if("undefined"==typeof e)return void console.warn("Ladda button target must be defined.");e.querySelector(".ladda-label")||(e.innerHTML='<span class="ladda-label">'+e.innerHTML+"</span>");var t=s(e),i=document.createElement("span");i.className="ladda-spinner",e.appendChild(i);var n,o={start:function(){return e.setAttribute("disabled",""),e.setAttribute("data-loading",""),clearTimeout(n),t.spin(i),this.setProgress(0),this},startAfter:function(e){return clearTimeout(n),n=setTimeout(function(){o.start()},e),this},stop:function(){return e.removeAttribute("disabled"),e.removeAttribute("data-loading"),clearTimeout(n),n=setTimeout(function(){t.stop()},1e3),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var i=e.querySelector(".ladda-progress");0===t&&i&&i.parentNode?i.parentNode.removeChild(i):(i||(i=document.createElement("div"),i.className="ladda-progress",e.appendChild(i)),i.style.width=(t||0)*e.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),e.setAttribute("disabled",""),this},isLoading:function(){return e.hasAttribute("data-loading")}};return r.push(o),o}function i(e,i){i=i||{};var n=[];"string"==typeof e?n=o(document.querySelectorAll(e)):"object"==typeof e&&"string"==typeof e.nodeName&&(n=[e]);for(var s=0,r=n.length;r>s;s++)!function(){var e=n[s];if("function"==typeof e.addEventListener){var o=t(e),r=-1;e.addEventListener("click",function(){o.startAfter(1),"number"==typeof i.timeout&&(clearTimeout(r),r=setTimeout(o.stop,i.timeout)),"function"==typeof i.callback&&i.callback.apply(null,[o])},!1)}}()}function n(){for(var e=0,t=r.length;t>e;e++)r[e].stop()}function s(t){var i,n=t.offsetHeight;n>32&&(n*=.8),t.hasAttribute("data-spinner-size")&&(n=parseInt(t.getAttribute("data-spinner-size"),10)),t.hasAttribute("data-spinner-color")&&(i=t.getAttribute("data-spinner-color"));var s=12,o=.2*n,r=.6*o,a=7>o?2:3;return new e({color:i||"#fff",lines:s,radius:o,length:r,width:a,zIndex:"initial",top:"auto",left:"auto",className:""})}function o(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}var r=[];return{bind:i,create:t,stopAll:n}}),function(e,t,i){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.qtip&&e(jQuery)}(function(n){function s(i){m={pageX:i.pageX,pageY:i.pageY,type:"mousemove",scrollX:e.pageXOffset||t.body.scrollLeft||t.documentElement.scrollLeft,scrollY:e.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop}}function o(e){var t=function(e){return e===y||"object"!=typeof e},i=function(e){return!n.isFunction(e)&&(!e&&!e.attr||e.length<1||"object"==typeof e&&!e.jquery&&!e.then)};return e&&"object"==typeof e?(t(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&((t(e.content)||e.content.jquery)&&(e.content={text:e.content}),i(e.content.text||_)&&(e.content.text=_),"title"in e.content&&(t(e.content.title)&&(e.content.title={text:e.content.title}),i(e.content.title.text||_)&&(e.content.title.text=_))),"position"in e&&t(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&t(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===v?{ready:v}:{event:e.show}),"hide"in e&&t(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&t(e.style)&&(e.style={classes:e.style}),n.each(f,function(){this.sanitize&&this.sanitize(e)}),e):_}function r(i,r,a,l){function c(e){for(var t,i=0,n=r,s=e.split(".");n=n[s[i++]];)i<s.length&&(t=n);return[t||r,s.pop()]}function u(e){return O.concat("").join(e?"-"+e+" ":" ")}function d(){var e=r.style.widget,t=J.hasClass(K);J.removeClass(K),K=e?"ui-state-disabled":"qtip-disabled",J.toggleClass(K,t),J.toggleClass("ui-helper-reset "+u(),e).toggleClass(j,r.style.def&&!e),U.content&&U.content.toggleClass(u("content"),e),U.titlebar&&U.titlebar.toggleClass(u("header"),e),U.button&&U.button.toggleClass(F+"-icon",!e)}function h(e){U.title&&(U.titlebar.remove(),U.titlebar=U.title=U.button=y,e!==_&&G.reposition())}function b(){var e=r.content.title.button,t="string"==typeof e,i=t?e:"Close tooltip";U.button&&U.button.remove(),e.jquery?U.button=e:U.button=n("<a />",{"class":"qtip-close "+(r.style.widget?"":F+"-icon"),title:i,"aria-label":i}).prepend(n("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),U.button.appendTo(U.titlebar||J).attr("role","button").click(function(e){return J.hasClass(K)||G.hide(e),_})}function w(){var e=W+"-title";U.titlebar&&h(),U.titlebar=n("<div />",{"class":F+"-titlebar "+(r.style.widget?u("header"):"")}).append(U.title=n("<div />",{id:e,"class":F+"-title","aria-atomic":v})).insertBefore(U.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){n(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){n(this).toggleClass("ui-state-hover","mouseover"===e.type)}),r.content.title.button&&b()}function x(e){var t=U.button;return G.rendered?void(e?b():t.remove()):_}function k(e,t){var s=U.title;return G.rendered&&e?(n.isFunction(e)&&(e=e.call(i,q.event,G)),e===_||!e&&""!==e?h(_):(e.jquery&&e.length>0?s.empty().append(e.css({display:"block"})):s.html(e),void(t!==_&&G.rendered&&J[0].offsetWidth>0&&G.reposition(q.event)))):_}function P(e){e&&n.isFunction(e.done)&&e.done(function(e){E(e,null,_)})}function E(e,t,s){function o(e){function t(t){t.src!==A&&-1===n.inArray(t,o)&&(o.push(t),n.data(t,"imagesLoaded",{src:t.src}),s.length===o.length&&(setTimeout(e),s.unbind(".imagesLoaded")))}var i=n(this),s=i.find("img").add(i.filter("img")),o=[];return s.length?void s.bind("load.imagesLoaded error.imagesLoaded",function(){t(event.target)}).each(function(e,i){var s=i.src,o=n.data(i,"imagesLoaded");o&&o.src===s||i.complete&&i.naturalWidth?t(i):(i.readyState||i.complete)&&(i.src=A,i.src=s)}):e()}var a=U.content;return G.rendered&&e?(n.isFunction(e)&&(e=e.call(i,q.event,G)||""),s!==_&&P(r.content.deferred),e.jquery&&e.length>0?a.empty().append(e.css({display:"block"})):a.html(e),G.rendered<0?J.queue("fx",o):(Y=0,o.call(J[0],n.noop)),G):_}function B(){function o(e){if(J.hasClass(K))return _;clearTimeout(G.timers.show),clearTimeout(G.timers.hide);var t=function(){G.toggle(v,e)};r.show.delay>0?G.timers.show=setTimeout(t,r.show.delay):t()}function l(e){if(J.hasClass(K)||V||Y)return _;var t=n(e.relatedTarget),i=t.closest(R)[0]===J[0],s=t[0]===h.show[0];if(clearTimeout(G.timers.show),clearTimeout(G.timers.hide),this!==t[0]&&"mouse"===d.target&&i||r.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(i||s))try{e.preventDefault(),e.stopImmediatePropagation()}catch(o){}else r.hide.delay>0?G.timers.hide=setTimeout(function(){G.hide(e)},r.hide.delay):G.hide(e)}function c(e){return J.hasClass(K)?_:(clearTimeout(G.timers.inactive),void(G.timers.inactive=setTimeout(function(){G.hide(e)},r.hide.inactive)))}function u(e){G.rendered&&J[0].offsetWidth>0&&G.reposition(e)}var d=r.position,h={show:r.show.target,hide:r.hide.target,viewport:n(d.viewport),document:n(t),body:n(t.body),window:n(e)},g={show:n.trim(""+r.show.event).split(" "),hide:n.trim(""+r.hide.event).split(" ")};6===f.ie;J.bind("mouseenter"+Q+" mouseleave"+Q,function(e){var t="mouseenter"===e.type;t&&G.focus(e),J.toggleClass(L,t)}),/mouse(out|leave)/i.test(r.hide.event)&&"window"===r.hide.leave&&h.document.bind("mouseout"+Q+" blur"+Q,function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||G.hide(e)}),r.hide.fixed?(h.hide=h.hide.add(J),J.bind("mouseover"+Q,function(){J.hasClass(K)||clearTimeout(G.timers.hide)})):/mouse(over|enter)/i.test(r.show.event)&&h.hide.bind("mouseleave"+Q,function(e){clearTimeout(G.timers.show)}),(""+r.hide.event).indexOf("unfocus")>-1&&d.container.closest("html").bind("mousedown"+Q+" touchstart"+Q,function(e){var t=n(e.target),s=G.rendered&&!J.hasClass(K)&&J[0].offsetWidth>0,o=t.parents(R).filter(J[0]).length>0;t[0]===i[0]||t[0]===J[0]||o||i.has(t[0]).length||!s||G.hide(e)}),"number"==typeof r.hide.inactive&&(h.show.bind("qtip-"+a+"-inactive",c),n.each(p.inactiveEvents,function(e,t){h.hide.add(U.tooltip).bind(t+Q+"-inactive",c)})),n.each(g.hide,function(e,t){var i=n.inArray(t,g.show),s=n(h.hide);i>-1&&s.add(h.show).length===s.length||"unfocus"===t?(h.show.bind(t+Q,function(e){J[0].offsetWidth>0?l(e):o(e)}),delete g.show[i]):h.hide.bind(t+Q,l)}),n.each(g.show,function(e,t){h.show.bind(t+Q,o)}),"number"==typeof r.hide.distance&&h.show.add(J).bind("mousemove"+Q,function(e){var t=q.origin||{},i=r.hide.distance,n=Math.abs;(n(e.pageX-t.pageX)>=i||n(e.pageY-t.pageY)>=i)&&G.hide(e)}),"mouse"===d.target&&(h.show.bind("mousemove"+Q,s),d.adjust.mouse&&(r.hide.event&&(J.bind("mouseleave"+Q,function(e){(e.relatedTarget||e.target)!==h.show[0]&&G.hide(e)}),U.target.bind("mouseenter"+Q+" mouseleave"+Q,function(e){q.onTarget="mouseenter"===e.type})),h.document.bind("mousemove"+Q,function(e){G.rendered&&q.onTarget&&!J.hasClass(K)&&J[0].offsetWidth>0&&G.reposition(e||m)}))),(d.adjust.resize||h.viewport.length)&&(n.event.special.resize?h.viewport:h.window).bind("resize"+Q,u),d.adjust.scroll&&h.window.add(d.container).bind("scroll"+Q,u)}function $(){var i=[r.show.target[0],r.hide.target[0],G.rendered&&U.tooltip[0],r.position.container[0],r.position.viewport[0],r.position.container.closest("html")[0],e,t];G.rendered?n([]).pushStack(n.grep(i,function(e){return"object"==typeof e})).unbind(Q):r.show.target.unbind(Q+"-create")}var U,q,G=this,W=(t.body,F+"-"+a),V=0,Y=0,J=n(),Q=".qtip-"+a,K="qtip-disabled";G.id=a,G.rendered=_,G.destroyed=_,G.elements=U={target:i},G.timers={img:{}},G.options=r,G.checks={},G.plugins={},G.cache=q={event:{},target:n(),disabled:_,attr:l,onTarget:_,lastClass:""},G.checks.builtin={"^id$":function(e,t,i){var s=i===v?p.nextid:i,o=F+"-"+s;s!==_&&s.length>0&&!n("#"+o).length&&(J[0].id=o,U.content[0].id=o+"-content",U.title[0].id=o+"-title")},"^content.text$":function(e,t,i){E(r.content.text)},"^content.deferred$":function(e,t,i){P(r.content.deferred)},"^content.title.text$":function(e,t,i){return i?(!U.title&&i&&w(),void k(i)):h()},"^content.title.button$":function(e,t,i){x(i)},"^position.(my|at)$":function(e,t,i){"string"==typeof i&&(e[t]=new f.Corner(i))},"^position.container$":function(e,t,i){G.rendered&&J.appendTo(i)},"^show.ready$":function(){G.rendered?G.toggle(v):G.render(1)},"^style.classes$":function(e,t,i){J.attr("class",F+" qtip "+i)},"^style.width|height":function(e,t,i){J.css(t,i)},"^style.widget|content.title":d,"^events.(render|show|move|hide|focus|blur)$":function(e,t,i){J[(n.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var e=r.position;J.attr("tracking","mouse"===e.target&&e.adjust.mouse),$(),B()}},n.extend(G,{_triggerEvent:function(e,t,i){var s=n.Event("tooltip"+e);return s.originalEvent=(i?n.extend({},i):y)||q.event||y,J.trigger(s,[G].concat(t||[])),!s.isDefaultPrevented()},render:function(e){if(G.rendered)return G;var t=r.content.text,s=r.content.title,o=r.position;return n.attr(i[0],"aria-describedby",W),J=U.tooltip=n("<div/>",{id:W,"class":[F,j,r.style.classes,F+"-pos-"+r.position.my.abbrev()].join(" "),width:r.style.width||"",height:r.style.height||"",tracking:"mouse"===o.target&&o.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":_,"aria-describedby":W+"-content","aria-hidden":v}).toggleClass(K,q.disabled).data("qtip",G).appendTo(r.position.container).append(U.content=n("<div />",{"class":F+"-content",id:W+"-content","aria-atomic":v})),G.rendered=-1,V=1,s.text?(w(),n.isFunction(s.text)||k(s.text,_)):s.button&&b(),(!n.isFunction(t)||t.then)&&E(t,_),G.rendered=v,d(),n.each(r.events,function(e,t){n.isFunction(t)&&J.bind("toggle"===e?"tooltipshow tooltiphide":"tooltip"+e,t)}),n.each(f,function(){"render"===this.initialize&&this(G)}),B(),J.queue("fx",function(t){G._triggerEvent("render"),V=0,(r.show.ready||e)&&G.toggle(v,q.event,_),t()}),G},get:function(e){var t,i;switch(e.toLowerCase()){case"dimensions":t={height:J.outerHeight(_),width:J.outerWidth(_)};break;case"offset":t=f.offset(J,r.position.container);break;default:i=c(e.toLowerCase()),t=i[0][i[1]],t=t.precedance?t.string():t}return t},set:function(e,t){function i(e,t){var i,n,s;for(i in u)for(n in u[i])(s=new RegExp(n,"i").exec(e))&&(t.push(s),u[i][n].apply(G,t))}var s,a=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,l=_,u=G.checks;return"string"==typeof e?(s=e,e={},e[s]=t):e=n.extend(v,{},e),n.each(e,function(t,i){var s,o=c(t.toLowerCase());s=o[0][o[1]],o[0][o[1]]="object"==typeof i&&i.nodeType?n(i):i,e[t]=[o[0],o[1],i,s],l=a.test(t)||l}),o(r),V=1,n.each(e,i),V=0,G.rendered&&J[0].offsetWidth>0&&l&&G.reposition("mouse"===r.position.target?y:q.event),G},toggle:function(e,i){function o(){e?(f.ie&&J[0].style.removeAttribute("filter"),J.css("overflow",""),"string"==typeof c.autofocus&&n(c.autofocus,J).focus(),c.target.trigger("qtip-"+a+"-inactive")):J.css({display:"",visibility:"",opacity:"",left:"",top:""}),G._triggerEvent(e?"visible":"hidden")}if(i){if(/over|enter/.test(i.type)&&/out|leave/.test(q.event.type)&&r.show.target.add(i.target).length===r.show.target.length&&J.has(i.relatedTarget).length)return G;q.event=n.extend({},i)}if(!G.rendered)return e?G.render(1):G;var l=e?"show":"hide",c=r[l],u=(r[e?"hide":"show"],r.position),d=r.content,h=J.css("width"),p=J[0].offsetWidth>0,y=e||1===c.target.length,b=!i||c.target.length<2||q.target[0]===i.target;return(typeof e).search("boolean|number")&&(e=!p),!J.is(":animated")&&p===e&&b?G:G._triggerEvent(l,[90])?(n.attr(J[0],"aria-hidden",!e),e?(q.origin=n.extend({},m),G.focus(i),n.isFunction(d.text)&&E(d.text,_),n.isFunction(d.title.text)&&k(d.title.text,_),!g&&"mouse"===u.target&&u.adjust.mouse&&(n(t).bind("mousemove.qtip",s),g=v),h||J.css("width",J.outerWidth()),G.reposition(i,arguments[2]),h||J.css("width",""),c.solo&&("string"==typeof c.solo?n(c.solo):n(R,c.solo)).not(J).not(c.target).qtip("hide",n.Event("tooltipsolo"))):(clearTimeout(G.timers.show),delete q.origin,g&&!n(R+'[tracking="true"]:visible',c.solo).not(J).length&&(n(t).unbind("mousemove.qtip"),g=_),G.blur(i)),c.effect===_||y===_?(J[l](),o.call(J)):n.isFunction(c.effect)?(J.stop(1,1),c.effect.call(J,G),J.queue("fx",function(e){o(),e()})):J.fadeTo(90,e?1:0,o),e&&c.target.trigger("qtip-"+a+"-inactive"),G):G},show:function(e){return G.toggle(v,e)},hide:function(e){return G.toggle(_,e)},focus:function(e){if(!G.rendered)return G;var t=n(R),i=parseInt(J[0].style.zIndex,10),s=p.zindex+t.length,o=n.extend({},e);return J.hasClass(z)||G._triggerEvent("focus",[s],o)&&(i!==s&&(t.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+z).qtip("blur",o)),J.addClass(z)[0].style.zIndex=s),G},blur:function(e){return J.removeClass(z),G._triggerEvent("blur",[J.css("zIndex")],e),G},reposition:function(i,s){if(!G.rendered||V)return G;V=1;var o,a,l=r.position.target,c=r.position,u=c.my,d=c.at,h=c.adjust,p=h.method.split(" "),g=J.outerWidth(_),v=J.outerHeight(_),y=0,b=0,w=J.css("position"),x=c.viewport,k={left:0,top:0},P=c.container,E=J[0].offsetWidth>0,A=i&&"scroll"===i.type,F=n(e);if(n.isArray(l)&&2===l.length)d={x:C,y:S},k={left:l[0],top:l[1]};else if("mouse"===l&&(i&&i.pageX||q.event.pageX))d={x:C,y:S},i=!m||!m.pageX||!h.mouse&&i&&i.pageX?(!i||"resize"!==i.type&&"scroll"!==i.type?i&&i.pageX&&"mousemove"===i.type?i:(!h.mouse||r.show.distance)&&q.origin&&q.origin.pageX?q.origin:i:q.event)||i||q.event||m||{}:{pageX:m.pageX,pageY:m.pageY},"static"!==w&&(k=P.offset()),k={left:i.pageX-k.left,top:i.pageY-k.top},h.mouse&&A&&(k.left-=m.scrollX-F.scrollLeft(),k.top-=m.scrollY-F.scrollTop());else{if("event"===l&&i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?q.target=n(i.target):"event"!==l&&(q.target=n(l.jquery?l:U.target)),l=q.target,l=n(l).eq(0),0===l.length)return G;l[0]===t||l[0]===e?(y=f.iOS?e.innerWidth:l.width(),b=f.iOS?e.innerHeight:l.height(),l[0]===e&&(k={top:(x||l).scrollTop(),left:(x||l).scrollLeft()})):f.imagemap&&l.is("area")?o=f.imagemap(G,l,d,f.viewport?p:_):f.svg&&l[0].ownerSVGElement?o=f.svg(G,l,d,f.viewport?p:_):(y=l.outerWidth(_),b=l.outerHeight(_),k=f.offset(l,P)),o&&(y=o.width,b=o.height,a=o.offset,k=o.position),(f.iOS>3.1&&f.iOS<4.1||f.iOS>=4.3&&f.iOS<4.33||!f.iOS&&"fixed"===w)&&(k.left-=F.scrollLeft(),k.top-=F.scrollTop()),k.left+=d.x===M?y:d.x===D?y/2:0,k.top+=d.y===T?b:d.y===D?b/2:0}return k.left+=h.x+(u.x===M?-g:u.x===D?-g/2:0),k.top+=h.y+(u.y===T?-v:u.y===D?-v/2:0),f.viewport?(k.adjusted=f.viewport(G,k,c,y,b,g,v),a&&k.adjusted.left&&(k.left+=a.left),a&&k.adjusted.top&&(k.top+=a.top)):k.adjusted={left:0,top:0},G._triggerEvent("move",[k,x.elem||x],i)?(delete k.adjusted,s===_||!E||isNaN(k.left)||isNaN(k.top)||"mouse"===l||!n.isFunction(c.effect)?J.css(k):n.isFunction(c.effect)&&(c.effect.call(J,G,n.extend({},k)),J.queue(function(e){n(this).css({opacity:"",height:""}),f.ie&&this.style.removeAttribute("filter"),e()})),V=0,G):G},disable:function(e){return"boolean"!=typeof e&&(e=!(J.hasClass(K)||q.disabled)),G.rendered?(J.toggleClass(K,e),n.attr(J[0],"aria-disabled",e)):q.disabled=!!e,G},enable:function(){return G.disable(_)},destroy:function(e){function t(){var e=i[0],t=n.attr(e,H),s=i.data("qtip");G.rendered&&(n.each(G.plugins,function(e){this.destroy&&this.destroy(),delete G.plugins[e]}),J.stop(1,0).find("*").remove().end().remove()),clearTimeout(G.timers.show),clearTimeout(G.timers.hide),$(),s&&G!==s||(i.removeData("qtip").removeAttr(I),r.suppress&&t&&(i.attr("title",t),i.removeAttr(H)),i.removeAttr("aria-describedby")),i.unbind(".qtip-"+a),delete N[G.id],delete G.options,delete G.elements,delete G.cache,delete G.timers,delete G.checks}if(!G.destroyed)return G.destroyed=!(G.rendered=_),e===v?t():(J.bind("tooltiphidden",t),G.hide()),i}})}function a(e,i,s){var a,l,c,u,d,h=n(t.body),m=e[0]===t?h:e,g=e.metadata?e.metadata(s.metadata):y,b="html5"===s.metadata.type&&g?g[s.metadata.name]:y,w=e.data(s.metadata.name||"qtipopts");try{w="string"==typeof w?n.parseJSON(w):w}catch(x){}if(u=n.extend(v,{},p.defaults,s,"object"==typeof w?o(w):y,o(b||g)),l=u.position,u.id=i,"boolean"==typeof u.content.text){if(c=e.attr(u.content.attr),u.content.attr===_||!c)return _;u.content.text=c}if(l.container.length||(l.container=h),l.target===_&&(l.target=m),u.show.target===_&&(u.show.target=m),u.show.solo===v&&(u.show.solo=l.container.closest("body")),u.hide.target===_&&(u.hide.target=m),u.position.viewport===v&&(u.position.viewport=l.container),l.container=l.container.eq(0),l.at=new f.Corner(l.at),l.my=new f.Corner(l.my),e.data("qtip"))if(u.overwrite)e.qtip("destroy");else if(u.overwrite===_)return _;return e.attr(I,!0),u.suppress&&(d=e.attr("title"))&&e.removeAttr("title").attr(H,d).attr("title",""),a=new r(e,u,i,!!c),e.data("qtip",a),e.one("remove.qtip-"+i+" removeqtip.qtip-"+i,function(){var e;(e=n(this).data("qtip"))&&e.destroy()}),a}function l(e){var t,i=this,s=e.elements.tooltip,o=e.options.content.ajax,r=p.defaults.content.ajax,a=v,l=_;e.checks.ajax={"^content.ajax":function(e,t,n){"ajax"===t&&(o=n),"once"===t?i.init():o&&o.url?i.load():s.unbind(U)}},n.extend(i,{init:function(){return o&&o.url&&s.unbind(U)[o.once?"one":"bind"]("tooltipshow"+U,i.load),i},load:function(s){function c(){var t;e.destroyed||(a=_,m&&(l=v,e.show(s.originalEvent)),(t=r.complete||o.complete)&&n.isFunction(t)&&t.apply(o.context||e,arguments))}function u(t,i,s){var a;e.destroyed||(h&&"string"==typeof t&&(t=n("<div/>").append(t.replace(q,"")).find(h)),(a=r.success||o.success)&&n.isFunction(a)?a.call(o.context||e,t,i,s):e.set("content.text",t))}function d(t,i,n){e.destroyed||0===t.status||e.set("content.text",i+": "+n)}if(l)return void(l=_);var h,p=o.url.lastIndexOf(" "),f=o.url,m=!o.loading&&a;if(m)try{s.preventDefault()}catch(g){}else if(s&&s.isDefaultPrevented())return i;t&&t.abort&&t.abort(),p>-1&&(h=f.substr(p),f=f.substr(0,p)),t=n.ajax(n.extend({error:r.error||d,context:e},o,{url:f,success:u,complete:c}))},destroy:function(){t&&t.abort&&t.abort(),e.destroyed=v}}),i.init()}function c(e,t,i){var n=Math.ceil(t/2),s=Math.ceil(i/2),o={bottomright:[[0,0],[t,i],[t,0]],bottomleft:[[0,0],[t,0],[0,i]],topright:[[0,i],[t,0],[t,i]],topleft:[[0,0],[0,i],[t,i]],topcenter:[[0,i],[n,0],[t,i]],bottomcenter:[[0,0],[t,0],[n,i]],rightcenter:[[0,0],[t,s],[0,i]],leftcenter:[[t,0],[t,i],[0,s]]};return o.lefttop=o.bottomright,o.righttop=o.bottomleft,o.leftbottom=o.topright,o.rightbottom=o.topleft,o[e.string()]}function u(e,t){function s(e){var t=F.is(":visible");F.show(),e(),F.toggle(t)}function o(){N.width=P.height,N.height=P.width}function r(){N.width=P.width,N.height=P.height}function a(t,n,s,o){if(A.tip){var r,a,l=g.corner.clone(),c=s.adjusted,d=e.options.position.adjust.method.split(" "),h=d[0],p=d[1]||d[0],f={left:_,top:_,x:0,y:0},m={};g.corner.fixed!==v&&(h===E&&l.precedance===b&&c.left&&l.y!==D?l.precedance=l.precedance===b?w:b:h!==E&&c.left&&(l.x=l.x===D?c.left>0?C:M:l.x===C?M:C),p===E&&l.precedance===w&&c.top&&l.x!==D?l.precedance=l.precedance===w?b:w:p!==E&&c.top&&(l.y=l.y===D?c.top>0?S:T:l.y===S?T:S),l.string()===I.corner.string()||I.top===c.top&&I.left===c.left||g.update(l,_)),r=g.position(l,c),r[l.x]+=u(l,l.x),r[l.y]+=u(l,l.y),r.right!==i&&(r.left=-r.right),r.bottom!==i&&(r.top=-r.bottom),r.user=Math.max(0,P.offset),(f.left=h===E&&!!c.left)&&(l.x===D?m["margin-left"]=f.x=r["margin-left"]-c.left:(a=r.right!==i?[c.left,-r.left]:[-c.left,r.left],(f.x=Math.max(a[0],a[1]))>a[0]&&(s.left-=c.left,f.left=_),m[r.right!==i?M:C]=f.x)),(f.top=p===E&&!!c.top)&&(l.y===D?m["margin-top"]=f.y=r["margin-top"]-c.top:(a=r.bottom!==i?[c.top,-r.top]:[-c.top,r.top],(f.y=Math.max(a[0],a[1]))>a[0]&&(s.top-=c.top,f.top=_),m[r.bottom!==i?T:S]=f.y)),A.tip.css(m).toggle(!(f.x&&f.y||l.x===D&&f.y||l.y===D&&f.x)),s.left-=r.left.charAt?r.user:h!==E||f.top||!f.left&&!f.top?r.left:0,s.top-=r.top.charAt?r.user:p!==E||f.left||!f.left&&!f.top?r.top:0,I.left=c.left,I.top=c.top,I.corner=l.clone()}}function l(){var t=P.corner,i=e.options.position,n=i.at,s=i.my.string?i.my.string():i.my;return t===_||s===_&&n===_?_:(t===v?g.corner=new f.Corner(s):t.string||(g.corner=new f.Corner(t),g.corner.fixed=v),I.corner=new f.Corner(g.corner.string()),"centercenter"!==g.corner.string())}function u(e,t,i){t=t?t:e[e.precedance];var n,o=A.titlebar&&e.y===S,r=o?A.titlebar:F,a="border-"+t+"-width",l=function(e){return parseInt(e.css(a),10)};return s(function(){n=(i?l(i):l(A.content)||l(r)||l(F))||0}),n}function d(e){var t,i=A.titlebar&&e.y===S,n=i?A.titlebar:A.content,o="-moz-",r="-webkit-",a="border-radius-"+e.y+e.x,l="border-"+e.y+"-"+e.x+"-radius",c=function(e){return parseInt(n.css(e),10)||parseInt(F.css(e),10)};return s(function(){t=c(l)||c(a)||c(o+l)||c(o+a)||c(r+l)||c(r+a)||0}),t}function h(e){function t(e,t,i){var n=e.css(t)||c;return i&&n===e.css(i)?_:r.test(n)?_:n}var i=A.tip.css("cssText",""),o=e||g.corner,r=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,a="border-"+o[o.precedance]+"-color",l="background-color",c="transparent",u=" !important",d=A.titlebar,h=d&&(o.y===S||o.y===D&&i.position().top+N.height/2+P.offset<d.outerHeight(v)),p=h?d:A.content;s(function(){O.fill=t(i,l)||t(p,l)||t(A.content,l)||t(F,l)||i.css(l),O.border=t(i,a,"color")||t(p,a,"color")||t(A.content,a,"color")||t(F,a,"color")||F.css(a),n("*",i).add(i).css("cssText",l+":"+c+u+";border:0"+u+";")})}function p(e){var t,i,n,s=e.precedance===w,o=N[s?x:k],r=N[s?k:x],a=e.string().indexOf(D)>-1,l=o*(a?.5:1),c=Math.pow,u=Math.round,d=Math.sqrt(c(l,2)+c(r,2)),h=[R/l*d,R/r*d];return h[2]=Math.sqrt(c(h[0],2)-c(R,2)),h[3]=Math.sqrt(c(h[1],2)-c(R,2)),t=d+h[2]+h[3]+(a?0:h[0]),i=t/d,n=[u(i*r),u(i*o)],{height:n[s?0:1],width:n[s?1:0]}}function m(e,t,i){return"<qvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'}var g=this,P=e.options.style.tip,A=e.elements,F=A.tooltip,I={top:0,left:0},N={width:P.width,height:P.height},O={},R=P.border||0;g.corner=y,g.mimic=y,g.border=R,g.offset=P.offset,g.size=N,e.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){g.init()||g.destroy(),e.reposition()},"^style.tip.(height|width)$":function(){N={width:P.width,height:P.height},g.create(),g.update(),e.reposition()},"^content.title.text|style.(classes|widget)$":function(){A.tip&&A.tip.length&&g.update()}},n.extend(g,{init:function(){var e=l()&&(V||f.ie);return e&&(g.create(),g.update(),F.unbind(W).bind("tooltipmove"+W,a)),e},create:function(){var e,t=N.width,i=N.height;A.tip&&A.tip.remove(),A.tip=n("<div />",{"class":"qtip-tip"}).css({width:t,height:i}).prependTo(F),V?n("<canvas />").appendTo(A.tip)[0].getContext("2d").save():(e=m("shape",'coordorigin="0,0"',"position:absolute;"),A.tip.html(e+e),n("*",A.tip).bind("click"+W+" mousedown"+W,function(e){e.stopPropagation()}))},update:function(e,t){var i,s,a,l,d,x=A.tip,k=x.children(),E=N.width,j=N.height,z=P.mimic,L=Math.round;e||(e=I.corner||g.corner),z===_?z=e:(z=new f.Corner(z),z.precedance=e.precedance,"inherit"===z.x?z.x=e.x:"inherit"===z.y?z.y=e.y:z.x===z.y&&(z[e.precedance]=e[e.precedance])),i=z.precedance,e.precedance===b?o():r(),A.tip.css({width:E=N.width,height:j=N.height}),h(e),"transparent"!==O.border?(R=u(e,y),0===P.border&&R>0&&(O.fill=O.border),g.border=R=P.border!==v?P.border:R):g.border=R=0,a=c(z,E,j),g.size=d=p(e),x.css(d).css("line-height",d.height+"px"),l=e.precedance===w?[L(z.x===C?R:z.x===M?d.width-E-R:(d.width-E)/2),L(z.y===S?d.height-j:0)]:[L(z.x===C?d.width-E:0),L(z.y===S?R:z.y===T?d.height-j-R:(d.height-j)/2)],V?(k.attr(d),s=k[0].getContext("2d"),s.restore(),s.save(),s.clearRect(0,0,3e3,3e3),s.fillStyle=O.fill,s.strokeStyle=O.border,s.lineWidth=2*R,s.lineJoin="miter",s.miterLimit=100,s.translate(l[0],l[1]),s.beginPath(),s.moveTo(a[0][0],a[0][1]),s.lineTo(a[1][0],a[1][1]),s.lineTo(a[2][0],a[2][1]),s.closePath(),R&&("border-box"===F.css("background-clip")&&(s.strokeStyle=O.fill,s.stroke()),s.strokeStyle=O.border,s.stroke()),s.fill()):(a="m"+a[0][0]+","+a[0][1]+" l"+a[1][0]+","+a[1][1]+" "+a[2][0]+","+a[2][1]+" xe",l[2]=R&&/^(r|b)/i.test(e.string())?8===f.ie?2:1:0,k.css({coordsize:E+R+" "+(j+R),antialias:""+(z.string().indexOf(D)>-1),left:l[0],top:l[1],width:E+R,height:j+R}).each(function(e){var t=n(this);t[t.prop?"prop":"attr"]({coordsize:E+R+" "+(j+R),path:a,fillcolor:O.fill,filled:!!e,stroked:!e}).toggle(!(!R&&!e)),e||""!==t.html()||t.html(m("stroke",'weight="'+2*R+'px" color="'+O.border+'" miterlimit="1000" joinstyle="miter"'))})),setTimeout(function(){A.tip.css({display:"inline-block",visibility:"visible"})},1),t!==_&&g.position(e)},position:function(e){var t,i,s,o=A.tip,r={},a=Math.max(0,P.offset);return P.corner!==_&&o?(e=e||g.corner,t=e.precedance,i=p(e),s=[e.x,e.y],t===b&&s.reverse(),n.each(s,function(n,s){var o,l,c;s===D?(o=t===w?C:S,r[o]="50%",r["margin-"+o]=-Math.round(i[t===w?x:k]/2)+a):(o=u(e,s),l=u(e,s,A.content),c=d(e),r[s]=n?l:a+(c>o?c:-o))}),r[e[t]]-=i[t===b?x:k],o.css({top:"",bottom:"",left:"",right:"",margin:""}).css(r),r):_},destroy:function(){F.unbind(W),A.tip&&A.tip.find("*").remove().end().remove(),delete g.corner,delete g.mimic,delete g.size}}),g.init()}function d(e){var i,s=this,o=e.options.show.modal,r=e.elements,a=r.tooltip,l=X+e.id;e.checks.modal={"^show.modal.(on|blur)$":function(){s.destroy(),s.init(),i.toggle(a.is(":visible"))}},n.extend(s,{init:function(){return o.on?(i=r.overlay=J.elem,a.attr(Q,v).css("z-index",f.modal.zindex+n(K).length).bind("tooltipshow"+l+" tooltiphide"+l,function(e,t,o){var r=e.originalEvent;if(e.target===a[0])if(r&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(r.type)&&n(r.relatedTarget).closest(i[0]).length)try{e.preventDefault()}catch(l){}else(!r||r&&!r.solo)&&s.toggle(e,"tooltipshow"===e.type,o)}).bind("tooltipfocus"+l,function(e,t){if(!e.isDefaultPrevented()&&e.target===a[0]){var s=n(K),o=f.modal.zindex+s.length,r=parseInt(a[0].style.zIndex,10);i[0].style.zIndex=o-1,s.each(function(){this.style.zIndex>r&&(this.style.zIndex-=1)}),s.filter("."+z).qtip("blur",e.originalEvent),a.addClass(z)[0].style.zIndex=o,J.update(t);try{e.preventDefault()}catch(l){}}}).bind("tooltiphide"+l,function(e){e.target===a[0]&&n(K).filter(":visible").not(a).last().qtip("focus",e)}),s):s},toggle:function(t,i,n){return t&&t.isDefaultPrevented()?s:(J.toggle(e,!!i,n),s)},destroy:function(){n([t,a]).removeAttr(Q).unbind(l),J.toggle(e,_),delete r.overlay}}),s.init()}function h(i){var s,o=this,r=i.elements,a=i.options,l=r.tooltip,c=".ie6-"+i.id,u=n("select, object").length<1,d=0,h=_;i.checks.ie6={"^content|style$":function(e,t,i){redraw()}},n.extend(o,{init:function(){var i,a=n(e);u&&(r.bgiframe=n('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),r.bgiframe.appendTo(l),l.bind("tooltipmove"+c,o.adjustBGIFrame)),s=n("<div/>",{id:"qtip-rcontainer"}).appendTo(t.body),o.redraw(),r.overlay&&!h&&(i=function(){r.overlay[0].style.top=a.scrollTop()+"px"},a.bind("scroll.qtip-ie6, resize.qtip-ie6",i),i(),r.overlay.addClass("qtipmodal-ie6fix"),h=v)},adjustBGIFrame:function(){var e,t,n=i.get("dimensions"),s=i.plugins.tip,o=r.tip;t=parseInt(l.css("border-left-width"),10)||0,t={left:-t,top:-t},s&&o&&(e="x"===s.corner.precedance?["width","left"]:["height","top"],t[e[1]]-=o[e[0]]()),r.bgiframe.css(t).css(n)},redraw:function(){if(i.rendered<1||d)return o;var e,t,n,r,c=a.style,u=a.position.container;return d=1,c.height&&l.css(k,c.height),c.width?l.css(x,c.width):(l.css(x,"").appendTo(s),t=l.width(),1>t%2&&(t+=1),n=l.css("max-width")||"",r=l.css("min-width")||"",e=(n+r).indexOf("%")>-1?u.width()/100:0,n=(n.indexOf("%")>-1?e:1)*parseInt(n,10)||t,r=(r.indexOf("%")>-1?e:1)*parseInt(r,10)||0,t=n+r?Math.min(Math.max(t,r),n):t,l.css(x,Math.round(t)).appendTo(u)),d=0,o},destroy:function(){u&&r.bgiframe.remove(),l.unbind(c)}}),o.init()}var p,f,m,g,v=!0,_=!1,y=null,b="x",w="y",x="width",k="height",S="top",C="left",T="bottom",M="right",D="center",P="flipinvert",E="shift",A="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",F="qtip",I="data-hasqtip",N={},O=["ui-widget","ui-tooltip"],R="div.qtip."+F,j=F+"-default",z=F+"-focus",L=F+"-hover",B="_replacedByqTip",H="oldtitle";p=n.fn.qtip=function(e,t,s){var r=(""+e).toLowerCase(),a=y,l=n.makeArray(arguments).slice(1),c=l[l.length-1],u=this[0]?n.data(this[0],"qtip"):y;return!arguments.length&&u||"api"===r?u:"string"==typeof e?(this.each(function(){var e=n.data(this,"qtip");if(!e)return v;if(c&&c.timeStamp&&(e.cache.event=c),"option"!==r&&"options"!==r||!t)e[r]&&e[r].apply(e[r],l);else{if(!n.isPlainObject(t)&&s===i)return a=e.get(t),_;e.set(t,s)}}),a!==y?a:this):"object"!=typeof e&&arguments.length?void 0:(u=o(n.extend(v,{},e)),p.bind.call(this,u,c))},p.bind=function(e,t){return this.each(function(o){function r(e){function t(){h.render("object"==typeof e||l.show.ready),c.show.add(c.hide).unbind(d)}return h.cache.disabled?_:(h.cache.event=n.extend({},e),h.cache.target=e?n(e.target):[i],void(l.show.delay>0?(clearTimeout(h.timers.show),h.timers.show=setTimeout(t,l.show.delay),u.show!==u.hide&&c.hide.bind(u.hide,function(){clearTimeout(h.timers.show)})):t()))}var l,c,u,d,h,m;return m=n.isArray(e.id)?e.id[o]:e.id,m=!m||m===_||m.length<1||N[m]?p.nextid++:N[m]=m,d=".qtip-"+m+"-create",h=a(n(this),m,e),h===_?v:(l=h.options,n.each(f,function(){"initialize"===this.initialize&&this(h)}),c={show:l.show.target,hide:l.hide.target},u={show:n.trim(""+l.show.event).replace(/ /g,d+" ")+d,hide:n.trim(""+l.hide.event).replace(/ /g,d+" ")+d},/mouse(over|enter)/i.test(u.show)&&!/mouse(out|leave)/i.test(u.hide)&&(u.hide+=" mouseleave"+d),c.show.bind("mousemove"+d,function(e){s(e),h.cache.onTarget=v}),c.show.bind(u.show,r),void((l.show.ready||l.prerender)&&r(t)))})},f=p.plugins={Corner:function(e){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,D).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var t=e.charAt(0);this.precedance="t"===t||"b"===t?w:b,this.string=function(){return this.precedance===w?this.y+this.x:this.x+this.y},this.abbrev=function(){var e=this.x.substr(0,1),t=this.y.substr(0,1);return e===t?e:this.precedance===w?t+e:e+t},this.invertx=function(e){this.x=this.x===C?M:this.x===M?C:e||this.x},this.inverty=function(e){this.y=this.y===S?T:this.y===T?S:e||this.y},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone,invertx:this.invertx,inverty:this.inverty
}}},offset:function(e,i){function s(e,t){l.left+=t*e.scrollLeft(),l.top+=t*e.scrollTop()}var o,r,a,l=e.offset(),c=e.closest("body"),u=f.ie&&"CSS1Compat"!==t.compatMode,d=i;if(d){do"static"!==d.css("position")&&(r=d.position(),l.left-=r.left+(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("marginLeft"),10)||0),l.top-=r.top+(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("marginTop"),10)||0),o||"hidden"===(a=d.css("overflow"))||"visible"===a||(o=d));while((d=n(d[0].offsetParent)).length);(o&&o[0]!==c[0]||u)&&s(o||c,1)}return l},ie:function(){for(var e=3,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];);return e>4?e:_}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||_,fn:{attr:function(e,t){if(this.length){var i=this[0],s="title",o=n.data(i,"qtip");if(e===s&&o&&"object"==typeof o&&o.options.suppress)return arguments.length<2?n.attr(i,H):(o&&o.options.content.attr===s&&o.cache.attr&&o.set("content.text",t),this.attr(H,t))}return n.fn["attr"+B].apply(this,arguments)},clone:function(e){var t=(n([]),n.fn["clone"+B].apply(this,arguments));return e||t.filter("["+H+"]").attr("title",function(){return n.attr(this,H)}).removeAttr(H),t}}},n.each(f.fn,function(e,t){if(!t||n.fn[e+B])return v;var i=n.fn[e+B]=n.fn[e];n.fn[e]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}}),n.ui||(n["cleanData"+B]=n.cleanData,n.cleanData=function(e){for(var t,s=0;(t=e[s])!==i&&t.getAttribute(I);s++)try{n(t).triggerHandler("removeqtip")}catch(o){}n["cleanData"+B](e)}),p.version="@VERSION",p.nextid=0,p.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),p.zindex=15e3,p.defaults={prerender:_,id:_,overwrite:v,suppress:v,content:{text:v,attr:"title",deferred:_,title:{text:_,button:_}},position:{my:"top left",at:"bottom right",target:_,container:_,viewport:_,adjust:{x:0,y:0,mouse:v,scroll:v,resize:v,method:"flipinvert flipinvert"},effect:function(e,t,i){n(this).animate(t,{duration:200,queue:_})}},show:{target:_,event:"mouseenter",effect:v,delay:90,solo:_,ready:_,autofocus:_},hide:{target:_,event:"mouseleave",effect:v,delay:0,fixed:_,inactive:_,leave:"window",distance:_},style:{classes:"",widget:_,width:_,height:_,def:v},events:{render:y,move:y,show:y,hide:y,toggle:y,visible:y,hidden:y,focus:y,blur:y}},f.svg=function(e,i,s,o){for(var r,a,l,c,u,d=n(t),h=i[0],p={width:0,height:0,position:{top:1e10,left:1e10}};!h.getBBox;)h=h.parentNode;if(h.getBBox&&h.parentNode){if(r=h.getBBox(),a=h.getScreenCTM(),l=h.farthestViewportElement||h,!l.createSVGPoint)return p;c=l.createSVGPoint(),c.x=r.x,c.y=r.y,u=c.matrixTransform(a),p.position.left=u.x,p.position.top=u.y,c.x+=r.width,c.y+=r.height,u=c.matrixTransform(a),p.width=u.x-p.position.left,p.height=u.y-p.position.top,p.position.left+=d.scrollLeft(),p.position.top+=d.scrollTop()}return p};var $,U=".qtip-ajax",q=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;$=f.ajax=function(e){var t=e.plugins.ajax;return"object"==typeof t?t:e.plugins.ajax=new l(e)},$.initialize="render",$.sanitize=function(e){var t,i=e.content;i&&"ajax"in i&&(t=i.ajax,"object"!=typeof t&&(t=e.content.ajax={url:t}),"boolean"!=typeof t.once&&t.once&&(t.once=!!t.once))},n.extend(v,p.defaults,{content:{ajax:{loading:v,once:v}}});var G,W=".qtip-tip",V=!!t.createElement("canvas").getContext;G=f.tip=function(e){var t=e.plugins.tip;return"object"==typeof t?t:e.plugins.tip=new u(e)},G.initialize="render",G.sanitize=function(e){var t,i=e.style;i&&"tip"in i&&(t=e.style.tip,"object"!=typeof t&&(e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=v),"number"!=typeof t.width&&delete t.width,"number"!=typeof t.height&&delete t.height,"number"!=typeof t.border&&t.border!==v&&delete t.border,"number"!=typeof t.offset&&delete t.offset)},n.extend(v,p.defaults,{style:{tip:{corner:v,mimic:_,width:6,height:6,border:v,offset:0}}});var Y,J,Q="is-modal-qtip",K=R+"["+Q+"]",X=".qtipmodal";J=function(){function i(e){if(n.expr[":"].focusable)return n.expr[":"].focusable;var t,i,s,o=!isNaN(n.attr(e,"tabindex")),r=e.nodeName.toLowerCase();return"area"===r?(t=e.parentNode,i=t.name,e.href&&i&&"map"===t.nodeName.toLowerCase()?(s=n("img[usemap=#"+i+"]")[0],!!s&&s.is(":visible")):!1):/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||o:o}function s(e){d.length<1&&e.length?e.not("body").blur():d.first().focus()}function o(e){if(c.is(":visible")){var t,i=n(e.target),o=r.elements.tooltip,l=i.closest(R);t=l.length<1?_:parseInt(l[0].style.zIndex,10)>parseInt(o[0].style.zIndex,10),t||i.closest(R)[0]===o[0]||s(i),a=e.target===d[d.length-1]}}var r,a,l,c,u=this,d={};n.extend(u,{init:function(){function i(){var e=n(this);c.css({height:e.height(),width:e.width()})}return c=u.elem=n("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return _}}).hide(),n(e).bind("resize"+X,i),i(),n(t.body).bind("focusin"+X,o),n(t).bind("keydown"+X,function(e){r&&r.options.show.modal.escape&&27===e.keyCode&&r.hide(e)}),c.bind("click"+X,function(e){r&&r.options.show.modal.blur&&r.hide(e)}),u},update:function(e){r=e,d=e.options.show.modal.stealfocus!==_?e.elements.tooltip.find("*").filter(function(){return i(this)}):[]},toggle:function(e,i,o){var a=(n(t.body),e.elements.tooltip),d=e.options.show.modal,h=d.effect,p=i?"show":"hide",f=c.is(":visible"),m=n(K).filter(":visible:not(:animated)").not(a);return u.update(e),i&&d.stealfocus!==_&&s(n(":focus")),c.toggleClass("blurs",d.blur),i&&c.css({left:0,top:0}).appendTo(t.body),c.is(":animated")&&f===i&&l!==_||!i&&m.length?u:(c.stop(v,_),n.isFunction(h)?h.call(c,i):h===_?c[p]():c.fadeTo(parseInt(o,10)||90,i?1:0,function(){i||c.hide()}),i||c.queue(function(e){c.css({left:"",top:""}),m.length||c.detach(),e()}),l=i,r.destroyed&&(r=y),u)}}),u.init()},J=new J,Y=f.modal=function(e){var t=e.plugins.modal;return"object"==typeof t?t:e.plugins.modal=new d(e)},Y.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=v))},Y.zindex=p.zindex-200,Y.initialize="render",n.extend(v,p.defaults,{show:{modal:{on:_,effect:v,blur:v,stealfocus:v,escape:v}}}),f.viewport=function(i,n,s,o,r,a,l){function c(e,t,i,s,o,r,a,l,c){var u=n[o],h=m[e],p=g[e],f=i===E,v=-N.offset[o]+I.offset[o]+I["scroll"+o],_=h===o?c:h===r?-c:-c/2,y=p===o?l:p===r?-l:-l/2,b=R&&R.size?R.size[a]||0:0,w=R&&R.corner&&R.corner.precedance===e&&!f?b:0,x=v-u+w,k=u+c-I[a]-v+w,S=_-(m.precedance===e||h===m[t]?y:0)-(p===D?l/2:0);return f?(w=R&&R.corner&&R.corner.precedance===t?b:0,S=(h===o?1:-1)*_-w,n[o]+=x>0?x:k>0?-k:0,n[o]=Math.max(-N.offset[o]+I.offset[o]+(w&&R.corner[e]===D?R.offset:0),u-S,Math.min(Math.max(-N.offset[o]+I.offset[o]+I[a],u+S),n[o]))):(s*=i===P?2:0,x>0&&(h!==o||k>0)?(n[o]-=S+s,d["invert"+e](o)):k>0&&(h!==r||x>0)&&(n[o]-=(h===D?-S:S)+s,d["invert"+e](r)),n[o]<v&&-n[o]>k&&(n[o]=u,d=m.clone())),n[o]-u}var u,d,h,p=s.target,f=i.elements.tooltip,m=s.my,g=s.at,v=s.adjust,_=v.method.split(" "),y=_[0],A=_[1]||_[0],I=s.viewport,N=s.container,O=i.cache,R=i.plugins.tip,j={left:0,top:0};return I.jquery&&p[0]!==e&&p[0]!==t.body&&"none"!==v.method?(u="fixed"===f.css("position"),I={elem:I,height:I[(I[0]===e?"h":"outerH")+"eight"](),width:I[(I[0]===e?"w":"outerW")+"idth"](),scrollleft:u?0:I.scrollLeft(),scrolltop:u?0:I.scrollTop(),offset:I.offset()||{left:0,top:0}},N={elem:N,scrollLeft:N.scrollLeft(),scrollTop:N.scrollTop(),offset:N.offset()||{left:0,top:0}},("shift"!==y||"shift"!==A)&&(d=m.clone()),j={left:"none"!==y?c(b,w,y,v.x,C,M,x,o,a):0,top:"none"!==A?c(w,b,A,v.y,S,T,k,r,l):0},d&&O.lastClass!==(h=F+"-pos-"+d.abbrev())&&f.removeClass(i.cache.lastClass).addClass(i.cache.lastClass=h),j):j},f.imagemap=function(e,t,i,s){function o(e,t,i){for(var n=0,s=1,o=1,r=0,a=0,l=e.width,c=e.height;l>0&&c>0&&s>0&&o>0;)for(l=Math.floor(l/2),c=Math.floor(c/2),i.x===C?s=l:i.x===M?s=e.width-l:s+=Math.floor(l/2),i.y===S?o=c:i.y===T?o=e.height-c:o+=Math.floor(c/2),n=t.length;n--&&!(t.length<2);)r=t[n][0]-e.position.left,a=t[n][1]-e.position.top,(i.x===C&&r>=s||i.x===M&&s>=r||i.x===D&&(s>r||r>e.width-s)||i.y===S&&a>=o||i.y===T&&o>=a||i.y===D&&(o>a||a>e.height-o))&&t.splice(n,1);return{left:t[0][0],top:t[0][1]}}t.jquery||(t=n(t));var r=e.cache.areas={},a=(t[0].shape||t.attr("shape")).toLowerCase(),l=t[0].coords||t.attr("coords"),c=l.split(","),u=[],d=n('img[usemap="#'+t.parent("map").attr("name")+'"]'),h=d.offset(),p={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10}},f=0,m=0;if(h.left+=Math.ceil((d.outerWidth()-d.width())/2),h.top+=Math.ceil((d.outerHeight()-d.height())/2),"poly"===a)for(f=c.length;f--;)m=[parseInt(c[--f],10),parseInt(c[f+1],10)],m[0]>p.position.right&&(p.position.right=m[0]),m[0]<p.position.left&&(p.position.left=m[0]),m[1]>p.position.bottom&&(p.position.bottom=m[1]),m[1]<p.position.top&&(p.position.top=m[1]),u.push(m);else for(f=-1;f++<c.length;)u.push(parseInt(c[f],10));switch(a){case"rect":p={width:Math.abs(u[2]-u[0]),height:Math.abs(u[3]-u[1]),position:{left:Math.min(u[0],u[2]),top:Math.min(u[1],u[3])}};break;case"circle":p={width:u[2]+2,height:u[2]+2,position:{left:u[0],top:u[1]}};break;case"poly":p.width=Math.abs(p.position.right-p.position.left),p.height=Math.abs(p.position.bottom-p.position.top),"c"===i.abbrev()?p.position={left:p.position.left+p.width/2,top:p.position.top+p.height/2}:(r[i+l]||(p.position=o(p,u.slice(),i),!s||"flip"!==s[0]&&"flip"!==s[1]||(p.offset=o(p,u.slice(),{x:i.x===C?M:i.x===M?C:D,y:i.y===S?T:i.y===T?S:D}),p.offset.left-=p.position.left,p.offset.top-=p.position.top),r[i+l]=p),p=r[i+l]),p.width=p.height=0}return p.position.left+=h.left,p.position.top+=h.top,p};var Z;Z=f.ie6=function(e){var t=e.plugins.ie6;return 6!==f.ie?_:"object"==typeof t?t:e.plugins.ie6=new h(e)},Z.initialize="render"})}(window,document),/*
Copyright 2012 Igor Vaynberg

Version: 3.5.4 Timestamp: Sun Aug 30 13:30:32 EDT 2015

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),n=-1,s=this.length;++n<s&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function i(t){var i=e(document.createTextNode(""));t.before(i),i.before(t),i.remove()}function n(e){function t(e){return B[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function s(e,t){for(var i=0,n=t.length;n>i;i+=1)if(r(e,t[i]))return i;return-1}function o(){var t=e(L);t.appendTo(document.body);var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function r(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function a(e,t,i){var n,s,o;if(null===e||e.length<1)return[];for(n=e.split(t),s=0,o=n.length;o>s;s+=1)n[s]=i(n[s]);return n}function l(e){return e.outerWidth(!1)-e.width()}function c(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var s=e.data(i,n);s!==t&&i.val()!==s&&(e.removeData(i,n),i.trigger("keyup-change"))})}function u(i){i.on("mousemove",function(i){var n=j;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function d(e,i,n){n=n||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){i.apply(n,t)},e)}}function h(e,t){var i=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){s(e.target,t.get())>=0&&i(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus();var s=i.offsetWidth>0||i.offsetHeight>0;s&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var s=document.selection.createRange();n=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),i=s.text.length-n}return{offset:i,length:n}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!N){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);N=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),N.attr("class","select2-sizer"),e(document.body).append(N)}return N.text(t.val()),N.width()}function _(t,i,n){var s,o,r=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=e.trim(i.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&r.push(o))})),t.attr("class",r.join(" "))}function y(e,t,i,s){var o=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),r=t.length;return 0>o?void i.push(s(e)):(i.push(s(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(s(e.substring(o,o+r))),i.push("</span>"),void i.push(s(e.substring(o+r,e.length))))}function b(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(i){var n,s=null,o=i.quietMillis||100,r=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,o=r,c=i.transport||e.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);n=n?n.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,s&&"function"==typeof s.abort&&s.abort(),i.params&&(e.isFunction(i.params)?e.extend(d,i.params.call(a)):e.extend(d,i.params)),e.extend(d,{url:o,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var n={hasError:!0,jqXHR:e,textStatus:t,errorThrown:i};l.callback(n)}}),s=c.call(a,d)},o)}}function x(t){var i,n,s=t,o=function(e){return""+e.text};e.isArray(s)&&(n=s,s={results:n}),e.isFunction(s)===!1&&(n=s,s=function(){return n});var r=s();return r.text&&(o=r.text,e.isFunction(o)||(i=r.text,o=function(e){return e[i]})),function(t){var i,n=t.term,r={results:[]};return""===n?void t.callback(s()):(i=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,o(a),s))&&r.push(a)}else t.matcher(n,o(s),s)&&r.push(s)},e(s().results).each2(function(e,t){i(t,r.results)}),void t.callback(r))}}function k(i){var n=e.isFunction(i);return function(s){var o=s.term,r={results:[]},a=n?i(s):i;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||s.matcher(o,i))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r))}}function S(t,i){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(i+" must be a string, function, or falsy value")}function C(t,i){if(e.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(i,n)}return t}function T(t){var i=0;return e.each(t,function(e,t){t.children?i+=T(t.children):i++}),i}function M(e,i,n,s){var o,a,l,c,u,d=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(u=s.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(o=e.substring(0,a),e=e.substring(a+u.length),o.length>0&&(o=s.createSearchChoice.call(this,o,i),o!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o))){for(h=!1,l=0,c=i.length;c>l;l++)if(r(s.id(o),s.id(i[l]))){h=!0;break}h||n(o)}}return d!==e?e:void 0}function D(){var t=this;e.each(arguments,function(e,i){t[i].remove(),t[i]=null})}function P(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var E,A,F,I,N,O,R,j={x:0,y:0},z={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case z.LEFT:case z.RIGHT:case z.UP:case z.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case z.SHIFT:case z.CTRL:case z.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},L="<div class='select2-measure-scrollbar'></div>",B={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};O=e(document),I=function(){var e=1;return function(){return e++}}(),E=P(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,s,r=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+I()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=e(document.body),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(C(i.containerCss,this.opts.element)),this.container.addClass(C(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),u(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,s){var o=n.scrollTop();s>0&&0>=o-s?(n.scrollTop(0),m(e)):0>s&&n.get(0).scrollHeight-n.scrollTop()+s<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(e))}),c(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=i.element.prop("readonly");l===t&&(l=!1),this.readonly(l),R=R||o(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),n=this;this.close(),e.length&&e[0].detachEvent&&n._sync&&e.each(function(){n._sync&&this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),D.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,s,o,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=s=i.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i.debug=i.debug||e.fn.select2.defaults.debug,i.debug&&console&&console.warn&&(null!=i.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=i.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=i.ajax&&null!=i.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=i.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=i.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=i.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=i.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=i.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=i.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),i.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=i.element.data("tags")){var u=i.element.data("tags");e.isArray(u)||(u=[]),i.element.data("select2Tags",u)}if(null!=i.sorter&&(i.sortResults=i.sorter),null!=i.selectOnClose&&(i.selectOnBlur=i.selectOnClose),null!=i.ajax&&e.isFunction(i.ajax.processResults)&&(i.ajax.results=i.ajax.processResults),null!=i.language){var d=i.language;e.isFunction(d.noMatches)&&(i.formatNoMatches=d.noMatches),e.isFunction(d.searching)&&(i.formatSearching=d.searching),e.isFunction(d.inputTooShort)&&(i.formatInputTooShort=d.inputTooShort),e.isFunction(d.inputTooLong)&&(i.formatInputTooLong=d.inputTooLong),e.isFunction(d.loadingMore)&&(i.formatLoading=d.loadingMore),e.isFunction(d.maximumSelected)&&(i.formatSelectionTooBig=d.maximumSelected)}if(i=e.extend({},{populateResults:function(n,s,o){var r,a=this.opts.id,l=this.liveRegion;(r=function(n,s,u){var d,h,p,f,m,g,v,_,y,b;n=i.sortResults(n,s,o);var w=[];for(d=0,h=n.length;h>d;d+=1)p=n[d],m=p.disabled===!0,f=!m&&a(p)!==t,g=p.children&&p.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),_=e(document.createElement("div")),_.addClass("select2-result-label"),_.attr("id","select2-result-label-"+I()),_.attr("role","option"),b=i.formatResult(p,_,o,c.opts.escapeMarkup),b!==t&&(_.html(b),v.append(_)),g&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),r(p.children,y,u+1),v.append(y)),v.data("select2-data",p),w.push(v[0]);s.append(w),l.text(i.formatMatches(n.length))})(s,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(o=i.id,i.id=function(e){return e[o]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(s?(i.query=this.bind(function(e){var i,s,o,r={results:[],more:!1},a=e.term;o=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(s=this.getPlaceholderOption(),s&&(i=i.not(s))),i.each2(function(e,t){o(t,r.results)}),e.callback(r)}),i.id=function(e){return e.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=x(i.data):"tags"in i&&(i.query=k(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var s=[];e(a(t.val(),i.separator,i.transformVal)).each(function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each(function(){return r(this.id,t.id)?(t=this,!1):void 0}),s.push(t)}),n(s)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,s=this;n.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),this.container&&(_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass,this.opts.element)))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",s._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(t){e.each(t,s._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,i,n,s,o,r=this.dropdown,a=this.container,l=a.offset(),c=a.outerHeight(!1),u=a.outerWidth(!1),d=r.outerHeight(!1),h=e(window),p=h.width(),f=h.height(),m=h.scrollLeft()+p,g=h.scrollTop()+f,v=l.top+c,_=l.left,y=g>=v+d,b=l.top-d>=h.scrollTop(),w=r.outerWidth(!1),x=function(){return m>=_+w},k=function(){return l.left+m+a.outerWidth(!1)>w},S=r.hasClass("select2-drop-above");S?(i=!0,!b&&y&&(n=!0,i=!1)):(i=!1,!y&&b&&(n=!0,i=!0)),n&&(r.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),u=this.container.outerWidth(!1),d=r.outerHeight(!1),m=h.scrollLeft()+p,g=h.scrollTop()+f,v=l.top+c,_=l.left,w=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),w=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:R.width),w>u?u=w:w=u,d=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),v-=t.top,_-=t.left),!x()&&k()&&(_=l.left+this.container.outerWidth(!1)-w),s={left:_,width:u},i?(this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above"),d=r.outerHeight(!1),s.top=l.top-d,s.bottom="auto"):(s.top=v,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,C(this.opts.dropdownCss,this.opts.element)),r.css(s)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),O.on("mousemove.select2Event",function(e){j.x=e.pageX,j.y=e.pageY}),!0):!1},opening:function(){var t,n=this.containerEventName,s="scroll."+n,o="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0===t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(n){
i(t);var s,o=e("#select2-drop");o.length>0&&(s=o.data("select2"),s.opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+r,function(e){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,n="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),O.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==t?(this.search.val(e),this.search.select(),!0):!1},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,i,n,s,o,r,a,l,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),l=(n.offset()||{}).top||0,s=l+n.outerHeight(!0),i===t.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=c.offset().top+c.outerHeight(!1),s>o&&c.scrollTop(c.scrollTop()+(s-o)),r=l-c.offset().top,0>r&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var s=e(i[n]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,n,o=this.findHighlightableChoices();return 0===arguments.length?s(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),i=e(o[t]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),n=i.data("select2-data"),void(n&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,s=this,o=this.search.val(),r=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:o,page:n,context:r}),s.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).html(s.opts.escapeMarkup(C(s.opts.formatLoadMore,s.opts.element,n+1))),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):i.remove(),s.positionDropdown(),s.resultsPage=n,s.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown(),u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.liveRegion.text(u.text()):h.liveRegion.text(h.opts.formatMatches(u.find('.select2-result-selectable:not(".select2-selected")').length))}function s(e){u.html(e),n()}var o,a,l,c=this.search,u=this.results,d=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&S(d.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+C(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return s(S(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+C(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void s(S(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+C(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+C(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&S(d.formatAjaxError,"formatAjaxError"))return void s("<li class='select2-ajax-error'>"+C(d.formatAjaxError,d.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),o.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(o.results).filter(function(){return r(h.id(this),h.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a)),0===o.results.length&&S(d.formatNoMatches,"formatNoMatches"))return s("<li class='select2-no-results'>"+C(d.formatNoMatches,d.element,c.val())+"</li>"),void(this.showSearch&&this.showSearch(c.val()));u.empty(),h.opts.populateResults.call(this,u,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&S(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+d.escapeMarkup(C(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(o,i),n(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function t(){var t,i,n,s,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(t=this.opts.element.attr("style"),"string"==typeof t)for(i=t.split(";"),s=0,o=i.length;o>s;s+=1)if(r=i[s].replace(/\s/g,""),n=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width"),t.indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=t.call(this);null!==i&&this.container.css("width",i)}}),A=P(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(n=this.search.val().length,t.setSelectionRange(n,n))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"selection","focusser")},initContainer:function(){var t,n,s=this.container,o=this.dropdown,r=I();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===z.PAGE_UP||e.which===z.PAGE_DOWN)return void m(e);switch(e.which){case z.UP:case z.DOWN:return this.moveHighlight(e.which===z.UP?-1:1),void m(e);case z.ENTER:return this.selectHighlighted(),void m(e);case z.TAB:return void this.selectHighlighted({noFocus:!0});case z.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==z.TAB&&!z.isControl(e)&&!z.isFunctionKey(e)&&e.which!==z.ESC){if(this.opts.openOnEnter===!1&&e.which===z.ENTER)return void m(e);if(e.which==z.DOWN||e.which==z.UP||e.which==z.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==z.DELETE||e.which==z.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(n){i(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(n)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=i.val(),o=null;t.query({matcher:function(e,i,n){var a=r(s,t.id(n));return a&&(o=n),a},callback:e.isFunction(n)?function(){n(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return r(s.id(t.data("select2-data")),s.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(T(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(i=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),i!==t&&s.append(i),n=this.opts.formatSelectionCssClass(e,s),n!==t&&s.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=s.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(!e&&0!==e)return void this.clear(i);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),i&&s.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(n=arguments[1]),e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n),void 0)}}),F=P(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=a(i.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(i,n,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<s.length;i++)for(var a=s[i],l=0;l<o.length;l++){var c=o[l];if(r(a,t.id(c))){e.push(c),o.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"searchContainer","selection")},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+I()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),s=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(e.which==z.LEFT||e.which==z.RIGHT||e.which==z.BACKSPACE||e.which==z.DELETE||e.which==z.ENTER)){var r=i;return e.which==z.LEFT&&n.length?r=n:e.which==z.RIGHT?r=s.length?s:null:e.which===z.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),r=n.length?n:s):e.which==z.DELETE?this.unselect(i.first())&&(this.search.width(10),r=s.length?s:null):e.which==z.ENTER&&(r=null),this.selectChoice(r),m(e),void(r&&r.length||this.open())}if((e.which===z.BACKSPACE&&1==this.keydowns||e.which==z.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case z.UP:case z.DOWN:return this.moveHighlight(e.which===z.UP?-1:1),void m(e);case z.ENTER:return this.selectHighlighted(),void m(e);case z.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case z.ESC:return this.cancel(e),void m(e)}if(e.which!==z.TAB&&!z.isControl(e)&&!z.isFunctionKey(e)&&e.which!==z.BACKSPACE&&e.which!==z.ESC){if(e.which===z.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===z.PAGE_UP||e.which===z.PAGE_DOWN)&&m(e),e.which===z.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i={},n=[],s=this;e(t).each(function(){s.id(this)in i||(i[s.id(this)]=0,n.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(n),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var i=this.getVal(),n=this;e(t).each(function(){i.push(n.createChoice(this))}),this.setVal(i)},createChoice:function(i){var n,s,o=!i.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?r:a,c=this.id(i);return n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith(e("<div></div>").html(n)),s=this.opts.formatSelectionCssClass(i,l.find("div")),s!=t&&l.addClass(s),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),c},unselect:function(t){var i,n,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(n=s(this.id(i),o))>=0;)o.splice(n,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var i=a.id(t.data("select2-data"));s(i,n)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&this.opts.closeOnSelect===!0&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&S(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+C(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,i,n,s,o=l(this.search);e=v(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(t-n)-o,e>s&&(s=i-o),40>s&&(s=i-o),0>=s&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){if(this.select)this.select.val(t);else{var i=[],n={};e(t).each(function(){this in n||(i.push(this),n[this]=0)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator))}},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)if(r(this.opts.id(t[i]),this.opts.id(e[n]))){t.splice(i,1),i--,e.splice(n,1);break}return{added:t,removed:e}},val:function(i,n){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),n&&o.triggerChange(o.buildChangeDetails(s,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,s,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){
return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),n=e.map(t,function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),e.fn.select2=function(){var i,n,o,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new window.Select2["class"].multi:new window.Select2["class"].single,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(s(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,n=e(this).data("select2"),n===t)return;if(o=l[0],"container"===o?r=n.container:"dropdown"===o?r=n.dropdown:(h[o]&&(o=h[o]),r=n[o].apply(n,l.slice(1))),s(l[0],u)>=0||s(l[0],d)>=0&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var s=[];return y(this.text(e),i.term,s,n),s.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,i,n){return e?n(this.text(e)):t},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,i){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:b,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,i){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:k},util:{debounce:d,markMatch:y,escapeMarkup:b,stripDiacritics:n},"class":{"abstract":E,single:A,multi:F}}}}(jQuery),/*!
 * jQuery Validation Plugin 1.12.0pre
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jrn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return i.settings.submitHandler?(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var s=e.data(n.form,"validator").settings,o=s.rules,r=e.validator.staticRules(n);switch(t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,o[n.name]=r,i.messages&&(s.messages[n.name]=e.extend(s.messages[n.name],i.messages));break;case"remove":if(!i)return delete o[n.name],r;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=r[t],delete r[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)if(void 0!=this.findByName(t[e].name).length&&this.findByName(t[e].name).length>1)for(var i=0;i<this.findByName(t[e].name).length;i++)this.check(this.findByName(t[e].name)[i]);else this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),s=!1,o=this.elementValue(t);for(var r in n){var a={method:r,parameters:n[r]};try{if(i=e.validator.methods[r].call(this,o,t,a.parameters),"dependency-mismatch"===i){s=!0;continue}if(s=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",l),l}}return s?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),s=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):s.test(n)&&(n=e.validator.format(n.replace(s,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(t){if(e(t).data("validation-id")&&this.groups[t.name])var i=this.groups[t.name]+"-"+e(t).data("validation-id");return i||this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},group_names:function(){var e=[];for(var t in this.groups)this.groups.hasOwnProperty(t)&&e.push(this.groups[t]);return e},in_group:function(e){var t=this.idOrName(e),i=-1!==this.group_names().indexOf(t);return i===!0?t:!1},element_names_of_group:function(e){var t=[];for(var i in this.groups)this.groups.hasOwnProperty(i)&&this.groups[i]===e&&t.push(i);return t}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t),s=n[0].getAttribute("type");for(var o in e.validator.methods){var r;"required"===o?(r=n.get(0).getAttribute(o),""===r&&(r=!0),r=!!r):r=n.attr(o),/min|max/.test(o)&&(null===s||/number|range|text/.test(s))&&(r=Number(r)),r?i[o]=r:s===o&&"range"!==s&&(i[o]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,s={},o=e(t);for(i in e.validator.methods)n=o.data("rule-"+i.toLowerCase()),void 0!==n&&(s[i]=n);return s},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,s){if(s===!1)return void delete t[n];if(s.param||s.depends){var o=!0;switch(typeof s.depends){case"string":o=!!e(s.depends,i.form).length;break;case"function":o=s.depends.call(i,i)}o?t[n]=void 0!==s.param?s.param:!0:delete t[n]}}),e.each(t,function(n,s){t[n]=e.isFunction(s)?s(i):s}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=e(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,s=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var r=e.charAt(o);n=parseInt(r,10),s&&(n*=2)>9&&(n-=9),i+=n,s=!s}return i%10===0},minlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n},maxlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=s},rangelength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,n){var s=e(n);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===s.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===t)return s.valid;s.old=t;var o=this;this.startRequest(i);var r={};return r[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){o.settings.messages[i.name].remote=s.originalMessage;var r=n===!0||"true"===n;if(r){var a=o.formSubmitted;o.prepareElement(i),o.formSubmitted=a,o.successList.push(i),delete o.invalid[i.name],o.showErrors()}else{var l={},c=n||o.defaultMessage(i,"remote");l[i.name]=s.message=e.isFunction(c)?c(t):c,o.invalid[i.name]=!0,o.showErrors(l)}s.valid=r,o.stopRequest(i,r)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var s=e.port;"abort"===e.mode&&(t[s]&&t[s].abort(),t[s]=n)});else{var i=e.ajax;e.ajax=function(n){var s=("mode"in n?n:e.ajaxSettings).mode,o=("port"in n?n:e.ajaxSettings).port;return"abort"===s?(t[o]&&t[o].abort(),t[o]=i.apply(this,arguments),t[o]):i.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var s=e(i.target);return s.is(t)?n.apply(s,arguments):void 0})}})}(jQuery),function(e,t,i,n,s,o){i(document).ready(function(){i.validator.addMethod("isContractFile",function(e,t){var n=/\.(rtf|doc|docx|pdf|odt|txt)$/i;return"file"==i(t).attr("type")&&(i(t).hasClass("required")||i(t).get(0).value.length>0)?n.test(e):!0},"RTF-, DOC(X)-, PDF-, ODT-, TXT-files only."),i.validator.addMethod("time",function(e,t){var i=s.Validation.validators.time(e,"",null,null);return this.optional(t)||n.isEmpty(i)},t.t("forms.errors.valid_time")),i.validator.addMethod("date_with_default_format",function(e,t){var i=s.Validation.validators.date(e,"",null,null);return this.optional(t)||n.isEmpty(i)},t.t("forms.errors.valid_date")),i.validator.addMethod("maxDateDIN",function(e,t,i){var n=o(e,"DD.MM.YYYY"),s=i;return this.optional(t)||s-n>=0},t.t("forms.errors.max_date")),i.validator.addMethod("is_future_date",function(e,t){var i=s.Validation.validators.is_future_date(e,"",null,null);return this.optional(t)||n.isEmpty(i)},t.t("forms.errors.valid_date_future")),i.validator.addMethod("isFutureOrCurrentDate",function(t,i){t=o(t,e.Formats.date.momentjs);var r=s.Validation.validators.isFutureOrCurrentDate(t._d,"",null,null);return this.optional(i)||n.isEmpty(r)},function(){return t.t("forms.errors.valid_date_before_gig_start")}),i.validator.addMethod("isBeforeOrAtGivenDate",function(t,i,r){t=o(t,e.Formats.date.momentjs);var a=o(r),l=s.Validation.validators.isBeforeOrAtGivenDate(t._d,"",a._d,null);return this.optional(i)||n.isEmpty(l)},function(){return t.t("forms.errors.valid_date_before_gig_start")}),i.validator.addMethod("isAfterOrAtGivenDate",function(t,i,r){t=o(t,e.Formats.date.momentjs),t.add(o.duration({hours:23,minutes:59,seconds:59}));var a=o(r),l=s.Validation.validators.isAfterOrAtGivenDate(t._d,"",a._d,null);return this.optional(i)||n.isEmpty(l)},function(i){return i=o(i),t.t("forms.errors.valid_date_past_or_current",{date:i.format(e.Formats.date.momentjs)})}),i.validator.addMethod("opt_minlength",function(e,t,n){return""==e||i.validator.methods.minlength.call(this,e,t,n)},i.format("Please enter a valid password (min. length: {0} chars).")),i.validator.addMethod("valueEqualTo",function(e,t,i){return n.isUndefined(i)?!0:("boolean"==typeof i&&(e="true"===e?!0:!1),e===i)},"")})}(window.Gigmit,window.I18n,window.jQuery,window._,window.Backbone,window.moment),function(e,t,i,n,s,o){e.extend(e.validator.methods,{date:function(e,i){var n=s(e,t.Formats.date.momentjs);return this.optional(i)||n.isValid()},number:function(e,t){return this.optional(t)||i.isNumber(o.ModelBinder.Converters.Numbers("ViewToModel",e))},min:function(e,t,i){return this.optional(t)||n.unformat(e)>=i},max:function(e,t,i){return this.optional(t)||n.unformat(e)<=i},fileHashRequired:function(e,t,n){return!i.isEmpty(n)}})}(window.jQuery,window.Gigmit,window._,window.accounting,window.moment,window.Backbone),function(e,t){"de"==t.current_locale&&e.extend(e.validator.messages,{required:"Dieses Feld ist ein Pflichtfeld.",maxlength:e.validator.format("Gib bitte maximal {0} Zeichen ein."),minlength:e.validator.format("Gib bitte mindestens {0} Zeichen ein."),rangelength:e.validator.format("Gib bitte mindestens {0} und maximal {1} Zeichen ein."),email:"Gib bitte eine g\xfcltige E-Mail Adresse ein.",url:"Gib bitte eine g\xfcltige URL ein.",date:"Gib bitte ein g\xfcltiges Datum ein.",number:"Gib bitte eine Nummer ein.",digits:"Geben Sie bitte nur Ziffern ein.",equalTo:"Bitte denselben Wert wiederholen.",range:e.validator.format("Gib bitte einen Wert zwischen {0} und {1} ein."),max:e.validator.format("Gib bitte einen Wert kleiner oder gleich {0} ein."),min:e.validator.format("Gib bitte einen Wert gr\xf6\xdfer oder gleich {0} ein."),creditcard:"Gib bitte eine g\xfcltige Kreditkarten-Nummer ein.",fileHashRequired:"Bitte lade eine Datei hoch."}),"en"==t.current_locale&&e.extend(e.validator.messages,{fileHashRequired:"Please upload a file."})}(jQuery,Gigmit),function(e){e.validator.gigmit={defaults:{errorPlacement:function(e,t){var i=t.closest("form"),n=i.data("validator"),s=n.groups[t.attr("name")];if(void 0!==s){var o=Object.keys(n.groups).filter(function(e){return n.groups[e]===s});if(o.length){var r=o[o.length-1];t=i.find('[name="'+r+'"]:visible').last()}}t.parent().parent().hasClass("input-append")&&(t=t.next("span.add-on")),t.is(":checkbox")&&(t=t.closest("label.checkbox")),t.is(":radio")&&(t=i.find('input[name="'+t.attr("name")+'"]').last().closest("label.radio"));var a=t.parent().find(".tooltip");a.length&&(t=a);var l=t.parent().find(".remove-item");l.length&&(t=l),e.insertAfter(t)},highlight:function(t,i,n){var s=this.in_group(t);if(s){var o=this.element_names_of_group(s),r=o.map(function(e){return'[name="'+e+'"]'}).join(", ");e(r).closest(".control-group, .multistep-form__group").removeClass(n).addClass(i)}else e(t).addClass("error"),e(t).is(":radio")?this.findByName(t.name).closest(".control-group, .multistep-form__group").removeClass(n).addClass(i):e(t).closest(".control-group, .multistep-form__group").removeClass(n).addClass(i)},unhighlight:function(t,i,n){var s=this.in_group(t);if(s){var o=this.element_names_of_group(s),r=o.map(function(e){return'[name="'+e+'"]'}).join(", ");e(r).closest(".control-group, .multistep-form__group").removeClass(i).addClass(n)}else e(t).removeClass("error"),e("element").is(":radio")?this.findByName(t.name).parent().closest(".control-group, .multistep-form__group").removeClass(i).addClass(n):(e(t).closest(".control-group, .multistep-form__group").removeClass(i).addClass(n),e(t).next(".help-inline").text(""))}}},e.validator.setDefaults(e.validator.gigmit.defaults)}(jQuery),function(e,t){$(document).ready(function(){e.settings={currency:{symbol:t.t("number.currency.format.unit"),format:"%v %s",decimal:t.t("number.currency.format.separator"),thousand:t.t("number.currency.format.delimiter"),precision:t.t("number.currency.format.precision")},number:{precision:t.t("number.currency.format.precision"),thousand:t.t("number.currency.format.delimiter"),decimal:t.t("number.currency.format.separator")}}})}(accounting,I18n),/*
 * jQuery UI Widget 1.10.3+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(t,i,n){var s,o,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],s=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},o=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==t&&(e.isPlainObject(o)?i[s]=e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):i[s]=o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(r||{})._init():e.data(this,o,new s(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=e.widget.extend({},this.options[i]),r=0;r<s.length-1;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,r){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?s.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),r=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&e.effects&&e.effects.effect[a]?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}),/*
 * jQuery Iframe Transport Plugin 1.8.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,s,o,r=i.initialIframeSrc||"javascript:false;";return{send:function(a,l){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),t+=1,s=e('<iframe src="'+r+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(i.paramName)?i.paramName:[i.paramName];s.unbind("load").bind("load",function(){var t;try{if(t=s.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",s.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",o[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var s=e(t[i]);e(n).prop("name",s.prop("name")),s.replaceWith(n)})}),n.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",r),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.35.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,s=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&s-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=s,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(s,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(s,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,s=t.files[0],o=t.multipart||!e.support.xhrFileUpload,r=t.paramName[0];t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",s)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:r,value:t.blob}):e.each(t.files,function(e,n){i.push({name:t.paramName[e]||r,value:n})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(r,t.blob,s.name):e.each(t.files,function(e,s){(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s))&&i.append(t.paramName[e]||r,s,s.name)})),t.data=i):(t.contentType=s.type,t.data=t.blob||s),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",s=(t.prop("files")||[1]).length;s;)n.push(i),s-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var s=e.Deferred(),o=s.promise();return i=i||this.options.context||o,t===!0?s.resolveWith(i,n):t===!1&&s.rejectWith(i,n),o.abort=s.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var n=this,s=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||s([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():s(arguments)}).pipe(t,o)),this._processQueue||s([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._getXHRPromise())},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,s,o=this,r=t.files[0],a=r.size,l=t.uploadedBytes,c=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?i?!0:l>=a?(r.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",r.error])):(s=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(r,l,l+c,r.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,r,c){l=o._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=r,i.jqXHR=c,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a>l?s():d.resolveWith(i.context,[n,r,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},s(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,s){var o=s._progress.total,r=s._response;s._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),s),r.result=s.result=t,r.textStatus=s.textStatus=i,r.jqXHR=s.jqXHR=n,this._trigger("done",null,s)},_onFail:function(e,t,i,n){var s=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),s.jqXHR=n.jqXHR=e,s.textStatus=n.textStatus=t,s.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,s,o,r,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((s||a._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&a._getXHRPromise(!1,l.context,s)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),r=o.pipe(c)):(this._sequence=this._sequence.pipe(c,c),r=this._sequence),r.abort=function(){return s=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,s),c())},this._enhancePromise(r)):c()},_onAdd:function(t,i){var n,s,o,r,a=this,l=!0,c=e.extend({},this.options,i),u=c.limitMultiFileUploads,d=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(o=[],n=[],r=0;r<i.files.length;r+=u)o.push(i.files.slice(r,r+u)),s=d.slice(r,r+u),s.length||(s=d),n.push(s);else n=d;else o=[i.files],n=[d];return i.originalFiles=i.files,e.each(o||i.files,function(s,r){var c=e.extend({},i);return c.files=o?r:[r],c.paramName=n[s],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var n,s=this,o=e.Deferred(),r=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},r):t.isDirectory?(n=t.createReader(),n.readEntries(function(e){s._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(r)},r)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,s=t.prop("webkitEntries")||t.prop("entries");if(s&&s.length)return this._handleFileTreeEntries(s);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(s){n.files=s,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,s={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){s.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),s)!==!1&&i._onAdd(t,s)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),i.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,n){t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,s=this,o=e.Deferred(),r=o.promise();return r.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),r)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void o.reject();t.files=e,i=s._onSend(null,t).then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(r)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var s=e(this);n.process(function(){return s.fileupload("process",n)}),t.call(this,i,n)}},processActions:{},_processFile:function(t,i){var n=this,s=e.Deferred().resolveWith(n,[t]),o=s.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,s){var r=function(t){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():n.processActions[s.action].call(n,t,s)};o=o.pipe(r,s.always&&r)}),o.done(function(){n._trigger("processdone",null,t),n._trigger("processalways",null,t)}).fail(function(){n._trigger("processfail",null,t),n._trigger("processalways",null,t)}),o},_transformProcessQueue:function(t){var i=[];e.each(t.processQueue,function(){var n={},s=this.action,o=this.prefix===!0?s:this.prefix;e.each(this,function(i,s){"string"===e.type(s)&&"@"===s.charAt(0)?n[i]=t[s.slice(1)||(o?o+i.charAt(0).toUpperCase()+i.slice(1):i)]:n[i]=s}),i.push(n)}),t.processQueue=i},processing:function(){return this._processing},process:function(t){var i=this,n=e.extend({},this.options,t);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(s){var o=s?e.extend({},n):n,r=function(){return t.errorThrown?e.Deferred().rejectWith(i,[t]).promise():i._processFile(o,t)};o.index=s,i._processing+=1,i._processingQueue=i._processingQueue.pipe(r,r).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload Validation Plugin 1.1.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var n=e.Deferred(),s=this.options,o=t.files[t.index];return"number"===e.type(i.maxNumberOfFiles)&&(s.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?o.error=s.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(o.type)||i.acceptFileTypes.test(o.name)?i.maxFileSize&&o.size>i.maxFileSize?o.error=s.i18n("maxFileSize"):"number"===e.type(o.size)&&o.size<i.minFileSize?o.error=s.i18n("minFileSize"):delete o.error:o.error=s.i18n("acceptFileTypes"),o.error||t.files.error?(t.files.error=!0,n.rejectWith(this,[t])):n.resolveWith(this,[t]),n.promise()}}})}),function(e,t,i,n,s,o){window.Gigmit.Widgets.FileUpload=t.View.extend({options:{attribute_name:"media_item[file]",endpoint:"/media_items",icons:{chooseFile:"icon-upload icon--margin",fileUploaded:"icon-ok"},showRemoveOption:!0,fileupload:{autoUpload:!0,dataType:"json",dropZone:null,maxNumberOfFiles:1,pasteZone:null,replaceFileInput:!1,type:"POST"},pseudoDelete:!1,tooltip:{content:" ",hide:"mouseover",position:{my:"centerLeft",at:"centerRight"},show:!1,style:{classes:"qtip-validation-error",tip:{height:7,width:15},width:"auto"}}},initialize:function(e){var t=this.$el.data("filename"),n=this.$el.data("file_url");return this._prepareOptions(e),"file"!=this.$el.attr("type")?void s.warn("[gigmit.fileupload] no file input given. exit."):(this.$form=this.$el.closest("form"),this.$form.length?(this.formAuthToken=this.$form.find(':hidden[name="authenticity_token"]').val(),this.formUtf8=this.$form.find(':hidden[name="utf8"]').val(),i.isUndefined(this.formAuthToken)||i.isUndefined(this.formUtf8)?void s.warn("[gigmit.fileupload] form token or utf8 values not found. exit."):(this._createButton(),this._initUpload(),this._createValidationTooltip(),this.fileInputEnabled=!0,i.isEmpty(i.compact([n,t]))?this.enableFileInput():(this.$buttonText.text(this._getPrunedFileNameWithExtension(t)),this._setFileUrl(n),this.disableFileInput()),void this._initEventHandlers())):void s.warn("[gigmit.fileupload] file upload form not found. exit."))},_prepareOptions:function(t){this.options=e.extend(!0,{},this.options,t),this.mediaItemId=this.options.mediaItemId,this.options.tooltip=e.extend(!0,e.fn.qtip.tooltip_defaults,this.options.tooltip),i.has(t,"validationGroup")&&(this.options.fileupload=e.extend(!0,this.options.fileupload,this._getFileValidations(t.validationGroup)),this.options.fileupload=e.extend(!0,this.options.fileupload,{messages:{maxFileSize:n.t("forms.errors.max_file_size_exceeded_html",{max_file_size:n.toHumanSize(this.options.fileupload.maxFileSize)}),acceptFileTypes:n.t("forms.errors.wrong_file_type_html",{accepted_types:this.options.fileupload.fileTypesText})}})),this.options.texts={chooseFile:n.t("forms.inputs.placeholder.choose_file")}},_getFileValidations:function(e){var t={};switch(e){case"rider":t={acceptFileTypes:o.Constants.validations.files.riders.acceptedFileTypes,fileTypesText:"doc(x), xls(x), ods, odt, rtf, txt, pdf, jp(e)g, png, webp",maxFileSize:o.Constants.validations.files.riders.maxFileSize};break;case"image":t={acceptFileTypes:o.Constants.validations.files.images.acceptedFileTypes,fileTypesText:"jp(e)g, png, webp",maxFileSize:o.Constants.validations.files.images.maxFileSize}}return t},_createButton:function(){this.$buttonGroup=e("<div>").addClass("has-buttons"),this.$button=e("<a>").addClass("fileupload-button button button--medium button--secondary button--group-left").attr("type","button"),this.$buttonGroup.append(this.$button),this.button=new o.Views.Components.ProgressButton({el:this.$button}),this.$icon=e("<i>"),this.$buttonText=e("<span>");var t=this.$el.data("filename"),n=this.$el.data("file-url");i.isString(t)&&i.isString(n)?(this.$icon.addClass(this.options.icons.fileUploaded),this.$buttonText.text(this._getPrunedFileNameWithExtension(t)),this._setFileUrl(n)):(this.$icon.addClass(this.options.icons.chooseFile),this.$buttonText.text(this.options.texts.chooseFile)),this.$button.append(this.$icon,this.$buttonText),this.$removeFileButton=e("<div>").addClass("remove-fileupload button button--medium button--secondary button--group-right").attr("disabled",!0),this.$removeFileButton.append(e("<i>").addClass("icon-trash")),this.$buttonGroup.append(this.$removeFileButton),this.options.showRemoveOption||this.$removeFileButton.hide(),this.$el.after(this.$buttonGroup),this.$button.append(this.$el)},_createValidationTooltip:function(){this.validationTooltip=this.$el.qtip(this.options.tooltip)},_initEventHandlers:function(){this.$button.on("click",i.bind(function(e){this.fileInputEnabled||e.stopPropagation()},this)),this.$removeFileButton.on("click",i.bind(this.reset,this))},enableUpload:function(){this.currentFile=void 0,this.mediaItemId=void 0,this.$icon.attr("class",this.options.icons.chooseFile),this.$buttonText.text(this.options.texts.chooseFile),this.enableFileInput(),this._resetFileUrl(),i.isFunction(this.options.fileRemoved)&&this.options.fileRemoved.call(this.el)},reset:function(){i.isNumber(this.mediaItemId)&&!this.options.pseudoDelete?e.ajax({url:"/media_items/"+this.mediaItemId,type:"DELETE",dataType:"json",success:i.bind(this.enableUpload,this)}):(this.options.pseudoDelete=!1,this.enableUpload())},setButtonText:function(e){this.$buttonText.text(e)},_initUpload:function(){var e=i.extend(this.options.fileupload,{formData:this._additionalFormData(),paramName:this.options.attribute_name,url:this.options.endpoint});this.upload=this.$el.fileupload(e).bind("fileuploadadd",i.bind(this._onFileUploadAdd,this)).bind("fileuploadstart",i.bind(this._onFileUploadStart,this)).bind("fileuploadprogress",i.bind(this._onFileUploadProgress,this)).bind("fileuploadalways",i.bind(this._onFileUploadAlways,this)).bind("fileuploaddone",i.bind(this._onFileUploadDone,this))},_onFileUploadAdd:function(t,n){var s=this,o=e(this.upload);e.when(n.process(function(){return o.fileupload("process",n)})).fail(function(){n.files.error&&(s._showValidationError(i.first(n.files).error),s.enableFileInput())})},addCustomAttribute:function(t,i){var n={};n[t]=i;var s=e.extend(!0,{},this.$el.fileupload("option","formData"),n);this.$el.fileupload("option","formData",s)},updateValidationOptions:function(t){var i=this._getFileValidations(t),s=e.extend(i,{messages:{maxFileSize:n.t("forms.errors.max_file_size_exceeded_html",{max_file_size:n.toHumanSize(i.maxFileSize)}),acceptFileTypes:n.t("forms.errors.wrong_file_type_html",{accepted_types:i.fileTypesText})}});this.$el.fileupload("option",s)},enableFileInput:function(){this.fileInputEnabled=!0,this.$el.val("").attr("disabled",!1).css("z-index","1").show(),this.$removeFileButton.attr("disabled",!0)},disableFileInput:function(){this.fileInputEnabled=!1,this.$el.attr("disabled",!0).css("z-index","-1"),this.$removeFileButton.attr("disabled",!1)},_showValidationError:function(e){var t=e;t==n.t("forms.errors.max_file_size_exceeded")&&(t=t+" ("+n.t("abbreviations.maximal")+" "+n.toHumanSize(this.options.fileupload.maxFileSize)+")"),this.$el.qtip("option","content.text",t),this.$el.qtip("show")},_onFileUploadStart:function(){this.button.start(),this.$removeFileButton.attr("disabled",!1)},_onFileUploadProgress:function(e,t){var i=parseFloat(t.loaded/t.total,10);this.button.setProgress(i)},_onFileUploadDone:function(e,t){this.currentFile=i.first(t.files),this.mediaItemId=t.jqXHR.responseJSON.id,this.$icon.attr("class",this.options.icons.fileUploaded),this.$buttonText.text(this._getPrunedFileNameWithExtension(this.currentFile.name)),this._setFileUrl(t.fileUrl),this.disableFileInput(),i.isFunction(this.options.fileAdded)&&this.options.fileAdded.call(this.el,t)},_setFileUrl:function(e){this.$button.attr("href",e).attr("target","_blank")},_resetFileUrl:function(){this.$button.removeAttr("href").removeAttr("target")},_getPrunedFileNameWithExtension:function(e){var t=e,n=t.split("."),s=n.length>1?"."+n.pop():"",o=n.join();return i(o).prune(20,"(...)")+s},_onFileUploadAlways:function(){this.button.stop()},_additionalFormData:function(){var e={authenticity_token:this.formAuthToken,_method:"post",utf8:this.formUtf8};return this.options.itemType&&(e["media_item[item_type]"]=this.options.itemType),e}})}(window.jQuery,window.Backbone,window._,window.I18n,window.console,window.Gigmit);/*
 countdown.js v2.6.0 http://countdownjs.org
 Copyright (c)2006-2014 Stephen M. McKamey.
 Licensed under The MIT License.
*/
var module,countdown=function(e){function t(e,t){var i=e.getTime();return e.setMonth(e.getMonth()+t),Math.round((e.getTime()-i)/864e5)}function i(e){var t=e.getTime(),i=new Date(t);return i.setMonth(e.getMonth()+1),Math.round((i.getTime()-t)/864e5)}function n(e,t){if(t=t instanceof Date||null!==t&&isFinite(t)?new Date(+t):new Date,!e)return t;var i=+e.value||0;return i?(t.setTime(t.getTime()+i),t):((i=+e.milliseconds||0)&&t.setMilliseconds(t.getMilliseconds()+i),(i=+e.seconds||0)&&t.setSeconds(t.getSeconds()+i),(i=+e.minutes||0)&&t.setMinutes(t.getMinutes()+i),(i=+e.hours||0)&&t.setHours(t.getHours()+i),(i=+e.weeks||0)&&(i*=7),(i+=+e.days||0)&&t.setDate(t.getDate()+i),(i=+e.months||0)&&t.setMonth(t.getMonth()+i),(i=+e.millennia||0)&&(i*=10),(i+=+e.centuries||0)&&(i*=10),(i+=+e.decades||0)&&(i*=10),(i+=+e.years||0)&&t.setFullYear(t.getFullYear()+i),t)}function s(e,t){return m(e)+(1===e?c[t]:u[t])}function o(){}function r(e,t,n,s,o,r){if(0<=e[n]&&(t+=e[n],delete e[n]),t/=o,1>=t+1)return 0;if(0<=e[s]){switch(e[s]=+(e[s]+t).toFixed(r),s){case"seconds":if(60!==e.seconds||isNaN(e.minutes))break;e.minutes++,e.seconds=0;case"minutes":if(60!==e.minutes||isNaN(e.hours))break;e.hours++,e.minutes=0;case"hours":if(24!==e.hours||isNaN(e.days))break;e.days++,e.hours=0;case"days":if(7!==e.days||isNaN(e.weeks))break;e.weeks++,e.days=0;case"weeks":if(e.weeks!==i(e.refMonth)/7||isNaN(e.months))break;e.months++,e.weeks=0;case"months":if(12!==e.months||isNaN(e.years))break;e.years++,e.months=0;case"years":if(10!==e.years||isNaN(e.decades))break;e.decades++,e.years=0;case"decades":if(10!==e.decades||isNaN(e.centuries))break;e.centuries++,e.decades=0;case"centuries":if(10!==e.centuries||isNaN(e.millennia))break;e.millennia++,e.centuries=0}return 0}return t}function a(e,n,s,o,a,l){var c=new Date;e.start=n=n||c,e.end=s=s||c,e.units=o,e.value=s.getTime()-n.getTime(),0>e.value&&(c=s,s=n,n=c),e.refMonth=new Date(n.getFullYear(),n.getMonth(),15,12,0,0);try{e.millennia=0,e.centuries=0,e.decades=0,e.years=s.getFullYear()-n.getFullYear(),e.months=s.getMonth()-n.getMonth(),e.weeks=0,e.days=s.getDate()-n.getDate(),e.hours=s.getHours()-n.getHours(),e.minutes=s.getMinutes()-n.getMinutes(),e.seconds=s.getSeconds()-n.getSeconds(),e.milliseconds=s.getMilliseconds()-n.getMilliseconds();var u;for(0>e.milliseconds?(u=v(-e.milliseconds/1e3),e.seconds-=u,e.milliseconds+=1e3*u):1e3<=e.milliseconds&&(e.seconds+=_(e.milliseconds/1e3),e.milliseconds%=1e3),0>e.seconds?(u=v(-e.seconds/60),e.minutes-=u,e.seconds+=60*u):60<=e.seconds&&(e.minutes+=_(e.seconds/60),e.seconds%=60),0>e.minutes?(u=v(-e.minutes/60),e.hours-=u,e.minutes+=60*u):60<=e.minutes&&(e.hours+=_(e.minutes/60),e.minutes%=60),0>e.hours?(u=v(-e.hours/24),e.days-=u,e.hours+=24*u):24<=e.hours&&(e.days+=_(e.hours/24),e.hours%=24);0>e.days;)e.months--,e.days+=t(e.refMonth,1);if(7<=e.days&&(e.weeks+=_(e.days/7),e.days%=7),0>e.months?(u=v(-e.months/12),e.years-=u,e.months+=12*u):12<=e.months&&(e.years+=_(e.months/12),e.months%=12),10<=e.years&&(e.decades+=_(e.years/10),e.years%=10,10<=e.decades&&(e.centuries+=_(e.decades/10),e.decades%=10,10<=e.centuries&&(e.millennia+=_(e.centuries/10),e.centuries%=10))),n=0,!(1024&o)||n>=a?(e.centuries+=10*e.millennia,delete e.millennia):e.millennia&&n++,!(512&o)||n>=a?(e.decades+=10*e.centuries,delete e.centuries):e.centuries&&n++,!(256&o)||n>=a?(e.years+=10*e.decades,delete e.decades):e.decades&&n++,!(128&o)||n>=a?(e.months+=12*e.years,delete e.years):e.years&&n++,!(64&o)||n>=a?(e.months&&(e.days+=t(e.refMonth,e.months)),delete e.months,7<=e.days&&(e.weeks+=_(e.days/7),e.days%=7)):e.months&&n++,!(32&o)||n>=a?(e.days+=7*e.weeks,delete e.weeks):e.weeks&&n++,!(16&o)||n>=a?(e.hours+=24*e.days,delete e.days):e.days&&n++,!(8&o)||n>=a?(e.minutes+=60*e.hours,delete e.hours):e.hours&&n++,!(4&o)||n>=a?(e.seconds+=60*e.minutes,delete e.minutes):e.minutes&&n++,!(2&o)||n>=a?(e.milliseconds+=1e3*e.seconds,delete e.seconds):e.seconds&&n++,!(1&o)||n>=a){var d=r(e,0,"milliseconds","seconds",1e3,l);if(d&&(d=r(e,d,"seconds","minutes",60,l))&&(d=r(e,d,"minutes","hours",60,l))&&(d=r(e,d,"hours","days",24,l))&&(d=r(e,d,"days","weeks",7,l))&&(d=r(e,d,"weeks","months",i(e.refMonth)/7,l))){o=d;var h,p=e.refMonth,f=p.getTime(),m=new Date(f);if(m.setFullYear(p.getFullYear()+1),h=Math.round((m.getTime()-f)/864e5),(d=r(e,o,"months","years",h/i(e.refMonth),l))&&(d=r(e,d,"years","decades",10,l))&&(d=r(e,d,"decades","centuries",10,l))&&(d=r(e,d,"centuries","millennia",10,l)))throw Error("Fractional unit overflow")}}}finally{delete e.refMonth}return e}function l(e,t,i,s,r){var l;i=+i||222,s=s>0?s:NaN,r=r>0?20>r?Math.round(r):20:0;var c=null;"function"==typeof e?(l=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof c&&(c=e),e=null));var u=null;if("function"==typeof t?(l=t,t=null):t instanceof Date||(null!==t&&isFinite(t)?t=new Date(+t):("object"==typeof t&&(u=t),t=null)),c&&(e=n(c,t)),u&&(t=n(u,e)),!e&&!t)return new o;if(!l)return a(new o,e,t,i,s,r);var d,c=1&i?1e3/30:2&i?1e3:4&i?6e4:8&i?36e5:16&i?864e5:6048e5,u=function(){l(a(new o,e,t,i,s,r),d)};return u(),d=setInterval(u,c)}var c,u,d,h,p,f,m,g,v=Math.ceil,_=Math.floor;o.prototype.toString=function(e){var t=g(this),i=t.length;return i?1===i?t[0]:(e=d+t.pop(),t.join(h)+e):e?""+e:p},o.prototype.toHTML=function(e,t){e=e||"span";var i=g(this),n=i.length;if(!n)return(t=t||p)?"<"+e+">"+t+"</"+e+">":t;for(var s=0;n>s;s++)i[s]="<"+e+">"+i[s]+"</"+e+">";return 1===n?i[0]:(n=d+i.pop(),i.join(h)+n)},o.prototype.addTo=function(e){return n(this,e)},g=function(e){var t=[],i=e.millennia;return i&&t.push(f(i,10)),(i=e.centuries)&&t.push(f(i,9)),(i=e.decades)&&t.push(f(i,8)),(i=e.years)&&t.push(f(i,7)),(i=e.months)&&t.push(f(i,6)),(i=e.weeks)&&t.push(f(i,5)),(i=e.days)&&t.push(f(i,4)),(i=e.hours)&&t.push(f(i,3)),(i=e.minutes)&&t.push(f(i,2)),(i=e.seconds)&&t.push(f(i,1)),(i=e.milliseconds)&&t.push(f(i,0)),t},l.MILLISECONDS=1,l.SECONDS=2,l.MINUTES=4,l.HOURS=8,l.DAYS=16,l.WEEKS=32,l.MONTHS=64,l.YEARS=128,l.DECADES=256,l.CENTURIES=512,l.MILLENNIA=1024,l.DEFAULTS=222,l.ALL=2047;var y=l.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var t=e.singular||[];t.split&&(t=t.split("|"));var i=e.plural||[];i.split&&(i=i.split("|"));for(var n=0;10>=n;n++)c[n]=t[n]||c[n],u[n]=i[n]||u[n]}"string"==typeof e.last&&(d=e.last),"string"==typeof e.delim&&(h=e.delim),"string"==typeof e.empty&&(p=e.empty),"function"==typeof e.formatNumber&&(m=e.formatNumber),"function"==typeof e.formatter&&(f=e.formatter)}},b=l.resetFormat=function(){c=" millisecond; second; minute; hour; day; week; month; year; decade; century; millennium".split(";"),u=" milliseconds; seconds; minutes; hours; days; weeks; months; years; decades; centuries; millennia".split(";"),d=" and ",h=", ",p="",m=function(e){return e},f=s};return l.setLabels=function(e,t,i,n,s,o,r){y({singular:e,plural:t,last:i,delim:n,empty:s,formatNumber:o,formatter:r})},l.resetLabels=b,b(),e&&e.exports?e.exports=l:"function"==typeof window.define&&"undefined"!=typeof window.define.amd&&window.define("countdown",[],function(){return l}),l}(module);/* ============================================================
 * bootstrap-dropdown.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",s=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(n){var s,o,r=e(this);if(!r.is(".disabled, :disabled"))return s=i(r),o=s.hasClass("open"),t(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),s.toggleClass("open")),r.focus(),!1},keydown:function(t){var s,o,r,a,l;if(/(38|40|27)/.test(t.keyCode)&&(s=e(this),t.preventDefault(),t.stopPropagation(),!s.is(".disabled, :disabled"))){if(r=i(s),a=r.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&r.find(n).focus(),s.click();o=e("[role=menu] li:not(.divider):visible a",r),o.length&&(l=o.index(o.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,s.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",s.prototype.keydown)}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,s=this.element,o=s.closest("ul:not(.dropdown-menu)"),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(t=o.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),s.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(s.parent("li"),o),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),r=n&&e.support.transition&&o.hasClass("fade");r?o.one(e.support.transition.end,s):s(),o.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),s=n.data("tab");s||n.data("tab",s=new t(this)),"string"==typeof i&&s[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,s;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(s=n.data("collapse"),s&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var s=this,o=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),s=n.data("collapse"),o=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);s||n.data("collapse",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),s=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(s).data("collapse")?"toggle":n.data();n[e(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(s).collapse(o)})}(window.jQuery),function(e){e.urlParam=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0}}(jQuery),function(e,t,i){e.widget("gigmit.media_player",{options:{item_list:'[data-view="media-player-item-list"]',stage:'[data-view="media-player-stage"]',vendors:{mixcloud:{player_url:"//www.mixcloud.com/widget/iframe/?autoplay=1&embed_type=widget_standard&embed_uuid={#id}&feed=https%3A%2F%2Fwww.mixcloud.com{#feedURL}&hide_artwork=1&hide_cover=0&hide_tracklist=1&light=&mini=&replace=0&stylecolor="},soundcloud:{player_url:"https://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/{#id}&"+e.param({show_artwork:"true",auto_play:"true"})},vimeo:{player_url:"https://player.vimeo.com/video/{#id}?title=0&byline=0&portrait=0&autoplay=1"},youtube:{player_url:"https://www.youtube.com/embed/{#id}?autoplay=1"},bandcamp:{player_url:"https://bandcamp.com/EmbeddedPlayer/{#id}/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/artwork=small/autoplay=1/transparent=true/"},spotify:{player_url:"/spotify/track/{#id}/preview_embed"}}},_init:function(){this.currentItem=null,this._initElements(),this._handleEvents()},_initElements:function(){this.elements={},this.elements.$base=e(this.element),this.elements.$list=e(this.options.item_list),this.elements.$stage_container=e(this.options.stage),this.elements.$stage=e("<div>").addClass("media-player-stage"),this.elements.$stage.hide(),this.elements.$widget=e("<iframe>").attr("frameborder",0),this.elements.$base.find(".scroll-container").nanoScroller(t.Constants.nanoscrollerDefaultOptions)},_handleEvents:function(){var t=this.elements.$list,n=this.elements.$stage,s=this.elements.$stage_container,o=this.elements.$widget,r=this;t.find("li").on("click",function(){var a=e(this).data("vendor"),l=e(this).data("vendor-item-id"),c=a+l;n.remove(),r.currentItem==c?(e(this).removeClass("active"),r._setIcon(e(this),"icon-play-circle"),r.currentItem=null):(i.has(r.options,"tracking")&&(i.has(r.options.tracking,"artist")&&window.Gigmit.AmplitudeTracker.setEventPropertiesForArtist(r.options.tracking.artist),i.has(r.options.tracking,"promoter")&&window.Gigmit.AmplitudeTracker.setEventPropertiesForPromoter(r.options.tracking.promoter)),window.Gigmit.AmplitudeTracker.trackArtistExternalMediaItemPlay({vendor:a,vendorItemId:l}),e.each(t.find("li.active"),function(){e(this).removeClass("active"),r._setIcon(e(this),"icon-play-circle")}),r.currentItem=a+l,e(this).addClass("active"),r._setIcon(e(this),"icon-stop"),r._prepareWidget(a,l),n.append(o),s.append(n),n.fadeIn("fast"))})},_setIcon:function(e,t){e.find('i[class*="icon"]').attr("class",t)},_prepareWidget:function(e,t){var i,n=this.elements.$widget,s=this.options.vendors[e];if("mixcloud"==e){var o=t.split(";")[0],r=t.split(";")[1];i=s.player_url.replace("{#id}",o),i=i.replace("{#feedURL}",r)}else i=s.player_url.replace("{#id}",t);n.attr("src",i)}})}(window.jQuery,window.Gigmit,window._),function(e,t){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var e=new Date;return i(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function o(t,i){function n(e,t){return t.toLowerCase()}var s,o=e(t).data(),r={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var l in o)i.test(l)&&(s=l.replace(a,n),r[s]=o[l]);return r}function r(t){var i={};if(f[t]||(t=t.split("-")[0],f[t])){var n=f[t];return e.each(p,function(e,t){t in n&&(i[t]=n[t])}),i}}var a=e(window),l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,n=this.length;n>i;i++)if(this[i].valueOf()===t)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new l;return e.replace(this),e}};return function(){var i=[];return i.push.apply(i,arguments),e.extend(i,t),i}}(),c=function(t,i){this.dates=new l,this.viewDate=n(),this.focusDate=null,this._process_options(i),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),n=i.language;switch(f[n]||(n=n.split("-")[0],f[n]||(n=h.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate!==!1?i.multidate=Math.max(0,i.multidate):i.multidate=1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=m.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=m.parseDate(i.startDate,s,i.language):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=m.parseDate(i.endDate,s,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)});var o=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(o=e.grep(o,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===o.length)switch(o[0]){case"top":case"bottom":i.orientation.y=o[0];break;case"left":case"right":i.orientation.x=o[0]}else r=e.grep(o,function(e){return/^left|right$/.test(e)}),i.orientation.x=r[0]||"auto",r=e.grep(o,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var i,n,s,o=0;o<e.length;o++)i=e[o][0],2===e[o].length?(n=t,s=e[o][1]):3===e[o].length&&(n=e[o][1],s=e[o][2]),i.on(s,n)},_unapplyEvents:function(e){for(var i,n,s,o=0;o<e.length;o++)i=e[o][0],2===e[o].length?(s=t,n=e[o][1]):3===e[o].length&&(s=e[o][1],n=e[o][2]),i.off(n,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.dates.get(-1),s=this._utc_to_local(n);this.element.trigger({type:t,date:s,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return m.formatDate(i,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(i){i===t&&(i=this.o.format);var n=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,i,n)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=this.picker.outerWidth(),i=this.picker.outerHeight(),n=10,s=a.width(),o=a.height(),r=a.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=c.left,p=c.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=t-d)):(this.picker.addClass("datepicker-orient-left"),c.left<0?h-=c.left-n:c.left+t>s&&(h=s-t-n));var f,m,g=this.o.orientation.y;"auto"===g&&(f=-r+c.top-i,m=r+o-(c.top+u+i),g=Math.max(f,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?p+=u:p-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:h,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),i=[],n=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),n=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=e.map(i,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),i=e.grep(i,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():i.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+f[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+f[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<n||t.getUTCFullYear()===n&&t.getUTCMonth()<s?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()===n&&t.getUTCMonth()>s)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var n,s=new Date(this.viewDate),o=s.getUTCFullYear(),r=s.getUTCMonth(),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=f[this.o.language].today||f.en.today||"",h=f[this.o.language].clear||f.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[r]+" "+o),this.picker.find("tfoot th.today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(h).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=i(o,r-1,28),g=m.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(g),p.setUTCDate(g-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var _,y=[];p.valueOf()<v;){if(p.getUTCDay()===this.o.weekStart&&(y.push("<tr>"),this.o.calendarWeeks)){var b=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),w=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),x=new Date(Number(x=i(w.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),k=(w-x)/864e5/7+1;y.push('<td class="cw">'+k+"</td>")}if(_=this.getClassNames(p),_.push("day"),this.o.beforeShowDay!==e.noop){var S=this.o.beforeShowDay(this._utc_to_local(p));S===t?S={}:"boolean"==typeof S?S={enabled:S}:"string"==typeof S&&(S={classes:S}),S.enabled===!1&&_.push("disabled"),S.classes&&(_=_.concat(S.classes.split(/\s+/))),S.tooltip&&(n=S.tooltip)}_=e.unique(_),y.push('<td class="'+_.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var C=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===o&&C.eq(t.getUTCMonth()).addClass("active")}),(a>o||o>c)&&C.addClass("disabled"),o===a&&C.slice(0,l).addClass("disabled"),o===c&&C.slice(u+1).addClass("disabled"),y="",o=10*parseInt(o/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var M,D=e.map(this.dates,function(e){return e.getUTCFullYear()}),P=-1;11>P;P++)M=["year"],-1===P?M.push("old"):10===P&&M.push("new"),-1!==e.inArray(o,D)&&M.push("active"),(a>o||o>c)&&M.push("disabled"),y+='<span class="'+M.join(" ")+'">'+o+"</span>",o+=1;T.html(y)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var n,s,o,r=e(t.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=m.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=i(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,s=r.parent().find("span").index(r),n=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(n,s,o))):(o=1,s=0,n=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(n),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(n,s,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r.is(".old")?0===s?(s=11,n-=1):s-=1:r.is(".new")&&(11===s?(s=0,n+=1):s+=1),this._setDate(i(n,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?-1!==t?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,i){if(!e)return t;if(!i)return e;var n,s,o=new Date(e.valueOf()),r=o.getUTCDate(),a=o.getUTCMonth(),l=Math.abs(i);if(i=i>0?1:-1,1===l)s=-1===i?function(){return o.getUTCMonth()===a}:function(){return o.getUTCMonth()!==n},n=a+i,o.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var c=0;l>c;c++)o=this.moveMonth(o,i);n=o.getUTCMonth(),o.setUTCDate(r),s=function(){return n!==o.getUTCMonth()}}for(;s();)o.setUTCDate(--r),o.setUTCMonth(n);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,i,s,o=!1,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),t),s=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),t),s=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+t),s=new Date(r),s.setUTCDate(r.getUTCDate()+t)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),t),s=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),t),s=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+7*t),s=new Date(r),s.setUTCDate(r.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),o=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(o){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var u=function(t,i){this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};u.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var i=e(t.target).data("datepicker"),n=i.getUTCDate(),s=e.inArray(t.target,this.inputs),o=this.inputs.length;if(-1!==s){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(n)}),n<this.dates[s])for(;s>=0&&n<this.dates[s];)this.pickers[s--].setUTCDate(n);else if(n>this.dates[s])for(;o>s&&n>this.dates[s];)this.pickers[s++].setUTCDate(n);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var d=e.fn.datepicker;e.fn.datepicker=function(i){var n=Array.apply(null,arguments);n.shift();var s;return this.each(function(){var a=e(this),l=a.data("datepicker"),d="object"==typeof i&&i;if(!l){var p=o(this,"date"),f=e.extend({},h,p,d),m=r(f.language),g=e.extend({},h,m,p,d);if(a.is(".input-daterange")||g.inputs){var v={inputs:g.inputs||a.find("input").toArray()};a.data("datepicker",l=new u(this,e.extend(g,v)))}else a.data("datepicker",l=new c(this,g))}return"string"==typeof i&&"function"==typeof l[i]&&(s=l[i].apply(l,n),s!==t)?!1:void 0}),s!==t?s:this};var h=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var f=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(n,s,o){function r(){var e=this.slice(0,h[u].length),t=h[u].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;"string"==typeof s&&(s=m.parseFormat(s));var a,l,u,d=/([\-+]\d+)([dmwy])/,h=n.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){for(n=new Date,u=0;u<h.length;u++)switch(a=d.exec(h[u]),l=parseInt(a[1]),a[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=c.prototype.moveMonth.call(c.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+7*l);break;case"y":n=c.prototype.moveYear.call(c.prototype,n,l)}return i(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}h=n&&n.match(this.nonpunctuation)||[],n=new Date;var p,g,v={},_=["yyyy","yy","M","MM","m","mm","d","dd"],y={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};y.M=y.MM=y.mm=y.m,y.dd=y.d,n=i(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=s.parts.slice();if(h.length!==b.length&&(b=e(b).filter(function(t,i){return-1!==e.inArray(i,_)}).toArray()),h.length===b.length){var w;for(u=0,w=b.length;w>u;u++){if(p=parseInt(h[u],10),a=b[u],isNaN(p))switch(a){case"MM":g=e(f[o].months).filter(r),p=e.inArray(g[0],f[o].months)+1;break;case"M":g=e(f[o].monthsShort).filter(r),p=e.inArray(g[0],f[o].monthsShort)+1}v[a]=p}var x,k;for(u=0;u<_.length;u++)k=_[u],k in v&&!isNaN(v[k])&&(x=new Date(n),y[k](x,v[k]),isNaN(x)||(n=x))}return n},formatDate:function(t,i,n){if(!t)return"";"string"==typeof i&&(i=m.parseFormat(i));var s={d:t.getUTCDate(),D:f[n].daysShort[t.getUTCDay()],DD:f[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:f[n].monthsShort[t.getUTCMonth()],MM:f[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,t=[];for(var o=e.extend([],i.separators),r=0,a=i.parts.length;a>=r;r++)o.length&&t.push(o.shift()),t.push(s[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=d,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(e){e.fn.datepicker.dates.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam","Son"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa","So"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute"}}(jQuery),function(e,t){e(t).ready(function(){var t=e("ul.feature-list");e.each(t,function(){var t=e(this),i=t.parent().find("a.triggers-feature-list-details"),n=t.find("li p"),s=i.find("i");0===n.length&&i.hide(),i.click(function(e){n.filter(":visible").length>0?(n.slideUp("fast"),
s.attr("class",s.attr("class").replace("up","down"))):(n.slideDown("fast"),s.attr("class",s.attr("class").replace("down","up"))),e.preventDefault()})})})}(jQuery,document),function(e,t,i){e.widget("gigmit.expandableList",{options:{max_items:5,css:{show_more_item_class:"more"}},_setOption:function(e,t){this.options[e]=t},_create:function(){var t=this;this.options.text=I18n.t("common.show_all"),this.options.text_hidden=I18n.t("common.show_not_all"),this.$obj=e(this.element),this.$list_items=this.$obj.find("li"),this.expanded=!0;var i=1;e.each(this.$list_items,function(){i>t.options.max_items&&e(this).hide(),i++}),this._initElements(),this._initEventHandlers(),i>this.options.max_items&&(this.expanded=!1,this.$show_more_item.show())},_appendShowMoreLink:function(){},_initElements:function(){this._initShowMoreItem()},_initShowMoreItem:function(){var t=e("<li>").addClass(this.options.css.show_more_item_class),i=e("<a>").attr("href","#"),n=e("<i>").addClass("icon-chevron-down"),s=e("<span>").text(this.options.text);i.append(n," ",s),t.append(i),t.hide(),this.$show_more_item=t,this.$obj.append(this.$show_more_item)},_initEventHandlers:function(){var e=this;this.$show_more_item.find("a").on("click",function(t){return e.expanded?e._hideListItems():e._showAllListItems(),e.expanded=!e.expanded,!1})},_switchState:function(){},_hideListItems:function(){var t=this,i=1;e.each(this.$list_items,function(){i>t.options.max_items&&e(this).hide(),i++}),this.$show_more_item.find("i").attr("class","icon-chevron-down"),this.$show_more_item.find("span").text(this.options.text)},_showAllListItems:function(){this.$list_items.filter(":hidden").show(),this.$show_more_item.find("i").attr("class","icon-chevron-up"),this.$show_more_item.find("span").text(this.options.text_hidden)}}),e(t).ready(function(){e(".expandable-list").expandableList()})}(jQuery,document,window),function(e,t){e.Gigmit.Views.Components.ExpandableText=Backbone.View.extend({events:{'click [data-action="show-text-long-version"]':"_showLongVersion"},initialize:function(){this.$shortVersionContainer=this.$el.find(".text-short-version"),this.$longVersionContainer=this.$el.find(".text-long-version"),this.$readMoreButton=this.$el.find('[data-action="show-text-long-version"]')},_showLongVersion:function(e){e.preventDefault(),this.$shortVersionContainer.hide(),this.$readMoreButton.hide(),this.$longVersionContainer.show()}}),t(function(){t(".expandable-text").each(function(){new Gigmit.Views.Components.ExpandableText({el:t(this)})})})}(window,jQuery),function(e,t){e(t).ready(function(){e('[data-action="expand-row"]').click(function(){e(this).toggleClass("is-active"),e(this).nextUntil('[data-action="expand-row"]','[data-view="expandable-row"]').toggle()})})}(jQuery,document),function(e,t){e(t).ready(function(){e(".dropdown__link").click(function(){e(this).closest(".dropdown__menu").find(".dropdown__link.is-active").removeClass("is-active"),e(this).addClass("is-active");var t=e(this).parents().siblings("[data-update-text]");t.length&&t.find("span").text(e(this).text())}),e("body").on("touchstart.dropdown",".dropdown__menu",function(e){e.stopPropagation()}),propagation_elements=["input","select","a.select2-search-choice-close i","ul.select2-choices","[data-stop-propagation]"],e(".dropdown").on("click",propagation_elements.join(","),function(e){e.stopPropagation()})})}(jQuery,document),function(e,t){e(t).ready(function(){Gigmit.initTimeFromNow=function(){moment.locale(Gigmit.current_locale),e(".timeago").each(function(t,i){var n=e(i),s=n.attr("datetime"),o=moment(s,"YYYY-MM-DD HH:mm:ss Z").fromNow();n.html(o)})},Gigmit.initTimeFromNow()})}(jQuery,document),function(e){e(function(){e("[data-goto]").click(function(t){var i=e(this).data("goto");return window.location=i,!1})})}(jQuery),function(e,t,i,n){"de"==n.locale&&i.setLabels(" | Sekunde| Minute| Stunde| | | | | | | "," | Sekunden| Minuten| Stunden| | | | | | | "," und ",", ",""),e(function(){e('[data-component="countdown"]').each(function(){var n=e(this),s=t(n.data("countdown-end-date"))._d;i(s,function(e){n.html(e.toHTML("strong",""))},i.HOURS|i.MINUTES|i.SECONDS)})})}(window.jQuery,window.moment,window.countdown,window.I18n),/*! nanoScrollerJS - v0.7.6 - 2014
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2014 James Florentino; Licensed MIT */
function(e,t,i){"use strict";var n,s,o,r,a,l,c,u,d,h,p,f,m,g,v,_,y,b,w,x,k,S,C,T,M,D,P,E,A;k={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},_="scrollbar",v="scroll",u="mousedown",d="mousemove",p="mousewheel",h="mouseup",g="resize",a="drag",b="up",m="panedown",o="DOMMouseScroll",r="down",w="wheel",l="keydown",c="keyup",y="touchmove",n="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,s=null,M=t.requestAnimationFrame,x=t.cancelAnimationFrame,P=i.createElement("div").style,A=function(){var e,t,i,n,s,o;for(n=["t","webkitT","MozT","msT","OT"],e=s=0,o=n.length;o>s;e=++s)if(i=n[e],t=n[e]+"ransform",t in P)return n[e].substr(0,n[e].length-1);return!1}(),E=function(e){return A===!1?!1:""===A?e:A+e.charAt(0).toUpperCase()+e.substr(1)},D=E("transform"),C=D!==!1,S=function(){var e,t,n;return e=i.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=v,t.top="-9999px",i.body.appendChild(e),n=e.offsetWidth-e.clientWidth,i.body.removeChild(e),n},T=function(){var e,i,n;return i=t.navigator.userAgent,(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),e&&+n>23):!1},f=function(){function l(n,o){this.el=n,this.options=o,s||(s=S()),this.$el=e(this.el),this.doc=e(this.options.documentContext||i),this.win=e(this.options.windowContext||t),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return l.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===o)(t===r&&e.originalEvent.detail>0||t===b&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===p){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===r&&e.originalEvent.wheelDelta<0||t===b&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},l.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},l.prototype.updateScrollValues=function(){var e;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},l.prototype.setOnScrollStyles=function(){var e,t=this;C?(e={},e[D]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},M?this.scrollRAF||(this.scrollRAF=M(function(){t.scrollRAF=null,t.slider.css(e)})):this.slider.css(e)},l.prototype.createEvents=function(){var e=this;this.events={down:function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.pane.addClass("active"),e.doc.bind(d,e.events[a]).bind(h,e.events[b]),!1},drag:function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.offsetY,e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1},up:function(t){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind(d,e.events[a]).unbind(h,e.events[b]),!1},resize:function(t){e.reset()},panedown:function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1},scroll:function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,r),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,b),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))},wheel:function(t){var i;if(null!=t)return i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,i&&(e.sliderY+=-i/3),e.scroll(),!1}}},l.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(g,e[g]),this.iOSNativeScrolling||(this.slider.bind(u,e[r]),this.pane.bind(u,e[m]).bind(""+p+" "+o,e[w])),this.$content.bind(""+v+" "+p+" "+o+" "+y,e[v])},l.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(g,e[g]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+v+" "+p+" "+o+" "+y,e[v])},l.prototype.generate=function(){var e,i,n,o,r,a;return o=this.options,r=o.paneClass,a=o.sliderClass,e=o.contentClass,this.$el.find("."+r).length||this.$el.find("."+a).length||this.$el.append('<div class="'+r+'"><div class="'+a+'" /></div>'),this.pane=this.$el.children("."+r),this.slider=this.pane.find("."+a),0===s&&T()?(n=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/\D+/g,""),i={right:-14,paddingRight:+n+14}):s&&(i={right:-s},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},l.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},l.prototype.reset=function(){var e,t,i,o,r,a,l,c,u,d;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,i=e.style,o=i.overflowY,n&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+s,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>u?u:e.scrollHeight)),a=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),r=parseInt(this.pane.css("bottom"),10),l=a+c+r,d=Math.round(l/t*l),d<this.options.sliderMinHeight?d=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&d>this.options.sliderMaxHeight&&(d=this.options.sliderMaxHeight),o===v&&i.overflowX!==v&&(d+=s),this.maxSliderTop=l-d,this.contentHeight=t,this.paneHeight=a,this.paneOuterHeight=l,this.sliderHeight=d,this.slider.height(d),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&o!==v?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&o===v?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this)},l.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop((this.paneHeight-this.contentHeight+s)*this.sliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},l.prototype.scrollBottom=function(e){return this.isActive?(this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(p),this):void 0},l.prototype.scrollTop=function(e){return this.isActive?(this.reset(),this.$content.scrollTop(+e).trigger(p),this):void 0},l.prototype.scrollTo=function(e){return this.isActive?(this.reset(),this.scrollTop(this.$el.find(e).get(0).offsetTop),this):void 0},l.prototype.stop=function(){return x&&this.scrollRAF&&(x(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},l.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},l.prototype.flash=function(){var e=this;if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(){e.pane.removeClass("flashed")},this.options.flashDelay),this},l}(),e.fn.nanoScroller=function(t){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=e.extend({},k,t),this.nanoscroller=n=new f(this,i)),t&&"object"==typeof t){if(e.extend(n.options,t),null!=t.scrollBottom)return n.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return n.scrollTop(t.scrollTop);if(t.scrollTo)return n.scrollTo(t.scrollTo);if("bottom"===t.scroll)return n.scrollBottom(0);if("top"===t.scroll)return n.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return n.scrollTo(t.scroll);if(t.stop)return n.stop();if(t.destroy)return n.destroy();if(t.flash)return n.flash()}return n.reset()})},e.fn.nanoScroller.Constructor=f}(jQuery,window,document),function(e,t){e(function(){e(".scroll-container").nanoScroller(t.Constants.nanoscrollerDefaultOptions);var i=e('.is-active[data-view="conversation-list-item"]');i.length&&e('[data-view="conversation-list"]').nanoScroller({scrollTo:i})})}(window.jQuery,window.Gigmit),function(e,t,i,n){var s=function(){var i=58909178,n="//securepubads.g.doubleclick.net/tag/js/gpt.js",s=[],o=e('script[src="'+n+'"]').length;if(window.googletag=window.googletag||{cmd:[]},!o){var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.src=n;var a=e("head");a.append(r);var l=function(){};r.onerror=l,"none"===r.style.display&&l()}var c=function(e){var i=window.Gigmit||{};if(!t.isEmpty(i)){e.setTargeting("u_locale",i.current_locale);var n=i.artist;t.isUndefined(n)||e.setTargeting("u_genres",[n.get("main_music_genre.sanitized_name")])}};this.defineAndDisplaySlot=function(e,n,o){var r=["",i,e].join("/");window.googletag.cmd.push(function(){var e=t.findWhere(s,{elementId:o});if(t.isUndefined(e)){var i=window.googletag.defineSlot(r,n,o);c(i),i.addService(window.googletag.pubads()),e={elementId:o,gptSlot:i},s.push(e)}window.googletag.enableServices(),window.googletag.display(o)})}},o=function(e){e=t.isObject(e)?e:{};var i=new s;this.initAdUnit=function(e){var t=e.getAdUnitId(),n=e.getAdDimensions(),s=e.getElementId();i.defineAndDisplaySlot(t,n,s)}};e(function(){window.Gigmit.Ads=new o;var i={skyscraper_overall_right:{},gig_search_skyscraper:{},"gig-search-skyscraper-left-2":{},"gig-search-skyscraper-right-2":{},mobile_leaderboard_public_gig_search_top:{},edit_artist_page_leaderboard:{},dashboard_artists_sidebar_right:{},artist_dashboard_sidebar_non_premium:{},dashboard_promoters_sidebar_right:{},login_leaderboard:{},public_gig_page_rectangle_sidebar_right:{},public_gig_page_leaderboard:{},medium_rectangle_gig_details:{},leaderboard_inquiries_list_artist:{},"venue-database_results-list_skyscraper":{}};t.each(t.keys(i),function(t){var i=e('[data-ad-unit-id="'+t+'"]');i.length&&new window.Gigmit.Views.Ad({el:i}).render()})})}(window.jQuery,window._,window.Gigmit,window.Backbone),function(e,t){var i=e.View.extend({className:"advertisement",initialize:function(e){e=t.defaults(e,{}),this.template=e.template},render:function(){return t.isUndefined(this.template)||this.$el.html(this.template),this.$adUnitContainer=this.$el.find("[data-adunit]"),this.$adUnitContainer.attr("id",this.cid),this._injectDisplayScript(),window.Gigmit.Ads.initAdUnit(this),this._addGptEventListeners(),this},getAdUnitId:function(){return this.$adUnitContainer.data("adunit")},getAdDimensions:function(){var e=this.$adUnitContainer.data("dimensions"),i=[];return e?i=t.map(e.split(","),function(e){return t.map(e.split("x"),function(e){return parseInt(e,10)})}):i.push([this.$adUnitContainer.width(),this.$adUnitContainer.height()]),i},getElementId:function(){return this.cid},_injectDisplayScript:function(){var e=window.document.createElement("script");e.type="text/javascript",e.innerText='window.googletag.cmd.push(function() { window.googletag.display("'+this.cid+'"); });',this.$adUnitContainer.append(e)},_addGptEventListeners:function(){window.googletag.cmd.push(t.bind(function(){window.googletag.pubads().addEventListener("slotRenderEnded",t.bind(function(e){var t=e.slot.getSlotId().getDomId();if(t==this.getElementId()&&e.isEmpty){var i=this.$el.closest('[data-view="ad-container"]');i.length&&i.addClass("is-hidden"),this.$el.addClass("is-hidden")}},this))},this))}});window.Gigmit.Views.Ad=i}(window.Backbone,window._),function(e,t){window.Gigmit.Views.Components.Tooltip=Backbone.View.extend({tooltipOptions:{overwrite:!1,hide:{fixed:!0,delay:240},position:{my:"top center",at:"bottom center"},style:{classes:["ui-tooltip-shadow","qooltip"].join(" "),tip:{height:7,width:15},width:"auto"}},initialize:function(e,t){this._prepareOptions(e,t),this.$el.data("qtip")||(_.isUndefined(t)?this.$el.qtip(this.tooltipOptions):this.$el.qtip(this.tooltipOptions,t))},_prepareOptions:function(e,i){var n=this.$el.data("tooltip-class");position=this.$el.data("tooltip-position"),text=this.$el.data("tooltip-text"),i&&(e=t.extend(!0,{},e,{show:{event:i.type,ready:!0}})),position&&("top"==position&&(e.position={my:"bottom center",at:"top center"}),"right"==position&&(e.position={my:"center left",at:"center right"})),text&&(e=t.extend(!0,{},e,{content:{text:text}})),n&&(e.cssClasses=[this.tooltipOptions.cssClasses,n].join(" ")),this.tooltipOptions=t.extend(!0,{},this.tooltipOptions,e)}})}(window,jQuery),function(e,t,i){var n=t.View.extend({_addProfileLink:!1,className:"app-header__profile-select-option",template:i.template('<span class="app-header__profile-select-option-letter">{{ firstLetter }}</span> {{ profileName }}'),initialize:function(e){this.addProfileLink=e.addProfileLink||this._addProfileLink},render:function(){var e=i.trim(this.model.text);return this.$el.html(this.template({firstLetter:this.addProfileLink?"+":e.slice(0,1),profileName:e})),this.$el.toggleClass("app-header__profile-select-option--add-profile",this.addProfileLink),this}}),s=t.View.extend({render:function(){return this.$el.find('[data-view="profile-select"]').select2({containerCssClass:"app-header__profile-select",dropdownAutoWidth:!0,dropdownCssClass:"app-header__profile-select-dropdown",formatSelection:function(e){return new n({model:e}).render().$el},formatResult:function(t){var s=t.text,o=e(i.first(t.element)).data("type");return i.has(t,"children")||(s=new n({model:t,addProfileLink:void 0==o}).render().$el),s}}).on("change",function(e){window.location=e.val}),this}});e(function(){var t=e('[data-component="site-header"]');void 0!==t&&new s({el:t}).render()})}(window.jQuery,window.Backbone,window._),function(e,t,i){i(function(){var e=['[data-toggle="tooltip"]',"i.tooltip"].join(", ");i(e).each(function(){var e=i(this);tooltipView=new Gigmit.Views.Components.Tooltip({el:e})}),i(t).on("mouseover",e,function(e){var t=i(e.currentTarget);t.data("qtip")||(tooltipView=new Gigmit.Views.Components.Tooltip({el:t},e))})})}(window,document,jQuery),function(e,t,i){var n=e.View.extend({className:"notify__container is-hidden",template:i.template('<div class="notify__icon"><i class="icon-{{ icon }}"></i></div><div class="notify__message">{{ message }}</div><div class="notify__close-button icon-remove"></div>'),_autoHide:!1,_hideNotificationTimeout:5e3,_notificationTypes:["info","warn","error","success"],events:{"click .notify__close-button":"_hide"},enableAutoHide:function(){this._autoHide=!0},disableAutoHide:function(){this._autoHide=!1},_prepareNotification:function(e,t){this.notificationType=e,this.notificationMessage=t,this._hideAndRender()},info:function(e){this._prepareNotification("info",e)},warn:function(e){this._prepareNotification("warn",e)},error:function(e){this._prepareNotification("error",e)},success:function(e){this._prepareNotification("success",e)},hide:function(){this._hide()},_hide:function(){this.$el.addClass("is-hidden")},_hideAndRender:function(){this._hide(),i.delay(i.bind(this.render,this),600)},_getIcon:function(){var e;switch(this.notificationType){case"info":e="info-sign";break;case"warn":e="warning-sign";break;case"error":e="exclamation-sign";break;case"success":e="ok-sign"}return e},render:function(){return this.$el.html(this.template({icon:this._getIcon(),message:this.notificationMessage})),i.each(this._notificationTypes,i.bind(function(e){this.$el.removeClass("notify__container--"+e)},this)),this.$el.addClass("notify__container--"+this.notificationType),this.$el.removeClass("is-hidden"),this._autoHide&&setTimeout(i.bind(function(){this.$el.addClass("is-hidden")},this),this._hideNotificationTimeout),this}});t(function(){window.Gigmit.Notify=new n,t("body").append(window.Gigmit.Notify.$el)})}(window.Backbone,window.jQuery,window._),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var s,o=this;o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.focussed=!1,o.interrupted=!1,o.hidden="hidden",o.paused=!0,o.positionProp=null,o.respondTo=null,o.rowCount=1,o.shouldClick=!0,o.$slider=e(t),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.visibilityChange="visibilitychange",o.windowWidth=0,o.windowTimer=null,s=e(t).data("slick")||{},o.options=e.extend({},o.defaults,n,s),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,"undefined"!=typeof document.mozHidden?(o.hidden="mozHidden",o.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(o.hidden="webkitHidden",o.visibilityChange="webkitvisibilitychange"),o.autoPlay=e.proxy(o.autoPlay,o),o.autoPlayClear=e.proxy(o.autoPlayClear,o),o.autoPlayIterator=e.proxy(o.autoPlayIterator,o),o.changeSlide=e.proxy(o.changeSlide,o),o.clickHandler=e.proxy(o.clickHandler,o),o.selectHandler=e.proxy(o.selectHandler,o),o.setPosition=e.proxy(o.setPosition,o),o.swipeHandler=e.proxy(o.swipeHandler,o),o.dragHandler=e.proxy(o.dragHandler,o),o.keyHandler=e.proxy(o.keyHandler,o),o.instanceUid=i++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.registerBreakpoints(),o.init(!0)}var i=0;return t}(),t.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var s=this;if("boolean"==typeof i)n=i,i=null;else if(0>i||i>=s.slideCount)return!1;s.unload(),"number"==typeof i?0===i&&0===s.$slides.length?e(t).appendTo(s.$slideTrack):n?e(t).insertBefore(s.$slides.eq(i)):e(t).insertAfter(s.$slides.eq(i)):n===!0?e(t).prependTo(s.$slideTrack):e(t).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),s.$slidesCache=s.$slides,s.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(t=-t),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:t},s.options.speed,s.options.easing,i):s.$slideTrack.animate({top:t},s.options.speed,s.options.easing,i):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),e({animStart:s.currentLeft}).animate({animStart:t},{duration:s.options.speed,easing:s.options.easing,step:function(e){e=Math.ceil(e),s.options.vertical===!1?(n[s.animType]="translate("+e+"px, 0px)",s.$slideTrack.css(n)):(n[s.animType]="translate(0px,"+e+"px)",s.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(s.applyTransition(),t=Math.ceil(t),s.options.vertical===!1?n[s.animType]="translate3d("+t+"px, 0px, 0px)":n[s.animType]="translate3d(0px,"+t+"px, 0px)",s.$slideTrack.css(n),i&&setTimeout(function(){s.disableTransition(),i.call()},s.options.speed))},t.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&null!==i&&(i=e(i).not(t.$slider)),i},t.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};t.options.fade===!1?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0&&n.slideCount>n.options.slidesToShow){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,s,o,r,a=this;if(n=document.createDocumentFragment(),o=a.$slider.children(),a.options.rows>0){for(r=a.options.slidesPerRow*a.options.rows,s=Math.ceil(o.length/r),e=0;s>e;e++){var l=document.createElement("div");for(t=0;t<a.options.rows;t++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var u=e*r+(t*a.options.slidesPerRow+i);o.get(u)&&c.appendChild(o.get(u))}l.appendChild(c)}n.appendChild(l)}a.$slider.empty().append(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,s,o,r=this,a=!1,l=r.$slider.width(),c=window.innerWidth||e(window).width();if("window"===r.respondTo?o=c:"slider"===r.respondTo?o=l:"min"===r.respondTo&&(o=Math.min(c,l)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(n in r.breakpoints)r.breakpoints.hasOwnProperty(n)&&(r.originalSettings.mobileFirst===!1?o<r.breakpoints[n]&&(s=r.breakpoints[n]):o>r.breakpoints[n]&&(s=r.breakpoints[n]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||i)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),a=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),a=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t),a=s),t||a===!1||r.$slider.trigger("breakpoint",[r,a])}},t.prototype.changeSlide=function(t,i){var n,s,o,r=this,a=e(t.currentTarget);switch(a.is("a")&&t.preventDefault(),a.is("li")||(a=a.closest("li")),o=r.slideCount%r.options.slidesToScroll!==0,n=o?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":s=0===n?r.options.slidesToScroll:r.options.slidesToShow-n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,i);break;case"next":s=0===n?r.options.slidesToScroll:n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,i);break;case"index":var l=0===t.data.index?0:t.data.index||a.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(l),!1,i),a.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var s in t){if(e<t[s]){e=i;break}i=t[s]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(e.options.infinite===!0)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,s,o=this,r=0;return o.slideOffset=0,i=o.$slides.first().outerHeight(!0),o.options.infinite===!0?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,s=-1,o.options.vertical===!0&&o.options.centerMode===!0&&(2===o.options.slidesToShow?s=-1.5:1===o.options.slidesToShow&&(s=-2)),
r=i*o.options.slidesToShow*s),o.slideCount%o.options.slidesToScroll!==0&&e+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(e>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(e-o.slideCount))*o.slideWidth*-1,r=(o.options.slidesToShow-(e-o.slideCount))*i*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,r=o.slideCount%o.options.slidesToScroll*i*-1))):e+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(e+o.options.slidesToShow-o.slideCount)*o.slideWidth,r=(e+o.options.slidesToShow-o.slideCount)*i),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,r=0),o.options.centerMode===!0&&o.slideCount<=o.options.slidesToShow?o.slideOffset=o.slideWidth*Math.floor(o.options.slidesToShow)/2-o.slideWidth*o.slideCount/2:o.options.centerMode===!0&&o.options.infinite===!0?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:o.options.centerMode===!0&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),t=o.options.vertical===!1?e*o.slideWidth*-1+o.slideOffset:e*i*-1+r,o.options.variableWidth===!0&&(n=o.slideCount<=o.options.slidesToShow||o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow),t=o.options.rtl===!0?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,o.options.centerMode===!0&&(n=o.slideCount<=o.options.slidesToShow||o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow+1),t=o.options.rtl===!0?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(o.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,s=[];for(t.options.infinite===!1?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);e>i;)s.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return s},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n,s=this;return n=s.options.centerMode===!0?s.slideWidth*Math.floor(s.options.slidesToShow/2):0,s.options.swipeToSlide===!0?(s.$slideTrack.find(".slick-slide").each(function(t,o){return o.offsetLeft-n+e(o).outerWidth()/2>-1*s.swipeLeft?(i=o,!1):void 0}),t=Math.abs(e(i).attr("data-slick-index")-s.currentSlide)||1):s.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var s=n.indexOf(i);if(e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),-1!==s){var o="slick-slide-control"+t.instanceUid+s;e("#"+o).length&&e(this).attr({"aria-describedby":o})}}),t.$dots.attr("role","tablist").find("li").each(function(s){var o=n[s];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+s,"aria-controls":"slick-slide"+t.instanceUid+o,"aria-label":s+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=t.currentSlide,o=s+t.options.slidesToShow;o>s;s++)t.options.focusOnChange?t.$slides.eq(s).attr({tabindex:"0"}):t.$slides.eq(s).removeAttr("tabindex");t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler)),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),s=e(this).attr("data-sizes")||r.$slider.attr("data-sizes"),o=document.createElement("img");o.onload=function(){t.animate({opacity:0},100,function(){n&&(t.attr("srcset",n),s&&t.attr("sizes",s)),t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),r.$slider.trigger("lazyLoaded",[r,t,i])})},o.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),r.$slider.trigger("lazyLoadError",[r,t,i])},o.src=i})}var i,n,s,o,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),o=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),o=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,o=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,o<=r.slideCount&&o++)),i=r.$slider.find(".slick-slide").slice(s,o),"anticipated"===r.options.lazyLoad)for(var a=s-1,l=o,c=r.$slider.find(".slick-slide"),u=0;u<r.options.slidesToScroll;u++)0>a&&(a=r.slideCount-1),i=i.add(c.eq(a)),i=i.add(c.eq(l)),a--,l++;t(i),r.slideCount<=r.options.slidesToShow?(n=r.$slider.find(".slick-slide"),t(n)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(n=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),t(n)):0===r.currentSlide&&(n=r.$slider.find(".slick-cloned").slice(-1*r.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))){var n=e(i.$slides.get(i.currentSlide));n.attr("tabindex",0).focus()}},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,s,o,r,a=this,l=e("img[data-lazy]",a.$slider);l.length?(i=l.first(),n=i.attr("data-lazy"),s=i.attr("data-srcset"),o=i.attr("data-sizes")||a.$slider.attr("data-sizes"),r=document.createElement("img"),r.onload=function(){s&&(i.attr("srcset",s),o&&i.attr("sizes",o)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),a.options.adaptiveHeight===!0&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,i,n]),a.progressiveLazyLoad()},r.onerror=function(){3>t?setTimeout(function(){a.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,i,n]),a.progressiveLazyLoad())},r.src=n):a.$slider.trigger("allImagesLoaded",[a])},t.prototype.refresh=function(t){var i,n,s=this;n=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>n&&(s.currentSlide=n),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),i=s.currentSlide,s.destroy(!0),e.extend(s,s.initials,{currentSlide:i}),s.init(),t||s.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,s=this,o=s.options.responsive||null;if("array"===e.type(o)&&o.length){s.respondTo=s.options.respondTo||"window";for(t in o)if(n=s.breakpoints.length-1,o.hasOwnProperty(t)){for(i=o[t].breakpoint;n>=0;)s.breakpoints[n]&&s.breakpoints[n]===i&&s.breakpoints.splice(n,1),n--;s.breakpoints.push(i),s.breakpointSettings[i]=o[t].settings}s.breakpoints.sort(function(e,t){return s.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;return"boolean"==typeof e?(t=e,e=t===!0?0:n.slideCount-1):e=t===!0?--e:e,n.slideCount<1||0>e||e>n.slideCount-1?!1:(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,s={};n.options.rtl===!0&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",s[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(s):(s={},n.cssTransitions===!1?(s[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(s)):(s[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(s)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,s){t=i.slideWidth*n*-1,i.options.rtl===!0?e(s).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(s).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,s,o,r=this,a=!1;if("object"===e.type(arguments[0])?(n=arguments[0],a=arguments[1],o="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],s=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?o="responsive":"undefined"!=typeof arguments[1]&&(o="single")),"single"===o)r.options[n]=s;else if("multiple"===o)e.each(n,function(e,t){r.options[e]=t});else if("responsive"===o)for(i in s)if("array"!==e.type(r.options.responsive))r.options.responsive=[s[i]];else{for(t=r.options.responsive.length-1;t>=0;)r.options.responsive[t].breakpoint===s[i].breakpoint&&r.options.responsive.splice(t,1),t--;r.options.responsive.push(s[i])}a&&(r.unload(),r.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,i,n,s,o=this;if(i=o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),o.$slides.eq(e).addClass("slick-current"),o.options.centerMode===!0){var r=o.options.slidesToShow%2===0?1:0;t=Math.floor(o.options.slidesToShow/2),o.options.infinite===!0&&(e>=t&&e<=o.slideCount-1-t?o.$slides.slice(e-t+r,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=o.options.slidesToShow+e,i.slice(n-t+1+r,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-o.options.slidesToShow).addClass("slick-center"):e===o.slideCount-1&&i.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=o.slideCount-o.options.slidesToShow?o.$slides.slice(e,e+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=o.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(s=o.slideCount%o.options.slidesToShow,n=o.options.infinite===!0?o.options.slidesToShow+e:e,o.options.slidesToShow==o.options.slidesToScroll&&o.slideCount-e<o.options.slidesToShow?i.slice(n-(o.options.slidesToShow-s),n+s).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));("ondemand"===o.options.lazyLoad||"anticipated"===o.options.lazyLoad)&&o.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(i=null,s.slideCount>s.options.slidesToShow)){for(n=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,t=s.slideCount;t>s.slideCount-n;t-=1)i=t-1,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(t=0;t<n+s.slideCount;t+=1)i=t,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),s=parseInt(n.attr("data-slick-index"));return s||(s=0),i.slideCount<=i.options.slidesToShow?void i.slideHandler(s,!1,!0):void i.slideHandler(s)},t.prototype.slideHandler=function(e,t,i){var n,s,o,r,a,l=null,c=this;return t=t||!1,c.animating===!0&&c.options.waitForAnimate===!0||c.options.fade===!0&&c.currentSlide===e?void 0:(t===!1&&c.asNavFor(e),n=e,l=c.getLeft(n),r=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?r:c.swipeLeft,c.options.infinite===!1&&c.options.centerMode===!1&&(0>e||e>c.getDotCount()*c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(r,function(){c.postSlide(n)}):c.postSlide(n))):c.options.infinite===!1&&c.options.centerMode===!0&&(0>e||e>c.slideCount-c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(r,function(){c.postSlide(n)}):c.postSlide(n))):(c.options.autoplay&&clearInterval(c.autoPlayTimer),s=0>n?c.slideCount%c.options.slidesToScroll!==0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+n:n>=c.slideCount?c.slideCount%c.options.slidesToScroll!==0?0:n-c.slideCount:n,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,s]),o=c.currentSlide,c.currentSlide=s,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(a=c.getNavTarget(),a=a.slick("getSlick"),a.slideCount<=a.options.slidesToShow&&a.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),c.options.fade===!0?(i!==!0?(c.fadeSlideOut(o),c.fadeSlide(s,function(){c.postSlide(s)})):c.postSlide(s),void c.animateHeight()):void(i!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(l,function(){c.postSlide(s)}):c.postSlide(s))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,s=this;return e=s.touchObject.startX-s.touchObject.curX,t=s.touchObject.startY-s.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?s.options.rtl===!1?"left":"right":360>=n&&n>=315?s.options.rtl===!1?"left":"right":n>=135&&225>=n?s.options.rtl===!1?"right":"left":s.options.verticalSwiping===!0?n>=35&&135>=n?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=n.touchObject.swipeLength>10?!1:!0,void 0===n.touchObject.curX)return!1;if(n.touchObject.edgeHit===!0&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,s,o,r,a=this;return o=void 0!==e.originalEvent?e.originalEvent.touches:null,!a.dragging||a.scrolling||o&&1!==o.length?!1:(t=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==o?o[0].pageX:e.clientX,a.touchObject.curY=void 0!==o?o[0].pageY:e.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2))),!a.options.verticalSwiping&&!a.swiping&&r>4?(a.scrolling=!0,!1):(a.options.verticalSwiping===!0&&(a.touchObject.swipeLength=r),i=a.swipeDirection(),void 0!==e.originalEvent&&a.touchObject.swipeLength>4&&(a.swiping=!0,e.preventDefault()),s=(a.options.rtl===!1?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),a.options.verticalSwiping===!0&&(s=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,a.options.infinite===!1&&(0===a.currentSlide&&"right"===i||a.currentSlide>=a.getDotCount()&&"left"===i)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),a.options.vertical===!1?a.swipeLeft=t+n*s:a.swipeLeft=t+n*(a.$list.height()/a.listWidth)*s,a.options.verticalSwiping===!0&&(a.swipeLeft=t+n*s),a.options.fade===!0||a.options.touchMove===!1?!1:a.animating===!0?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft)))},t.prototype.swipeStart=function(e){var t,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,s=arguments[0],o=Array.prototype.slice.call(arguments,1),r=n.length;for(e=0;r>e;e++)if("object"==typeof s||"undefined"==typeof s?n[e].slick=new t(n[e],s):i=n[e].slick[s].apply(n[e].slick,o),"undefined"!=typeof i)return i;return n}}),function(e,t,i,n){var s=i.View.extend({options:{enableTrial:!1,plan:"premium-pro-annually",subscriptionCustomData:{}},initialize:function(e){this.artist=e.artist,this.user=e.user,delete e.artist,delete e.user,t.extend(this.options,e||{}),this._injectScript()},render:function(){return this},_injectScript:function(){var e,i="//js.chargebee.com/v2/chargebee.js",n=!t.isNull(window.document.querySelector('script[src="'+i+'"]'));if(n)e=window.document.querySelector('script[src="'+i+'"]');else{e=window.document.createElement("script"),e.src=i,e.dataset.cbSite="gigmit";var s=window.head||window.document.getElementsByTagName("head")[0];s.appendChild(e)}e.addEventListener("load",t.bind(function(){window.Chargebee.init({site:"gigmit"}),this._initializeChargebee()},this))},_initializeChargebee:function(){this.chargebeeInstance=window.Chargebee.getInstance(),this.chargebeeCart=this.chargebeeInstance.getCart(),this._initializeChargebeeProduct(),this._initializeChargebeeCustomer(),this._initializeChargebeeCallbacks()},_initializeChargebeeProduct:function(){this.chargebeeProduct=this.chargebeeInstance.initializeProduct(this.options.plan,1),this.options.enableTrial&&this.chargebeeProduct.addCoupon("PREMIUMPRO(TRIAL)"),this.chargebeeProduct.setCustomData(this.options.subscriptionCustomData),this.chargebeeCart.replaceProduct(this.chargebeeProduct)},_initializeChargebeeCustomer:function(){var e=encodeURIComponent(this.user.get("email")),i={first_name:this.user.get("first_name"),last_name:this.user.get("last_name"),email:e},n=window.Gigmit.requestLocation,s=this.artist.get("address.city")||n.city||"Berlin",o=this.artist.get("address.zip_code")||n.zip||"gigmit",r=this.artist.get("address.country")||n.countryCode||"DE";t.extend(i,{zip:o,city:s,country:r}),this.chargebeeCart.setCustomer({first_name:this.user.get("first_name"),last_name:this.user.get("last_name"),email:e,phone:this.artist.get("artist_contact.telephone"),cf_profile:"gigmit.com/"+this.artist.get("slug")+" (%23"+this.artist.get("id")+")",billing_address:i})},updateChargebeeCustomer:function(){this._initializeChargebeeCustomer()},_initializeChargebeeCallbacks:function(){this.chargebeeInstance.setCheckoutCallbacks(t.bind(function(){return{error:t.bind(function(){t.isFunction(this.options.errorCallback)&&this.options.successCallback(arguments)},this),success:t.bind(function(){n.Tracking.trackAction("artist-subscribed"),t.isFunction(this.options.successCallback)&&this.options.successCallback(arguments)},this)}},this))},show:function(){this.chargebeeCart.proceedToCheckout()}});window.Gigmit.Views.ChargeBeeCheckout=s}(window.jQuery,window._,window.Backbone,window.Gigmit),function(e,t,i){i.Collections.ArtistDates=t.Collection.extend({model:i.Models.ArtistDate,url:function(){return"/api/v1/artists/"+this.artist.get("slug")+"/artist_dates"},toFullCalendar:function(){return e.map(this.models,function(e){return e.toFullCalendar()})}})}(window._,window.Backbone,window.Gigmit),function(e,t){window.Gigmit.Collections.ArtistExternalMediaItems=e.Collection.extend({comparator:"sort_order",videos:function(){return this.filter(function(e){return"video"==e.itemType()})},sounds:function(){return this.filter(function(e){return"sound"==e.itemType()})},previewItem:function(){return this.at(0)},updateSortOrder:function(){var i="/api/v1/artists/"+this.artist.get("slug")+"/external_media_items/update_sort_order",n=e.$.ajax(i,{data:{api_key:this.artist.get("api_key"),ids:this.pluck("id")},dataType:"json",method:"PUT",success:t.bind(function(e){this.reset(e)},this)});return n},synchronizeYoutubeVideos:function(){var i="/api/v1/artists/"+this.artist.get("slug")+"/external_media_items/sync/youtube",n=e.$.ajax(i,{data:{api_key:this.artist.get("api_key")},dataType:"json",method:"PUT",success:t.bind(function(e){this.reset(e)},this)});return n}})}(window.Backbone,window._),function(e,t){e.Gigmit.Collections.ArtistMembers=Backbone.Collection.extend({})}(window,jQuery),function(e,t){window.Gigmit.Collections.ArtistReleases=e.Collection.extend({comparator:function(e){return-e.get("year")},url:function(){return"/api/v1/artists/"+this.artist.get("slug")+"/releases"},bySource:function(e){return this.filter(function(t){return t.get("source")==e})},synchronizeSpotifyReleases:function(){var i="/api/v1/artists/"+this.artist.get("slug")+"/releases/sync/spotify",n=e.$.ajax(i,{data:{api_key:this.artist.get("api_key")},dataType:"json",method:"PUT",success:t.bind(function(e){this.reset(e)},this)});return n}})}(window.Backbone,window._),function(e,t){window.Gigmit.Collections.Conversations=e.Collection.extend({model:t.Models.Conversation,url:function(){var e=this.conversation_profile.get("slug");return"/api/v1/"+e+"/conversations"},parse:function(e){return e.items||e}})}(window.Backbone,window.Gigmit),function(e,t){window.Gigmit.Collections.CustomGigs=e.Collection.extend({hasFacebookEvents:function(){return!t.isEmpty(this.filterBySource("facebook"))},filterBySource:function(e){return this.filter(function(t){return t.get("source")==e})},toJSON:function(e){var i=this.filter(function(e){return!e.get("system")});return t.map(i,function(t){return t.toJSON(e)})}})}(window.Backbone,window._),function(e,t,i){window.Gigmit.Collections.InsightRequests=i.Collection.extend({comparator:function(e){return-t(e.get("created_at"))},recentForArtist:function(t){return e.first(this.filter(function(e){return e.get("artist_id")==t}))}})}(window._,window.moment,window.Backbone),function(e,t){window.Gigmit.Collections.Messages=e.Collection.extend({
model:t.Models.Message,url:function(){var e=this.message_profile.get("slug"),t=this.conversation,i="/api/v1/"+e;return _.isEmpty(t)||(i=i+"/conversation/"+t.get("id")),i+"/messages"}})}(window.Backbone,window.Gigmit,window._),function(e){window.Gigmit.Collections.PromoterExternalMediaItems=e.Collection.extend({comparator:function(e){return e.get("sort_order")}})}(window.Backbone),function(e){window.Gigmit.Collections.Representations=e.Collection.extend({booking:function(){return this._filteredByRepresentationType("booking")},management:function(){return this._filteredByRepresentationType("management")},publishing:function(){return this._filteredByRepresentationType("publishing")},_filteredByRepresentationType:function(e){return this.filter(function(t){return t.get("representation_type")==e})}})}(window.Backbone),function(e,t){window.Gigmit.Collections.SavedSearches=e.Collection.extend({model:t.Models.SavedSearch,url:"/api/v1/saved_searches"})}(window.Backbone,window.Gigmit),function(e){window.Gigmit.Models.ArtisticProfile=e.RelationalModel.extend({modelName:"ArtisticProfile",defaults:{plays_cover_songs:!1,plays_unplugged:!1,total_number_of_members:1},validation:{plays_cover_songs:{oneOf:[!0,!1],required:!0},plays_unplugged:{oneOf:[!0,!1],required:!0},total_number_of_members:{required:!0,min:1}},url:function(){return"/api/v1/artists/"+this.artist.get("slug")+"/artistic_profile"}})}(window.Backbone),function(e){e.Gigmit.Mixins.Address={defaults:{location_type:"club"},location_types:["club","halle","bar","tent","open_air","private","cultural_center","other"],localized_country_mappings:{de:[{name:"Afghanistan",iso3:"AFG",iso2:"AF",num_code:4},{name:"Albanien",iso3:"ALB",iso2:"AL",num_code:8},{name:"Algerien",iso3:"DZA",iso2:"DZ",num_code:12},{name:"Amerikanisch-Samoa",iso3:"ASM",iso2:"AS",num_code:16},{name:"Amerikanische Jungferninseln",iso3:"VIR",iso2:"VI",num_code:850},{name:"Andorra",iso3:"AND",iso2:"AD",num_code:20},{name:"Angola",iso3:"AGO",iso2:"AO",num_code:24},{name:"Anguilla",iso3:"AIA",iso2:"AI",num_code:660},{name:"Antarktis",iso3:"ATA",iso2:"AQ",num_code:10},{name:"Antigua und Barbuda",iso3:"ATG",iso2:"AG",num_code:28},{name:"Argentinien",iso3:"ARG",iso2:"AR",num_code:32},{name:"Armenien",iso3:"ARM",iso2:"AM",num_code:51},{name:"Aruba",iso3:"ABW",iso2:"AW",num_code:533},{name:"Aserbaidschan",iso3:"AZE",iso2:"AZ",num_code:31},{name:"Australien",iso3:"AUS",iso2:"AU",num_code:36},{name:"Bahamas",iso3:"BHS",iso2:"BS",num_code:44},{name:"Bahrain",iso3:"BHR",iso2:"BH",num_code:48},{name:"Bangladesch",iso3:"BGD",iso2:"BD",num_code:50},{name:"Barbados",iso3:"BRB",iso2:"BB",num_code:52},{name:"Belgien",iso3:"BEL",iso2:"BE",num_code:56},{name:"Belize",iso3:"BLZ",iso2:"BZ",num_code:84},{name:"Benin",iso3:"BEN",iso2:"BJ",num_code:204},{name:"Bermuda",iso3:"BMU",iso2:"BM",num_code:60},{name:"Bhutan",iso3:"BTN",iso2:"BT",num_code:64},{name:"Bolivien, Plurinationaler Staat",iso3:"BOL",iso2:"BO",num_code:68},{name:"Bonaire, Sint Eustatius und Saba",iso3:"BES",iso2:"BQ",num_code:535},{name:"Bosnien und Herzegowina",iso3:"BIH",iso2:"BA",num_code:70},{name:"Botsuana",iso3:"BWA",iso2:"BW",num_code:72},{name:"Bouvet-Insel",iso3:"BVT",iso2:"BV",num_code:74},{name:"Brasilien",iso3:"BRA",iso2:"BR",num_code:76},{name:"Britische Jungferninseln",iso3:"VGB",iso2:"VG",num_code:92},{name:"Britisches Territorium im Indischen Ozean",iso3:"IOT",iso2:"IO",num_code:86},{name:"Brunei Darussalam",iso3:"BRN",iso2:"BN",num_code:96},{name:"Bulgarien",iso3:"BGR",iso2:"BG",num_code:100},{name:"Burkina Faso",iso3:"BFA",iso2:"BF",num_code:854},{name:"Burundi",iso3:"BDI",iso2:"BI",num_code:108},{name:"Cabo Verde",iso3:"CPV",iso2:"CV",num_code:132},{name:"Cayman-Inseln",iso3:"CYM",iso2:"KY",num_code:136},{name:"Chile",iso3:"CHL",iso2:"CL",num_code:152},{name:"China",iso3:"CHN",iso2:"CN",num_code:156},{name:"Cookinseln",iso3:"COK",iso2:"CK",num_code:184},{name:"Costa Rica",iso3:"CRI",iso2:"CR",num_code:188},{name:"Cura\xe7ao",iso3:"CUW",iso2:"CW",num_code:531},{name:"C\xf4te d'Ivoire",iso3:"CIV",iso2:"CI",num_code:384},{name:"Demokratische Republik Kongo",iso3:"COD",iso2:"CD",num_code:180},{name:"Deutschland",iso3:"DEU",iso2:"DE",num_code:276},{name:"Dominica",iso3:"DMA",iso2:"DM",num_code:212},{name:"Dominikanische Republik",iso3:"DOM",iso2:"DO",num_code:214},{name:"Dschibuti",iso3:"DJI",iso2:"DJ",num_code:262},{name:"D\xe4nemark",iso3:"DNK",iso2:"DK",num_code:208},{name:"Ecuador",iso3:"ECU",iso2:"EC",num_code:218},{name:"El Salvador",iso3:"SLV",iso2:"SV",num_code:222},{name:"Eritrea",iso3:"ERI",iso2:"ER",num_code:232},{name:"Estland",iso3:"EST",iso2:"EE",num_code:233},{name:"Falklandinseln (Malwinen)",iso3:"FLK",iso2:"FK",num_code:238},{name:"Fidschi",iso3:"FJI",iso2:"FJ",num_code:242},{name:"Finnland",iso3:"FIN",iso2:"FI",num_code:246},{name:"Frankreich",iso3:"FRA",iso2:"FR",num_code:250},{name:"Franz\xf6sisch-Guyana",iso3:"GUF",iso2:"GF",num_code:254},{name:"Franz\xf6sisch-Polynesien",iso3:"PYF",iso2:"PF",num_code:258},{name:"Franz\xf6sische S\xfcd- und Antarktisgebiete",iso3:"ATF",iso2:"TF",num_code:260},{name:"F\xe4r\xf6er-Inseln",iso3:"FRO",iso2:"FO",num_code:234},{name:"Gabun",iso3:"GAB",iso2:"GA",num_code:266},{name:"Gambia",iso3:"GMB",iso2:"GM",num_code:270},{name:"Georgien",iso3:"GEO",iso2:"GE",num_code:268},{name:"Ghana",iso3:"GHA",iso2:"GH",num_code:288},{name:"Gibraltar",iso3:"GIB",iso2:"GI",num_code:292},{name:"Grenada",iso3:"GRD",iso2:"GD",num_code:308},{name:"Griechenland",iso3:"GRC",iso2:"GR",num_code:300},{name:"Gr\xf6nland",iso3:"GRL",iso2:"GL",num_code:304},{name:"Guadeloupe",iso3:"GLP",iso2:"GP",num_code:312},{name:"Guam",iso3:"GUM",iso2:"GU",num_code:316},{name:"Guatemala",iso3:"GTM",iso2:"GT",num_code:320},{name:"Guernsey",iso3:"GGY",iso2:"GG",num_code:831},{name:"Guinea",iso3:"GIN",iso2:"GN",num_code:324},{name:"Guinea-Bissau",iso3:"GNB",iso2:"GW",num_code:624},{name:"Guyana",iso3:"GUY",iso2:"GY",num_code:328},{name:"Haiti",iso3:"HTI",iso2:"HT",num_code:332},{name:"Heard und McDonaldinseln",iso3:"HMD",iso2:"HM",num_code:334},{name:"Heiliger Stuhl (Staat Vatikanstadt)",iso3:"VAT",iso2:"VA",num_code:336},{name:"Honduras",iso3:"HND",iso2:"HN",num_code:340},{name:"Hongkong",iso3:"HKG",iso2:"HK",num_code:344},{name:"Indien",iso3:"IND",iso2:"IN",num_code:356},{name:"Indonesien",iso3:"IDN",iso2:"ID",num_code:360},{name:"Insel Man",iso3:"IMN",iso2:"IM",num_code:833},{name:"Irak",iso3:"IRQ",iso2:"IQ",num_code:368},{name:"Iran, Islamische Republik",iso3:"IRN",iso2:"IR",num_code:364},{name:"Irland",iso3:"IRL",iso2:"IE",num_code:372},{name:"Island",iso3:"ISL",iso2:"IS",num_code:352},{name:"Israel",iso3:"ISR",iso2:"IL",num_code:376},{name:"Italien",iso3:"ITA",iso2:"IT",num_code:380},{name:"Jamaika",iso3:"JAM",iso2:"JM",num_code:388},{name:"Japan",iso3:"JPN",iso2:"JP",num_code:392},{name:"Jemen",iso3:"YEM",iso2:"YE",num_code:887},{name:"Jersey",iso3:"JEY",iso2:"JE",num_code:832},{name:"Jordanien",iso3:"JOR",iso2:"JO",num_code:400},{name:"Kambodscha",iso3:"KHM",iso2:"KH",num_code:116},{name:"Kamerun",iso3:"CMR",iso2:"CM",num_code:120},{name:"Kanada",iso3:"CAN",iso2:"CA",num_code:124},{name:"Kasachstan",iso3:"KAZ",iso2:"KZ",num_code:398},{name:"Katar",iso3:"QAT",iso2:"QA",num_code:634},{name:"Kenia",iso3:"KEN",iso2:"KE",num_code:404},{name:"Kirgisistan",iso3:"KGZ",iso2:"KG",num_code:417},{name:"Kiribati",iso3:"KIR",iso2:"KI",num_code:296},{name:"Kokos-(Keeling-)Inseln",iso3:"CCK",iso2:"CC",num_code:166},{name:"Kolumbien",iso3:"COL",iso2:"CO",num_code:170},{name:"Komoren",iso3:"COM",iso2:"KM",num_code:174},{name:"Kongo",iso3:"COG",iso2:"CG",num_code:178},{name:"Korea, Demokratische Volksrepublik",iso3:"PRK",iso2:"KP",num_code:408},{name:"Korea, Republik",iso3:"KOR",iso2:"KR",num_code:410},{name:"Kroatien",iso3:"HRV",iso2:"HR",num_code:191},{name:"Kuba",iso3:"CUB",iso2:"CU",num_code:192},{name:"Kuwait",iso3:"KWT",iso2:"KW",num_code:414},{name:"Laos, Demokratische Volksrepublik",iso3:"LAO",iso2:"LA",num_code:418},{name:"Lesotho",iso3:"LSO",iso2:"LS",num_code:426},{name:"Lettland",iso3:"LVA",iso2:"LV",num_code:428},{name:"Libanon",iso3:"LBN",iso2:"LB",num_code:422},{name:"Liberia",iso3:"LBR",iso2:"LR",num_code:430},{name:"Libyen",iso3:"LBY",iso2:"LY",num_code:434},{name:"Liechtenstein",iso3:"LIE",iso2:"LI",num_code:438},{name:"Litauen",iso3:"LTU",iso2:"LT",num_code:440},{name:"Luxemburg",iso3:"LUX",iso2:"LU",num_code:442},{name:"Macao",iso3:"MAC",iso2:"MO",num_code:446},{name:"Madagaskar",iso3:"MDG",iso2:"MG",num_code:450},{name:"Malawi",iso3:"MWI",iso2:"MW",num_code:454},{name:"Malaysia",iso3:"MYS",iso2:"MY",num_code:458},{name:"Malediven",iso3:"MDV",iso2:"MV",num_code:462},{name:"Mali",iso3:"MLI",iso2:"ML",num_code:466},{name:"Malta",iso3:"MLT",iso2:"MT",num_code:470},{name:"Marokko",iso3:"MAR",iso2:"MA",num_code:504},{name:"Marshallinseln",iso3:"MHL",iso2:"MH",num_code:584},{name:"Martinique",iso3:"MTQ",iso2:"MQ",num_code:474},{name:"Mauretanien",iso3:"MRT",iso2:"MR",num_code:478},{name:"Mauritius",iso3:"MUS",iso2:"MU",num_code:480},{name:"Mayotte",iso3:"MYT",iso2:"YT",num_code:175},{name:"Mazedonien, ehemalige jugoslawische Republik",iso3:"MKD",iso2:"MK",num_code:807},{name:"Mexiko",iso3:"MEX",iso2:"MX",num_code:484},{name:"Mikronesien, F\xf6derierte Staaten von",iso3:"FSM",iso2:"FM",num_code:583},{name:"Moldau, Republik",iso3:"MDA",iso2:"MD",num_code:498},{name:"Monaco",iso3:"MCO",iso2:"MC",num_code:492},{name:"Mongolei",iso3:"MNG",iso2:"MN",num_code:496},{name:"Montenegro",iso3:"MNE",iso2:"ME",num_code:499},{name:"Montserrat",iso3:"MSR",iso2:"MS",num_code:500},{name:"Mosambik",iso3:"MOZ",iso2:"MZ",num_code:508},{name:"Myanmar",iso3:"MMR",iso2:"MM",num_code:104},{name:"Namibia",iso3:"NAM",iso2:"NA",num_code:516},{name:"Nauru",iso3:"NRU",iso2:"NR",num_code:520},{name:"Nepal",iso3:"NPL",iso2:"NP",num_code:524},{name:"Netherlands Antilles",iso3:"ANT",iso2:"AN",num_code:530},{name:"Neukaledonien",iso3:"NCL",iso2:"NC",num_code:540},{name:"Neuseeland",iso3:"NZL",iso2:"NZ",num_code:554},{name:"Nicaragua",iso3:"NIC",iso2:"NI",num_code:558},{name:"Niederlande",iso3:"NLD",iso2:"NL",num_code:528},{name:"Niger",iso3:"NER",iso2:"NE",num_code:562},{name:"Nigeria",iso3:"NGA",iso2:"NG",num_code:566},{name:"Niue",iso3:"NIU",iso2:"NU",num_code:570},{name:"Norfolkinsel",iso3:"NFK",iso2:"NF",num_code:574},{name:"Norwegen",iso3:"NOR",iso2:"NO",num_code:578},{name:"N\xf6rdliche Mariana-Inseln",iso3:"MNP",iso2:"MP",num_code:580},{name:"Oman",iso3:"OMN",iso2:"OM",num_code:512},{name:"Pakistan",iso3:"PAK",iso2:"PK",num_code:586},{name:"Palau",iso3:"PLW",iso2:"PW",num_code:585},{name:"Pal\xe4stina, Staat",iso3:"PSE",iso2:"PS",num_code:275},{name:"Panama",iso3:"PAN",iso2:"PA",num_code:591},{name:"Papua-Neuguinea",iso3:"PNG",iso2:"PG",num_code:598},{name:"Paraguay",iso3:"PRY",iso2:"PY",num_code:600},{name:"Peru",iso3:"PER",iso2:"PE",num_code:604},{name:"Philippinen",iso3:"PHL",iso2:"PH",num_code:608},{name:"Pitcairn",iso3:"PCN",iso2:"PN",num_code:612},{name:"Polen",iso3:"POL",iso2:"PL",num_code:616},{name:"Portugal",iso3:"PRT",iso2:"PT",num_code:620},{name:"Puerto Rico",iso3:"PRI",iso2:"PR",num_code:630},{name:"Ruanda",iso3:"RWA",iso2:"RW",num_code:646},{name:"Rum\xe4nien",iso3:"ROU",iso2:"RO",num_code:642},{name:"Russische F\xf6deration",iso3:"RUS",iso2:"RU",num_code:643},{name:"R\xe9union",iso3:"REU",iso2:"RE",num_code:638},{name:"Saint Martin (Franz\xf6sischer Teil)",iso3:"MAF",iso2:"MF",num_code:663},{name:"Saint-Barth\xe9lemy",iso3:"BLM",iso2:"BL",num_code:652},{name:"Saint-Martin (Niederl\xe4ndischer Teil)",iso3:"SXM",iso2:"SX",num_code:534},{name:"Salomoninseln",iso3:"SLB",iso2:"SB",num_code:90},{name:"Sambia",iso3:"ZMB",iso2:"ZM",num_code:894},{name:"Samoa",iso3:"WSM",iso2:"WS",num_code:882},{name:"San Marino",iso3:"SMR",iso2:"SM",num_code:674},{name:"Saudi-Arabien",iso3:"SAU",iso2:"SA",num_code:682},{name:"Schweden",iso3:"SWE",iso2:"SE",num_code:752},{name:"Schweiz",iso3:"CHE",iso2:"CH",num_code:756},{name:"Senegal",iso3:"SEN",iso2:"SN",num_code:686},{name:"Serbien",iso3:"SRB",iso2:"RS",num_code:688},{name:"Seychellen",iso3:"SYC",iso2:"SC",num_code:690},{name:"Sierra Leone",iso3:"SLE",iso2:"SL",num_code:694},{name:"Simbabwe",iso3:"ZWE",iso2:"ZW",num_code:716},{name:"Singapur",iso3:"SGP",iso2:"SG",num_code:702},{name:"Slowakei",iso3:"SVK",iso2:"SK",num_code:703},{name:"Slowenien",iso3:"SVN",iso2:"SI",num_code:705},{name:"Somalia",iso3:"SOM",iso2:"SO",num_code:706},{name:"South Georgia und die S\xfcdlichen Sandwichinseln",iso3:"SGS",iso2:"GS",num_code:239},{name:"Spanien",iso3:"ESP",iso2:"ES",num_code:724},{name:"Sri Lanka",iso3:"LKA",iso2:"LK",num_code:144},{name:"St. Helena, Ascension und Tristan da Cunha",iso3:"SHN",iso2:"SH",num_code:654},{name:"St. Kitts und Nevis",iso3:"KNA",iso2:"KN",num_code:659},{name:"St. Lucia",iso3:"LCA",iso2:"LC",num_code:662},{name:"St. Pierre und Miquelon",iso3:"SPM",iso2:"PM",num_code:666},{name:"St. Vincent und die Grenadinen",iso3:"VCT",iso2:"VC",num_code:670},{name:"Sudan",iso3:"SDN",iso2:"SD",num_code:729},{name:"Suriname",iso3:"SUR",iso2:"SR",num_code:740},{name:"Svalbard und Jan Mayen",iso3:"SJM",iso2:"SJ",num_code:744},{name:"Swasiland",iso3:"SWZ",iso2:"SZ",num_code:748},{name:"Syrien, Arabische Republik",iso3:"SYR",iso2:"SY",num_code:760},{name:"S\xe3o Tom\xe9 und Pr\xedncipe",iso3:"STP",iso2:"ST",num_code:678},{name:"S\xfcdafrika",iso3:"ZAF",iso2:"ZA",num_code:710},{name:"S\xfcdsudan",iso3:"SSD",iso2:"SS",num_code:728},{name:"Tadschikistan",iso3:"TJK",iso2:"TJ",num_code:762},{name:"Taiwan",iso3:"TWN",iso2:"TW",num_code:158},{name:"Tansania, Vereinigte Republik",iso3:"TZA",iso2:"TZ",num_code:834},{name:"Thailand",iso3:"THA",iso2:"TH",num_code:764},{name:"Timor-Leste",iso3:"TLS",iso2:"TL",num_code:626},{name:"Togo",iso3:"TGO",iso2:"TG",num_code:768},{name:"Tokelau",iso3:"TKL",iso2:"TK",num_code:772},{name:"Tonga",iso3:"TON",iso2:"TO",num_code:776},{name:"Trinidad und Tobago",iso3:"TTO",iso2:"TT",num_code:780},{name:"Tschad",iso3:"TCD",iso2:"TD",num_code:148},{name:"Tschechische Republik",iso3:"CZE",iso2:"CZ",num_code:203},{name:"Tunesien",iso3:"TUN",iso2:"TN",num_code:788},{name:"Turkmenistan",iso3:"TKM",iso2:"TM",num_code:795},{name:"Turks- und Caicosinseln",iso3:"TCA",iso2:"TC",num_code:796},{name:"Tuvalu",iso3:"TUV",iso2:"TV",num_code:798},{name:"T\xfcrkei",iso3:"TUR",iso2:"TR",num_code:792},{name:"Uganda",iso3:"UGA",iso2:"UG",num_code:800},{name:"Ukraine",iso3:"UKR",iso2:"UA",num_code:804},{name:"Ungarn",iso3:"HUN",iso2:"HU",num_code:348},{name:"United States Minor Outlying Islands",iso3:"UMI",iso2:"UM",num_code:581},{name:"Uruguay",iso3:"URY",iso2:"UY",num_code:858},{name:"Usbekistan",iso3:"UZB",iso2:"UZ",num_code:860},{name:"Vanuatu",iso3:"VUT",iso2:"VU",num_code:548},{name:"Venezuela, Bolivarische Republik",iso3:"VEN",iso2:"VE",num_code:862},{name:"Vereinigte Arabische Emirate",iso3:"ARE",iso2:"AE",num_code:784},{name:"Vereinigte Staaten",iso3:"USA",iso2:"US",num_code:840},{name:"Vereinigtes K\xf6nigreich",iso3:"GBR",iso2:"GB",num_code:826},{name:"Vietnam",iso3:"VNM",iso2:"VN",num_code:704},{name:"Wallis und Futuna",iso3:"WLF",iso2:"WF",num_code:876},{name:"Weihnachtsinseln",iso3:"CXR",iso2:"CX",num_code:162},{name:"Wei\xdfrussland",iso3:"BLR",iso2:"BY",num_code:112},{name:"Westsahara",iso3:"ESH",iso2:"EH",num_code:732},{name:"Zentralafrikanische Republik",iso3:"CAF",iso2:"CF",num_code:140},{name:"Zypern",iso3:"CYP",iso2:"CY",num_code:196},{name:"\xc4gypten",iso3:"EGY",iso2:"EG",num_code:818},{name:"\xc4quatorialguinea",iso3:"GNQ",iso2:"GQ",num_code:226},{name:"\xc4thiopien",iso3:"ETH",iso2:"ET",num_code:231},{name:"\xc5land-Inseln",iso3:"ALA",iso2:"AX",num_code:248},{name:"\xd6sterreich",iso3:"AUT",iso2:"AT",num_code:40}],en:[{name:"Afghanistan",iso3:"AFG",iso2:"AF",num_code:4},{name:"Albania",iso3:"ALB",iso2:"AL",num_code:8},{name:"Algeria",iso3:"DZA",iso2:"DZ",num_code:12},{name:"American Samoa",iso3:"ASM",iso2:"AS",num_code:16},{name:"Andorra",iso3:"AND",iso2:"AD",num_code:20},{name:"Angola",iso3:"AGO",iso2:"AO",num_code:24},{name:"Anguilla",iso3:"AIA",iso2:"AI",num_code:660},{name:"Antarctica",iso3:"ATA",iso2:"AQ",num_code:10},{name:"Antigua and Barbuda",iso3:"ATG",iso2:"AG",num_code:28},{name:"Argentina",iso3:"ARG",iso2:"AR",num_code:32},{name:"Armenia",iso3:"ARM",iso2:"AM",num_code:51},{name:"Aruba",iso3:"ABW",iso2:"AW",num_code:533},{name:"Australia",iso3:"AUS",iso2:"AU",num_code:36},{name:"Austria",iso3:"AUT",iso2:"AT",num_code:40},{name:"Azerbaijan",iso3:"AZE",iso2:"AZ",num_code:31},{name:"Bahamas",iso3:"BHS",iso2:"BS",num_code:44},{name:"Bahrain",iso3:"BHR",iso2:"BH",num_code:48},{name:"Bangladesh",iso3:"BGD",iso2:"BD",num_code:50},{name:"Barbados",iso3:"BRB",iso2:"BB",num_code:52},{name:"Belarus",iso3:"BLR",iso2:"BY",num_code:112},{name:"Belgium",iso3:"BEL",iso2:"BE",num_code:56},{name:"Belize",iso3:"BLZ",iso2:"BZ",num_code:84},{name:"Benin",iso3:"BEN",iso2:"BJ",num_code:204},{name:"Bermuda",iso3:"BMU",iso2:"BM",num_code:60},{name:"Bhutan",iso3:"BTN",iso2:"BT",num_code:64},{name:"Bolivia, Plurinational State of",iso3:"BOL",iso2:"BO",num_code:68},{name:"Bonaire, Sint Eustatius and Saba",iso3:"BES",iso2:"BQ",num_code:535},{name:"Bosnia and Herzegovina",iso3:"BIH",iso2:"BA",num_code:70},{name:"Botswana",iso3:"BWA",iso2:"BW",num_code:72},{name:"Bouvet Island",iso3:"BVT",iso2:"BV",num_code:74},{name:"Brazil",iso3:"BRA",iso2:"BR",num_code:76},{name:"British Indian Ocean Territory",iso3:"IOT",iso2:"IO",num_code:86},{name:"Brunei Darussalam",iso3:"BRN",iso2:"BN",num_code:96},{name:"Bulgaria",iso3:"BGR",iso2:"BG",num_code:100},{name:"Burkina Faso",iso3:"BFA",iso2:"BF",num_code:854},{name:"Burundi",iso3:"BDI",iso2:"BI",num_code:108},{name:"Cambodia",iso3:"KHM",iso2:"KH",num_code:116},{name:"Cameroon",iso3:"CMR",iso2:"CM",num_code:120},{name:"Canada",iso3:"CAN",iso2:"CA",num_code:124},{name:"Cape Verde",iso3:"CPV",iso2:"CV",num_code:132},{name:"Cayman Islands",iso3:"CYM",iso2:"KY",num_code:136},{name:"Central African Republic",iso3:"CAF",iso2:"CF",num_code:140},{name:"Chad",iso3:"TCD",iso2:"TD",num_code:148},{name:"Chile",iso3:"CHL",iso2:"CL",num_code:152},{name:"China",iso3:"CHN",iso2:"CN",num_code:156},{name:"Christmas Island",iso3:"CXR",iso2:"CX",num_code:162},{name:"Cocos (Keeling) Islands",iso3:"CCK",iso2:"CC",num_code:166},{name:"Colombia",iso3:"COL",iso2:"CO",num_code:170},{name:"Comoros",iso3:"COM",iso2:"KM",num_code:174},{name:"Congo",iso3:"COG",iso2:"CG",num_code:178},{name:"Congo, The Democratic Republic of the",iso3:"COD",iso2:"CD",num_code:180},{name:"Cook Islands",iso3:"COK",iso2:"CK",num_code:184},{name:"Costa Rica",iso3:"CRI",iso2:"CR",num_code:188},{name:"Croatia",iso3:"HRV",iso2:"HR",num_code:191},{name:"Cuba",iso3:"CUB",iso2:"CU",num_code:192},{name:"Cura\xe7ao",iso3:"CUW",iso2:"CW",num_code:531},{name:"Cyprus",iso3:"CYP",iso2:"CY",num_code:196},{name:"Czech Republic",iso3:"CZE",iso2:"CZ",num_code:203},{name:"C\xf4te d'Ivoire",iso3:"CIV",iso2:"CI",num_code:384},{name:"Denmark",iso3:"DNK",iso2:"DK",num_code:208},{name:"Djibouti",iso3:"DJI",iso2:"DJ",num_code:262},{name:"Dominica",iso3:"DMA",iso2:"DM",num_code:212},{name:"Dominican Republic",iso3:"DOM",iso2:"DO",num_code:214},{name:"Ecuador",iso3:"ECU",iso2:"EC",num_code:218},{name:"Egypt",iso3:"EGY",iso2:"EG",num_code:818},{name:"El Salvador",iso3:"SLV",iso2:"SV",num_code:222},{name:"Equatorial Guinea",iso3:"GNQ",iso2:"GQ",num_code:226},{name:"Eritrea",iso3:"ERI",iso2:"ER",num_code:232},{name:"Estonia",iso3:"EST",iso2:"EE",num_code:233},{name:"Ethiopia",iso3:"ETH",iso2:"ET",num_code:231},{name:"Falkland Islands (Malvinas)",iso3:"FLK",iso2:"FK",num_code:238},{name:"Faroe Islands",iso3:"FRO",iso2:"FO",num_code:234},{name:"Fiji",iso3:"FJI",iso2:"FJ",num_code:242},{name:"Finland",iso3:"FIN",iso2:"FI",num_code:246},{name:"France",iso3:"FRA",iso2:"FR",num_code:250},{name:"French Guiana",iso3:"GUF",iso2:"GF",num_code:254},{name:"French Polynesia",iso3:"PYF",iso2:"PF",num_code:258},{name:"French Southern Territories",iso3:"ATF",iso2:"TF",num_code:260},{name:"Gabon",iso3:"GAB",iso2:"GA",num_code:266},{name:"Gambia",iso3:"GMB",iso2:"GM",num_code:270},{name:"Georgia",iso3:"GEO",iso2:"GE",num_code:268},{name:"Germany",iso3:"DEU",iso2:"DE",num_code:276},{name:"Ghana",iso3:"GHA",iso2:"GH",num_code:288},{name:"Gibraltar",iso3:"GIB",iso2:"GI",num_code:292},{name:"Greece",iso3:"GRC",iso2:"GR",num_code:300},{name:"Greenland",iso3:"GRL",iso2:"GL",num_code:304},{name:"Grenada",iso3:"GRD",iso2:"GD",num_code:308},{name:"Guadeloupe",iso3:"GLP",iso2:"GP",num_code:312},{name:"Guam",iso3:"GUM",iso2:"GU",num_code:316},{name:"Guatemala",iso3:"GTM",iso2:"GT",num_code:320},{name:"Guernsey",iso3:"GGY",iso2:"GG",num_code:831},{name:"Guinea",iso3:"GIN",iso2:"GN",num_code:324},{name:"Guinea-Bissau",iso3:"GNB",iso2:"GW",num_code:624},{name:"Guyana",iso3:"GUY",iso2:"GY",num_code:328},{name:"Haiti",iso3:"HTI",iso2:"HT",num_code:332},{name:"Heard Island and McDonald Islands",iso3:"HMD",iso2:"HM",num_code:334},{name:"Holy See (Vatican City State)",iso3:"VAT",iso2:"VA",num_code:336},{name:"Honduras",iso3:"HND",iso2:"HN",num_code:340},{name:"Hong Kong",iso3:"HKG",iso2:"HK",num_code:344},{name:"Hungary",iso3:"HUN",iso2:"HU",num_code:348},{name:"Iceland",iso3:"ISL",iso2:"IS",num_code:352},{name:"India",iso3:"IND",iso2:"IN",num_code:356},{name:"Indonesia",iso3:"IDN",iso2:"ID",num_code:360},{name:"Iran, Islamic Republic of",iso3:"IRN",iso2:"IR",num_code:364},{name:"Iraq",iso3:"IRQ",iso2:"IQ",num_code:368},{name:"Ireland",iso3:"IRL",iso2:"IE",num_code:372},{name:"Isle of Man",iso3:"IMN",iso2:"IM",num_code:833},{name:"Israel",iso3:"ISR",iso2:"IL",num_code:376},{name:"Italy",iso3:"ITA",iso2:"IT",num_code:380},{name:"Jamaica",iso3:"JAM",iso2:"JM",num_code:388},{name:"Japan",iso3:"JPN",iso2:"JP",num_code:392},{name:"Jersey",iso3:"JEY",iso2:"JE",num_code:832},{name:"Jordan",iso3:"JOR",iso2:"JO",num_code:400},{name:"Kazakhstan",iso3:"KAZ",iso2:"KZ",num_code:398},{name:"Kenya",iso3:"KEN",iso2:"KE",num_code:404},{name:"Kiribati",iso3:"KIR",iso2:"KI",num_code:296},{name:"Korea, Democratic People's Republic of",iso3:"PRK",iso2:"KP",num_code:408},{name:"Korea, Republic of",iso3:"KOR",iso2:"KR",num_code:410},{name:"Kuwait",iso3:"KWT",iso2:"KW",num_code:414},{name:"Kyrgyzstan",iso3:"KGZ",iso2:"KG",num_code:417},{name:"Lao People's Democratic Republic",iso3:"LAO",iso2:"LA",num_code:418},{name:"Latvia",iso3:"LVA",iso2:"LV",num_code:428},{name:"Lebanon",iso3:"LBN",iso2:"LB",num_code:422},{name:"Lesotho",iso3:"LSO",iso2:"LS",num_code:426},{name:"Liberia",iso3:"LBR",iso2:"LR",num_code:430},{name:"Libya",iso3:"LBY",iso2:"LY",num_code:434},{name:"Liechtenstein",iso3:"LIE",iso2:"LI",num_code:438},{name:"Lithuania",iso3:"LTU",iso2:"LT",num_code:440},{name:"Luxembourg",iso3:"LUX",iso2:"LU",num_code:442},{name:"Macao",iso3:"MAC",iso2:"MO",num_code:446},{name:"Macedonia, Republic of",iso3:"MKD",iso2:"MK",num_code:807},{name:"Madagascar",iso3:"MDG",iso2:"MG",num_code:450},{name:"Malawi",iso3:"MWI",iso2:"MW",num_code:454},{name:"Malaysia",iso3:"MYS",iso2:"MY",num_code:458},{name:"Maldives",iso3:"MDV",iso2:"MV",num_code:462},{name:"Mali",iso3:"MLI",iso2:"ML",num_code:466},{name:"Malta",iso3:"MLT",iso2:"MT",num_code:470},{name:"Marshall Islands",iso3:"MHL",iso2:"MH",num_code:584},{name:"Martinique",iso3:"MTQ",iso2:"MQ",num_code:474},{name:"Mauritania",iso3:"MRT",iso2:"MR",num_code:478},{name:"Mauritius",iso3:"MUS",iso2:"MU",num_code:480},{name:"Mayotte",iso3:"MYT",iso2:"YT",num_code:175},{name:"Mexico",iso3:"MEX",iso2:"MX",num_code:484},{name:"Micronesia, Federated States of",iso3:"FSM",iso2:"FM",num_code:583},{name:"Moldova, Republic of",iso3:"MDA",iso2:"MD",num_code:498},{name:"Monaco",iso3:"MCO",iso2:"MC",num_code:492},{name:"Mongolia",iso3:"MNG",iso2:"MN",num_code:496},{name:"Montenegro",iso3:"MNE",iso2:"ME",num_code:499},{name:"Montserrat",iso3:"MSR",iso2:"MS",num_code:500},{name:"Morocco",iso3:"MAR",iso2:"MA",num_code:504},{name:"Mozambique",iso3:"MOZ",iso2:"MZ",num_code:508},{name:"Myanmar",iso3:"MMR",iso2:"MM",num_code:104},{name:"Namibia",iso3:"NAM",iso2:"NA",num_code:516},{name:"Nauru",iso3:"NRU",iso2:"NR",num_code:520},{name:"Nepal",iso3:"NPL",iso2:"NP",num_code:524},{name:"Netherlands",iso3:"NLD",iso2:"NL",num_code:528},{name:"Netherlands Antilles",iso3:"ANT",iso2:"AN",num_code:530},{name:"New Caledonia",iso3:"NCL",iso2:"NC",num_code:540},{name:"New Zealand",iso3:"NZL",iso2:"NZ",num_code:554},{name:"Nicaragua",iso3:"NIC",iso2:"NI",num_code:558},{name:"Niger",iso3:"NER",iso2:"NE",num_code:562},{name:"Nigeria",iso3:"NGA",iso2:"NG",num_code:566},{name:"Niue",iso3:"NIU",iso2:"NU",num_code:570},{name:"Norfolk Island",iso3:"NFK",iso2:"NF",num_code:574},{name:"Northern Mariana Islands",iso3:"MNP",iso2:"MP",num_code:580},{name:"Norway",iso3:"NOR",iso2:"NO",num_code:578},{name:"Oman",iso3:"OMN",iso2:"OM",num_code:512},{name:"Pakistan",iso3:"PAK",iso2:"PK",num_code:586},{name:"Palau",iso3:"PLW",iso2:"PW",num_code:585},{name:"Palestine, State of",iso3:"PSE",iso2:"PS",num_code:275},{name:"Panama",iso3:"PAN",iso2:"PA",num_code:591},{name:"Papua New Guinea",iso3:"PNG",iso2:"PG",num_code:598},{name:"Paraguay",iso3:"PRY",iso2:"PY",num_code:600},{name:"Peru",iso3:"PER",iso2:"PE",num_code:604},{name:"Philippines",iso3:"PHL",iso2:"PH",num_code:608},{name:"Pitcairn",iso3:"PCN",iso2:"PN",num_code:612},{name:"Poland",iso3:"POL",iso2:"PL",num_code:616},{name:"Portugal",iso3:"PRT",iso2:"PT",num_code:620},{name:"Puerto Rico",iso3:"PRI",iso2:"PR",num_code:630},{name:"Qatar",iso3:"QAT",iso2:"QA",num_code:634},{name:"Romania",iso3:"ROU",iso2:"RO",num_code:642},{name:"Russian Federation",iso3:"RUS",iso2:"RU",num_code:643},{name:"Rwanda",iso3:"RWA",iso2:"RW",num_code:646},{name:"R\xe9union",iso3:"REU",iso2:"RE",num_code:638},{name:"Saint Barth\xe9lemy",iso3:"BLM",iso2:"BL",num_code:652},{name:"Saint Helena, Ascension and Tristan da Cunha",iso3:"SHN",iso2:"SH",num_code:654},{name:"Saint Kitts and Nevis",iso3:"KNA",iso2:"KN",num_code:659},{name:"Saint Lucia",iso3:"LCA",iso2:"LC",num_code:662},{name:"Saint Martin (French part)",iso3:"MAF",iso2:"MF",num_code:663},{name:"Saint Pierre and Miquelon",iso3:"SPM",iso2:"PM",num_code:666},{name:"Saint Vincent and the Grenadines",iso3:"VCT",iso2:"VC",num_code:670},{name:"Samoa",iso3:"WSM",iso2:"WS",num_code:882},{name:"San Marino",iso3:"SMR",iso2:"SM",num_code:674},{name:"Sao Tome and Principe",iso3:"STP",iso2:"ST",num_code:678},{name:"Saudi Arabia",iso3:"SAU",iso2:"SA",num_code:682},{name:"Senegal",iso3:"SEN",iso2:"SN",num_code:686},{name:"Serbia",iso3:"SRB",iso2:"RS",num_code:688},{name:"Seychelles",iso3:"SYC",iso2:"SC",num_code:690},{name:"Sierra Leone",iso3:"SLE",iso2:"SL",num_code:694},{name:"Singapore",iso3:"SGP",iso2:"SG",num_code:702},{name:"Sint Maarten (Dutch part)",iso3:"SXM",iso2:"SX",num_code:534},{name:"Slovakia",iso3:"SVK",iso2:"SK",num_code:703},{name:"Slovenia",iso3:"SVN",iso2:"SI",num_code:705},{name:"Solomon Islands",iso3:"SLB",iso2:"SB",num_code:90},{name:"Somalia",iso3:"SOM",iso2:"SO",num_code:706},{name:"South Africa",iso3:"ZAF",iso2:"ZA",num_code:710},{name:"South Georgia and the South Sandwich Islands",iso3:"SGS",iso2:"GS",num_code:239},{name:"South Sudan",iso3:"SSD",iso2:"SS",num_code:728},{name:"Spain",iso3:"ESP",iso2:"ES",num_code:724},{name:"Sri Lanka",iso3:"LKA",iso2:"LK",num_code:144},{name:"Sudan",iso3:"SDN",iso2:"SD",num_code:729},{name:"Suriname",iso3:"SUR",iso2:"SR",num_code:740},{name:"Svalbard and Jan Mayen",iso3:"SJM",iso2:"SJ",num_code:744},{name:"Swaziland",iso3:"SWZ",iso2:"SZ",num_code:748},{name:"Sweden",iso3:"SWE",iso2:"SE",num_code:752},{name:"Switzerland",iso3:"CHE",iso2:"CH",num_code:756},{name:"Syrian Arab Republic",iso3:"SYR",iso2:"SY",num_code:760},{name:"Taiwan",iso3:"TWN",iso2:"TW",num_code:158},{name:"Tajikistan",iso3:"TJK",iso2:"TJ",num_code:762},{name:"Tanzania, United Republic of",iso3:"TZA",iso2:"TZ",num_code:834},{name:"Thailand",iso3:"THA",iso2:"TH",num_code:764},{name:"Timor-Leste",iso3:"TLS",iso2:"TL",num_code:626},{name:"Togo",iso3:"TGO",iso2:"TG",num_code:768},{name:"Tokelau",iso3:"TKL",iso2:"TK",num_code:772},{name:"Tonga",iso3:"TON",iso2:"TO",num_code:776},{name:"Trinidad and Tobago",iso3:"TTO",iso2:"TT",num_code:780},{name:"Tunisia",iso3:"TUN",iso2:"TN",num_code:788},{name:"Turkey",iso3:"TUR",iso2:"TR",num_code:792},{name:"Turkmenistan",iso3:"TKM",iso2:"TM",num_code:795},{name:"Turks and Caicos Islands",iso3:"TCA",iso2:"TC",num_code:796},{name:"Tuvalu",iso3:"TUV",iso2:"TV",num_code:798},{name:"Uganda",iso3:"UGA",iso2:"UG",num_code:800},{name:"Ukraine",iso3:"UKR",iso2:"UA",num_code:804},{name:"United Arab Emirates",iso3:"ARE",iso2:"AE",num_code:784},{name:"United Kingdom",iso3:"GBR",iso2:"GB",num_code:826},{name:"United States",iso3:"USA",iso2:"US",num_code:840},{name:"United States Minor Outlying Islands",iso3:"UMI",iso2:"UM",num_code:581},{name:"Uruguay",iso3:"URY",iso2:"UY",num_code:858},{name:"Uzbekistan",iso3:"UZB",iso2:"UZ",num_code:860},{name:"Vanuatu",iso3:"VUT",iso2:"VU",num_code:548},{name:"Venezuela, Bolivarian Republic of",iso3:"VEN",iso2:"VE",num_code:862},{name:"Viet Nam",iso3:"VNM",iso2:"VN",num_code:704},{name:"Virgin Islands, British",iso3:"VGB",iso2:"VG",num_code:92},{name:"Virgin Islands, U.S.",iso3:"VIR",iso2:"VI",num_code:850},{name:"Wallis and Futuna",iso3:"WLF",iso2:"WF",num_code:876},{name:"Western Sahara",iso3:"ESH",iso2:"EH",num_code:732},{name:"Yemen",iso3:"YEM",iso2:"YE",num_code:887},{name:"Zambia",iso3:"ZMB",iso2:"ZM",num_code:894},{name:"Zimbabwe",iso3:"ZWE",iso2:"ZW",num_code:716},{name:"\xc5land Islands",iso3:"ALA",iso2:"AX",num_code:248}]},validation:{name:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.name")}},street:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.street")}},street_number:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.street_number")}},city:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.city")}},country:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.country")}},location_capacity:function(e,t){return _.isNumber(e)&&0>=e?I18n.t("form_errors.gig.address.location_capacity"):void 0}},getLocalizedCountryName:function(){var e=_.findWhere(this.localized_country_mappings[I18n.locale],{iso2:this.get("country")})||{};return e.name||""},toString:function(){return this.isValid()?[this.get("street")+" "+this.get("street_number"),this.get("zip_code")+" "+this.get("city"),this.get("country")].join(", "):""},toJSON:function(e){var t=Backbone.Model.prototype.toJSON.call(this,e),i=["id","latitude","longitude","used_for","addressable_id","addressable_type","created_at","updated_at"];return _.omit(t,i)}},e.Gigmit.Models.Address=Backbone.RelationalModel.extend(Gigmit.Mixins.Address),e.Gigmit.Models.PromoterAddress=Backbone.RelationalModel.extend(_.extend({},Gigmit.Mixins.Address,{validation:{}}))}(window),function(e,t,i,n){window.Gigmit.Models.HomebaseAddress=e.RelationalModel.extend(t.extend(n.Mixins.Address,{validation:{city:{required:!0,msg:function(){return i.t("validations.address.city.required")}},country:{required:!0,msg:function(){return i.t("validations.address.country.required")}}},url:function(){return"/api/v1/artists/"+this.artist.get("slug")+"/address"}}))}(window.Backbone,window._,window.I18n,window.Gigmit),function(e,t,i){window.Gigmit.Models.ArtistInsights=e.RelationalModel.extend({url:function(e,t){var i=["api","v1","artists",this.get("artist.id"),"insights",e,t].join("/");return"/"+i},fetch:function(t,i){return e.Model.prototype.fetch.call(this,{url:this.url(t,i),data:{api_key:window.Gigmit.Constants.apis.gigmit.key}})},parse:function(e,i){var n=i.url,s=n.split("/"),o=s.pop(),r=s.pop(),a={};return a[r]={},a[r][o]=e,t.extend(!0,{},this.toJSON(),a)},groupedByCity:function(){var e={},t=i.result(this.get("facebook"),"fans",{});t=i.result(t,"by_cities",[]),i.each(t,function(t){var n=i.first(t.city.split(","));e[n]={facebook:t}});var n=i.result(this.get("spotify"),"monthly_listeners");n=i.result(n,"by_cities",[]),i.each(n,function(t){var n=t.city;e[n]=i.result(e,n,{}),e[n]=i.extend(e[n],{spotify:t})});var s=[];return s=i.map(e,function(e,t){var n={city:t,facebook:{current:i.result(e,"facebook",{current:0}).current,growthRate:i.result(e,"facebook",{growth_rate:0}).growth_rate,growthTotal:i.result(e,"facebook",{growth_total:0}).growth_total},spotify:{current:i.result(e,"spotify",{current:0}).current,growthRate:i.result(e,"spotify",{growth_rate:0}).growth_rate,growthTotal:i.result(e,"spotify",{growth_total:0}).growth_total}};return n})}})}(window.Backbone,window.jQuery,window._),function(e,t,i,n,s){s.Models.ArtistDate=t.RelationalModel.extend({defaults:{is_available:!0},relations:[{type:t.HasOne,key:"user",relatedModel:s.Models.User,includeInJSON:!1}],getFullCalendarDateStart:function(){return this.get("date_from")},getFullCalendarDateEnd:function(){return n(this.get("date_to")).add(1,"day")},getFullCalendarTitle:function(){
var t;return t=this.get("is_available")?i.t("premium.artist_dates.calendar.available"):i.t("premium.artist_dates.calendar.not_available"),e.isEmpty(this.get("user"))||(t=t+" ("+this.get("user").get("first_name")+")"),t},toFullCalendar:function(){var e=this.get("is_available")?"available":"blocked";return{id:this.get("id"),title:this.getFullCalendarTitle(),start:this.getFullCalendarDateStart(),end:this.getFullCalendarDateEnd(),className:"calendar__event calendar__event--artist-date-"+e,type:"artist_date"}}})}(window._,window.Backbone,window.I18n,window.moment,window.Gigmit),function(e){e.Gigmit.Models.ArtistRelease=Backbone.RelationalModel.extend({defaults:{cover_artwork_url:"",source:"custom"},validation:{title:{required:!0},release_type:{oneOf:["single","ep","album","mixtape","dvd","remix","compilationtrack"],required:!0},year:{required:!0,currentOrPastYear:!0}},getReleaseTypeName:function(){return I18n.t("constants.artist_release_types."+this.get("release_type"))}})}(window),function(e,t,i,n){window.Gigmit.Models.CustomGig=i.RelationalModel.extend({defaults:{highlighted:!1,system:!1},validation:{date_from:{required:!0},address:{required:!0}},url:function(){var e="/api/v1/artists/"+this.collection.artist.get("id")+"/custom_gigs";return this.isNew()||(e+="/"+this.get("id")),e},highlight:function(e){var n={url:this.url()+"/highlight",type:"PUT",success:t.bind(function(e){this.set("highlighted",e.highlighted)},this)};return t.extend(n,e),(this.sync||i.sync).call(this,null,this,n)},unhighlight:function(e){var n={url:this.url()+"/unhighlight",type:"PUT",success:t.bind(function(e){this.set("highlighted",e.highlighted)},this)};return t.extend(n,e),(this.sync||i.sync).call(this,null,this,n)},isPastGig:function(){var e=n(this.get("date_from"));return e.isSameOrBefore(n())}})}(window.jQuery,window._,window.Backbone,window.moment),function(e){e.Gigmit.Models.PlayedGig=Gigmit.Models.CustomGig.extend({initialize:function(){this.validation=$.extend(!0,{},this.validation,{date_from:{isPastDate:!0}})}})}(window),function(e){e.Gigmit.Models.UpcomingGig=Gigmit.Models.CustomGig.extend({initialize:function(){this.validation=$.extend(!0,{},this.validation,{date_from:{isFutureOrCurrentDate:!0}})}})}(window),function(e){e.Gigmit.Models.ArtistMember=Backbone.RelationalModel.extend({validation:{name:{required:!0},position:{required:!0}}})}(window),function(e,t){window.Gigmit.Models.MusicGenre=e.RelationalModel.extend({modelName:"MusicGenre",validation:{name:{required:!0},level:{required:!0,number:!0}},url:function(e){var i="/api/v1/music_genres";return e=e||{},e=t.defaults(e,{actAsNew:!1}),t.isUndefined(this.collection)||t.isUndefined(this.collection.artist)||(i="/api/v1/artists/"+this.collection.artist.get("slug")+"/music_genres"),this.isNew()||e.actAsNew||(i=i+"/"+this.get("id")),i}})}(window.Backbone,window._),function(e){window.Gigmit.Models.SubMusicGenre=e.Models.MusicGenre.extend({defaults:{level:1}})}(window.Gigmit),function(e){e.Gigmit.Models.LocationStage=Backbone.RelationalModel.extend({validation:{location:{required:!0},audience_headcount:{required:!0,pattern:"number"}}})}(window),function(e,t,i,n,s){window.Gigmit.Models.ExternalMediaItem=e.RelationalModel.extend({defaults:{highlighted:!1,sort_order:1},url:function(){var e="/api/v1/artists/"+this.collection.artist.initialSlug+"/external_media_items";return this.isNew()||(e=e+"/"+this.get("id")),e},highlight:function(t){var i={url:this.url()+"/highlight",type:"PUT",success:n.bind(function(e){this.set("highlighted",e.highlighted)},this)};return n.extend(i,t),(this.sync||e.sync).call(this,null,this,i)},unhighlight:function(t){var i={url:this.url()+"/unhighlight",type:"PUT",success:n.bind(function(e){this.set("highlighted",e.highlighted)},this)};return n.extend(i,t),(this.sync||e.sync).call(this,null,this,i)},hide:function(t){var i={url:this.url()+"/hide",type:"PUT",success:n.bind(function(e){this.set("visible",e.visible)},this)};return n.extend(i,t),(this.sync||e.sync).call(this,null,this,i)},unhide:function(t){var i={url:this.url()+"/unhide",type:"PUT",success:n.bind(function(e){this.set("visible",e.visible)},this)};return n.extend(i,t),(this.sync||e.sync).call(this,null,this,i)},itemType:function(){return n.contains(["vimeo","youtube"],this.get("vendor"))?"video":"sound"},resolveUrl:function(e){return t.ajax({data:{api_key:window.Gigmit.Constants.apis.gigmit.key},url:"/api/v1/external_media_items/resolve?url="+e,method:"GET",dataType:"json",contentType:"application/json"})},soundcloudStreamURL:function(){var e;return"soundcloud"==this.get("vendor")&&(e=["https://api.soundcloud.com","tracks",this.get("vendor_item_id"),"stream.json?client_id="+i.Constants.apis.soundcloud.client_id].join("/")),e},getSoundcloudMetaData:function(){"soundcloud"==this.get("vendor")&&t.ajax({url:["https://api.soundcloud.com","tracks",this.get("vendor_item_id")+".json?client_id="+i.Constants.apis.soundcloud.client_id].join("/"),dataType:"jsonp",type:"GET"}).done(n.bind(function(e){this.soundcloudMetaData=e},this))},_getThumbnailUrl:function(){return new window.Promise(n.bind(function(e,t){n.isEmpty(this.get("thumbnailUrl"))?("youtube"==this.get("vendor")&&this._fetchYoutubeThumbnailUrl().done(n.bind(function(t){var i=n.first(t.items)||{snippet:{thumbnails:{medium:{url:""}}}};this.set("thumbnailUrl",i.snippet.thumbnails.medium.url),e(i.snippet.thumbnails.medium.url)},this)).fail(function(){t(void 0)}),"vimeo"==this.get("vendor")&&this._fetchVimeoThumbnailUrl().done(n.bind(function(t){var i=n.first(t)||{};this.set("thumbnailUrl",i.thumbnail_medium),e(i.thumbnail_medium)},this)).fail(function(){t(void 0)})):e(this.get("thumbnailUrl"))},this))},_fetchYoutubeThumbnailUrl:function(){return t.getJSON("https://www.googleapis.com/youtube/v3/videos",{id:this.get("vendor_item_id"),part:"snippet",key:window.Gigmit.Constants.apis.youtube.api_key})},_fetchVimeoThumbnailUrl:function(){return t.getJSON("https://vimeo.com/api/v2/video/"+this.get("vendor_item_id")+".json")},playerMediaURL:function(){return this["_"+this.get("vendor")+"PlayerMediaURL"]()},_spotifyPlayerMediaURL:function(){return new s(n.bind(function(e){t.ajax({url:"/spotify/track/"+this.get("vendor_item_id")+"/preview_url"}).done(function(t){e(t.preview_url)}).fail(function(){e(void 0)})},this))},_youtubePlayerMediaURL:function(){return new s(n.bind(function(e){e("//www.youtube.com/watch?v="+this.get("vendor_item_id"))},this))},_soundcloudPlayerMediaURL:function(){return new s(n.bind(function(e){var n=["https://api.soundcloud.com/tracks/",this.get("vendor_item_id"),"?client_id="+i.Constants.apis.soundcloud.client_id].join("");t.getJSON(n).done(function(t){e(t.permalink_url)}).fail(function(){e(void 0)})},this))},_mixcloudPlayerMediaURL:function(){return new s(n.bind(function(e){var t=n.last(this.get("vendor_item_id").split(";"));e("//mixcloud.com"+t)},this))},_bandcampPlayerMediaURL:function(){return new s(n.bind(function(e){t.ajax({url:"/api/v1/bandcamp/resolve",data:{api_key:i.Constants.apis.gigmit.key,vendor_item_id:this.get("vendor_item_id")},dataType:"json"}).done(function(t){e(t.url)})},this))},_vimeoPlayerMediaURL:function(){return new s(n.bind(function(e){e("//vimeo.com/"+this.get("vendor_item_id"))},this))}})}(window.Backbone,window.jQuery,window.Gigmit,window._,window.Promise),function(e){window.Gigmit.Models.PressMediaItem=e.RelationalModel.extend({url:function(){var e="/api/v1/artists/"+this.collection.artist.slug+"/media_items";return this.isNew()||(e=e+"/"+this.get("id")),e},toJSON:function(){return this.get("item_hash")}})}(window.Backbone),function(e,t,i,n,s){n.Models.SocialLink=e.RelationalModel.extend({initialize:function(){this.validation={provider:{required:!0},title:{required:!0}},this.isCustom()?this.validation=s.extend(!0,this.validation,{url:function(t,n,s){var o=e.Validation.validators.required(t,n,!0,s),r=e.Validation.validators.pattern(t,n,"url",s);return i.has(s,"_destroy")||!o&&!r?void 0:o||r}}):this.validation=s.extend(!0,this.validation,{url:function(t){var n=e.Validation.validators.required(t,"url",!0,this,{});return i.isUndefined(n)?e.Validation.validators.pattern(t,"url","url",this,{}):void 0},title:{required:!1}})},nonCustomProviders:function(){return i.without(this.options.allowedProviders,"custom")},isCustom:function(){return i.contains(["custom","website"],this.get("provider"))},url:function(){var e="/api/v1/artists/"+this.collection.artist.get("slug")+"/social_links";return this.isNew()||(e=e+"/"+this.get("id")),e},getProviderText:function(){var e="custom"==this.get("provider")?"microsite.web_profiles.more_links":"social_links.providers."+this.get("provider"),i=this.isCustom()?this.get("title"):t.t(e);return i}})}(window.Backbone,window.I18n,window._,window.Gigmit,window.jQuery),function(e){Gigmit.Models.Subscription=Backbone.RelationalModel.extend({plans:{"premium-pro-monthly":{name:"PRO",price:9,interval:1,contractual_term_interval:1,group:"pro",active:!0,archived:!1},"premium-pro-annually":{name:"PRO",price:19,interval:1,contractual_term_interval:12,group:"pro",active:!0,archived:!1},"premium-gold-monthly":{name:"Gold",price:159,interval:1,contractual_term_interval:1,group:"gold",active:!0,archived:!1},"premium-gold-flex":{name:"Gold",price:79,interval:1,contractual_term_interval:12,group:"gold",active:!0,archived:!1},"premium-gold-flex-annually":{name:"Gold",price:948,interval:12,contractual_term_interval:12,group:"gold",active:!0,archived:!1},"premium-gold-tour-monthly-without-trial":{name:"Gold",price:259,interval:1,group:"gold",active:!1,archived:!1},"premium-gold-free-forever":{name:"Gold",price:0,interval:1,contractual_term_interval:1,group:"gold",active:!0,archived:!1},"premium-basic-monthly":{name:"Basic",price:11,interval:1,group:"basic",active:!0,archived:!0},"premium-basic-annually":{name:"Basic",price:108,interval:12,contractual_term_interval:12,group:"basic",active:!0,archived:!0},"premium-start-monthly":{name:"Start",price:35,interval:1,group:"start",active:!0,archived:!0},"premium-start-annually":{name:"Start",price:348,interval:12,group:"start",active:!0,archived:!0},"premium-gold-tour":{name:"Gold",price:259,interval:1,group:"gold",active:!1,archived:!0},"premium-basic-3-months-non-renewal":{name:"Basic",price:19,interval:1,group:"basic",active:!1,archived:!0},"premium-start-1-month-non-renewal":{name:"Start",price:29,interval:1,group:"start",active:!1,archived:!0},"premium-basic-1-month-non-renewal":{name:"Basic",price:19,interval:1,group:"basic",active:!1,archived:!0},"premium-basic-non-recurring":{name:"Basic",price:19,interval:1,group:"basic",active:!1,archived:!0},"premium-basic":{name:"Basic",price:9,interval:1,group:"basic",active:!1,archived:!0},"premium-basic-3-months":{name:"Basic 3 Months",price:27,interval:3,group:"basic",active:!1,archived:!0},"premium-basic-6-months":{name:"Basic 6 Months",price:54,interval:6,group:"basic",active:!1,archived:!0},"premium-start":{name:"Start",price:29,interval:1,group:"start",active:!1,archived:!0},"premium-start-3-months":{name:"Start 3 Months",price:72,interval:3,group:"start",active:!1,archived:!0},"premium-start-6-months":{name:"Start 6 Months",price:114,interval:6,group:"start",active:!1,archived:!0},"premium-gold-ready-6-months":{name:"READY",price:449,interval:6,group:"gold",active:!1,archived:!1},"premium-start-lifetime":{name:"Start Lifetime",price:499,interval:1200,group:"start",active:!1,archived:!0},"premium-gold-3-months":{name:"Gold 3 months",price:477,interval:3,group:"gold",active:!1,archived:!1},"premium-gold-tour-3-months-campbell-special":{name:"Gold 3 months",price:600,interval:3,group:"gold",active:!1,archived:!0},"premium-gold-4-months":{name:"Gold 4 months",price:636,interval:4,group:"gold",active:!1,archived:!1},"premium-gold-4-months-discount":{name:"Gold 4 months (discount)",price:477,interval:4,group:"gold",active:!1,archived:!1},"premium-gold-6-months":{name:"Gold 6 Months",price:954,interval:6,group:"gold",active:!1,archived:!1},"premium-gold-tour-3-months":{name:"Gold 3 months",price:777,interval:3,group:"gold",active:!1,archived:!1},"premium-gold-annually":{name:"Gold Annually",price:1548,interval:12,group:"gold",active:!1,archived:!1},"premium-gold":{name:"Gold",price:159,interval:1,group:"gold",active:!1,archived:!0},"premium-gold-for-10months":{name:"Gold",price:1290,interval:10,group:"gold",active:!1,archived:!0}},url:"/subscription",relations:[{type:Backbone.HasOne,key:"payment",keyDestination:"payment_attributes",relatedModel:Gigmit.Models.Payment,includeInJSON:["provider_type","provider_id"]}],validation:{plan:{oneOf:["premium-pro-monthly","premium-pro-annually","premium-gold-monthly","premium-gold-flex","premium-gold-flex-annually","premium-gold-tour-monthly-without-trial","premium-gold-free-forever","premium-basic-monthly","premium-basic-annually","premium-start-monthly","premium-start-annually","premium-gold-tour","premium-basic-3-months-non-renewal","premium-start-1-month-non-renewal","premium-basic-1-month-non-renewal","premium-basic-non-recurring","premium-basic","premium-basic-3-months","premium-basic-6-months","premium-start","premium-start-3-months","premium-start-6-months","premium-gold-ready-6-months","premium-start-lifetime","premium-gold-3-months","premium-gold-tour-3-months-campbell-special","premium-gold-4-months","premium-gold-4-months-discount","premium-gold-6-months","premium-gold-tour-3-months","premium-gold-annually","premium-gold","premium-gold-for-10months"]}},cancel:function(e,t){var t=t||void 0;return this.destroy({data:{id:this.get("id"),questionaire:{reason:e,additionalMessage:t}},processData:!0})},previewUpdate:function(){return e.get("/subscription/update_preview",{plan:this.get("plan")})},updatePlan:function(){return this.save({plan:this.get("plan")})},canAccessVenueDatabase:function(){return!/basic/.test(this.get("plan"))},toJSON:function(e){var t=Backbone.RelationalModel.prototype.toJSON.call(this,e);return _.isEmpty(t.coupon)&&delete t.coupon,_.omit(t,"coupon_data","is_in_trial_period")}})}(jQuery),function(e,t){window.Gigmit.Models.InsightRequest=t.RelationalModel.extend({url:"/insight_requests",isPending:function(){return!this.isNew()&&!e.contains(["rejected","granted"],this.get("state"))},isGranted:function(){return"granted"==this.get("state")}})}(window._,window.Backbone),function(e,t){window.Gigmit.Models.ProfileImage=e.RelationalModel.extend({modelName:"ProfileImage",imageUrl:function(e){var i;return e=e||"large_uncropped",i=this.get(e+"_url"),t.isUndefined(i)&&t.has(this.attributes,"file")&&!t.isUndefined(this.get("file")[e])&&(i=this.get("file")[e].url),i},url:function(){var e="/api/v1/artists/"+this.get("artist").get("slug")+"/media_items";return this.isNew()||(e=e+"/"+this.get("id")),e}})}(window.Backbone,window._),function(e,t,i){window.Gigmit.Models.Company=i.RelationalModel.extend({validation:{name:{required:!0}}})}(window.jQuery,window._,window.Backbone),function(e,t,i,n){window.Gigmit.Models.Representative=i.RelationalModel.extend({validation:{name:{required:!0},email:{pattern:"email"},company:{required:!0}},relations:[{type:i.HasOne,key:"company",relatedModel:n.Models.Company,includeInJSON:!1,reverseRelation:{key:"representative",includeInJSON:!1}}],toJSON:function(e){var t=i.RelationalModel.prototype.toJSON.call(this,e);return delete t.company_id,delete t.company_attributes,this.get("company").isNew()?t.company_attributes=this.get("company").toJSON():t.company_id=this.get("company").get("id"),t}})}(window.jQuery,window._,window.Backbone,window.Gigmit),function(e,t,i,n){window.Gigmit.Models.Representation=i.RelationalModel.extend({validation:{representation_type:{required:!0},representative:{required:!0}},relations:[{type:i.HasOne,key:"representative",relatedModel:n.Models.Representative,includeInJSON:!1}],url:function(){var e="/api/v1/artists/"+this.get("artist").get("slug")+"/representations";return this.isNew()||(e=e+"/"+this.get("id")),e},toJSON:function(e){var t=i.RelationalModel.prototype.toJSON.call(this,e);return delete t.representative_id,delete t.representative_attributes,this.get("representative").isNew()?t.representative_attributes=this.get("representative").toJSON():t.representative_id=this.get("representative").get("id"),t}})}(window.jQuery,window._,window.Backbone,window.Gigmit),function(e){Gigmit.Models.Permission=Backbone.RelationalModel.extend({urlRoot:"/permissions",toJSON:function(e){var t=Backbone.Model.prototype.toJSON.call(this,e);return _.pick(t,"id","role")}})}(window),function(e){e.Gigmit.Models.GigAddress=Gigmit.Models.Address.extend({initialize:function(){this.validation=_.extend(this.validation,{location_type:{required:!0,msg:function(){return I18n.t("form_errors.gig.address.location_type")}}})}})}(window),function(e){e.Gigmit.Models.GigCustomField=Backbone.RelationalModel.extend({defaults:{label:""},validation:{label:{required:!0}}})}(window),function(e){e.Gigmit.Models.Gig=Backbone.RelationalModel.extend({defaults:{_application_deadline_days_before_gig_date:7,_available_guaranteed_fee:!1,_music_genres_names_sanitized:[],_repetition_value:7,_repetition_unit:"days",_selectedGigDateOption:"oneday",_start_time:moment({hours:20,minutes:0}),_application_deadline_time:moment({hours:0,minutes:0}),_toDuplicate:!1,accommodation_negotiable:!1,available_backline:!1,available_backstage_room:!1,available_catering:!1,available_guest_list:!1,available_pa:!1,available_promoter_insurance:!1,available_security:!1,available_soundman:!1,available_stage_light:!1,currency:"EUR",custom_fields:[],deal_option:!1,deal_possible_fee_tax:.07,deal_split_amount_for_promoter:.4,fixed_fee_gross_amounts_only:!1,fixed_fee_negotiable:!1,fixed_fee_option:!1,guest_list_count:1,looking_for_dj:!1,looking_for_live:!1,music_genre_ids:[],stage_type:"live_stage",travel_expenses_negotiable:!0,state:"open",send_gig_invites_for_premium_artists:!0,wanted_artist_count:1,premium:!1,related_available_gigs_ids:[]},gig_types:["concert","party","festival","fair","corporate_event","contest","misc","support","private","wedding"],stage_types:["live_stage","dj_booth"],modelName:"Gig",omittedAttributes:["_application_deadline_days_before_gig_date","currency_unit","deal_fee_max","deal_split_amount_for_artist_as_percentage","deal_split_amount_for_artist","deal_split_amount_for_promoter_as_percentage","declined_insurance_pre_damages","fee_sortable","fixed_fee_gross_amounts_only","gig_image","gig_type_cd","id","inquiries_count","insurance_included","music_genres","related_available_gigs_ids","slug","stage_type_cd"],relations:[{type:Backbone.HasOne,key:"address",keySource:"address_attributes",relatedModel:Gigmit.Models.GigAddress},{type:Backbone.HasMany,key:"music_genres",keySource:"music_genres",relatedModel:Gigmit.Models.MusicGenre,includeInJSON:!1},{type:Backbone.HasMany,key:"custom_fields",keySource:"custom_fields",relatedModel:Gigmit.Models.GigCustomField}],validation:{address:function(){return this.get("address").validate()},gig_type:function(e,t,i){return _.contains(this.gig_types,e)?void 0:I18n.t("form_errors.gig.gig_type")},application_deadline:function(e,t,i){var n,s,o,r;return"recurring"!=this.get("_selectedGigDateOption")&&(n=Backbone.Validation.validators.required(e,t,!0,this,i),this.isValid("date_from")&&(s=Backbone.Validation.validators.datetime(e,t,void 0,this),r=Backbone.Validation.validators.isBeforeOrAtGivenDate(e,t,this.get("date_from"),this),"expired"!=this.get("state")&&(o=Backbone.Validation.validators.isFutureDate(e)))),void 0!==n||void 0!==s||void 0!==r||void 0!==o?_.first(_.compact([n?I18n.t("form_errors.gig.application_deadline.required"):!1,s?I18n.t("form_errors.gig.application_deadline.date"):!1,r?I18n.t("form_errors.gig.application_deadline.before_or_at_date",{date_time:moment(this.get("date_from")||new Date).format(Gigmit.Formats.datetime.momentjs)}):!1,o?o:!1])):void 0},_application_deadline_days_before_gig_date:function(e,t,i){if("recurring"==this.get("_selectedGigDateOption")&&this.isNew()){var n=0,s=Backbone.Validation.validators.min(e,t,n,this),o=Backbone.Validation.validators.required(e,t,!0,this,i);if(void 0!==o||void 0!==s)return _.first(_.compact([o?I18n.t("form_errors.gig.application_deadline_days_before_gig_date.required"):!1,s?I18n.t("form_errors.gig.application_deadline_days_before_gig_date.min"):!1]))}},date_from:function(e,t,i){var n=Backbone.Validation.validators.required(e,t,!0,this,i),s=Backbone.Validation.validators.datetime(e,t,void 0,this),o=Backbone.Validation.validators.isFutureOrCurrentDate(e,t,void 0,this);return _.isString(n)||_.isString(s)||_.isString(o)?_.first(_.compact([n?I18n.t("form_errors.gig.date_from."+this.get("_selectedGigDateOption")+".required"):!1,s?I18n.t("form_errors.gig.date_from."+this.get("_selectedGigDateOption")+".datetime"):!1,o?I18n.t("form_errors.gig.date_from."+this.get("_selectedGigDateOption")+".future_or_current_date",{current_date:moment().format(Gigmit.Formats.date.momentjs)}):!1])):void 0},date_to:function(e,t,i){if("fewdays"==this.get("_selectedGigDateOption")){var n=Backbone.Validation.validators.required(e,t,!0,this,i),s=Backbone.Validation.validators.date(e,t,void 0,this),o=Backbone.Validation.validators.isAfterOrAtGivenDate(e,t,this.get("date_from"),this);if(_.isString(n)||_.isString(s)||_.isString(o))return _.first(_.compact([n?I18n.t("form_errors.gig.date_to.required"):!1,s?I18n.t("form_errors.gig.date_to.date"):!1,o?I18n.t("form_errors.gig.date_to.after_or_at_date",{date:moment(this.get("date_from")).format(Gigmit.Formats.date.momentjs)}):!1]))}},_repetition_value:function(e,t,i){if("recurring"==this.get("_selectedGigDateOption")){var n=Backbone.Validation.validators.required(e,t,!0,this,i),s=Backbone.Validation.validators.min(e,t,1,this);if(_.isString(n)||_.isString(s))return _.first(_.compact([n?I18n.t("form_errors.gig.repetition_value.required"):!1,s?I18n.t("form_errors.gig.repetition_value.min"):!1]))}},_repetition_end_date:function(e,t,i){if("recurring"==this.get("_selectedGigDateOption")){var n=Backbone.Validation.validators.required(e,t,!0,this,i),s=Backbone.Validation.validators.date(e,t,void 0,this),o=Backbone.Validation.validators.isAfterOrAtGivenDate(e,t,this.get("date_from"),this);if(_.isString(n)||_.isString(s)||_.isString(o))return _.first(_.compact([n?I18n.t("form_errors.gig.repetition_end_date.required"):!1,s?I18n.t("form_errors.gig.repetition_end_date.date"):!1,o?I18n.t("form_errors.gig.repetition_end_date.after_or_at_date",{date:moment(this.get("date_from")).format(Gigmit.Formats.date.momentjs)}):!1]))}},stage_type:{oneOf:["live_stage","dj_booth"]},available_pa:{required:!0},available_backline:{required:!0},available_stage_light:{required:!0},looking_for_dj:function(e,t,i){var n=this.get("looking_for_live");return 0!=n&&!_.isNull(n)||0!=e&&!_.isNull(e)?void 0:I18n.t("form_errors.gig.looking_for_artist_type")},looking_for_live:function(e,t,i){var n=this.get("looking_for_dj");return 0!=n&&!_.isNull(n)||0!=e&&!_.isNull(e)?void 0:I18n.t("form_errors.gig.looking_for_artist_type")},fixed_fee_option:function(e,t,i){var n=this.get("deal_option"),s=this.get("fixed_fee_negotiable");return s||0!=n&&!_.isUndefined(n)||0!=e&&!_.isUndefined(e)?void 0:I18n.t("form_errors.gig.type_of_fee")},deal_option:function(e,t,i){var n=this.get("fixed_fee_option"),s=this.get("fixed_fee_negotiable");return s||0!=n&&!_.isUndefined(n)||0!=e&&!_.isUndefined(e)?void 0:I18n.t("form_errors.gig.type_of_fee")},wanted_artist_count:[{required:!0,msg:function(){return I18n.t("form_errors.gig.wanted_artist_count")}},{min:1,msg:function(){return I18n.t("form_errors.gig.wanted_artist_count")}}],custom_fields:function(e,t,i){if(e.length>0){var n=e.reduce(function(e,t){return e&&_.isUndefined(t.validate())},!0);if(!n)return I18n.t("form_errors.gig.custom_fields")}},premium:function(e,t,i){var n=[];return e&&(this.get("travel_expenses_negotiable")||n.push(I18n.t("form_errors.gig.premium.missing_travel_expenses_compensation")),this.get("fixed_fee_option")||this.get("deal_option")||n.push(I18n.t("form_errors.gig.premium.missing_minimum_fee")),(this.get("fixed_fee_option")||this.get("deal_option"))&&(this.get("fixed_fee_option")&&this.getFee()<150&&n.push(I18n.t("form_errors.gig.premium.missing_minimum_fee")),this.get("deal_option")&&this.getDealFeeMin()<150&&n.push(I18n.t("form_errors.gig.premium.missing_minimum_fee"))),n.length>0)?(n=[I18n.t("form_errors.gig.premium.general_error_message")].concat(n),n.join(" ")):void 0}},initialize:function(){this._prepareDateAttributesOnInitialization(),this._toggleOptionalDescriptionValues(),this.set("_available_guaranteed_fee",this.isBreakDeal()),this.on("change:stage_type",this._injectStageDimensionValidations),this.on("change:gig_type",this._injectCustomGigTypeValidation),this.on("change:fixed_fee_option",this._toggleFixedFeeOptions),this.on("change:fixed_fee_negotiable",this._toggleFixedFeeNegotiable),this.on("change:deal_option",this._toggleDealOptions),this.on("change:available_guest_list",this._injectGuestListValidation),this.on("change:currency",function(){this.set("currency_unit",this.get("currency"))}),this.on("change:gig_type",function(e,t){"misc"!=t&&this.set("gig_type_custom","")}),this.on("change:_selectedGigDateOption",function(){"oneday"==this.get("_selectedGigDateOption")&&this.isNew()&&this.set("date_to","")})},_calculateDealSplitPartitions:function(){this.set("deal_split_amount_for_promoter_as_percentage",this.get("deal_split_amount_for_promoter")),this.set("deal_split_amount_for_artist",1-this.get("deal_split_amount_for_promoter")),this.set("deal_split_amount_for_artist_as_percentage",this.get("deal_split_amount_for_artist"))},getDealPossibleFeeMinWithoutTax:function(){var e=this._getValueWithoutTax(this.get("deal_possible_fee_min"));return e},getDealPossibleFeeMaxWithoutTax:function(){var e=this._getValueWithoutTax(this.get("deal_possible_fee_max"));return e},getDealPotentialTurnoverMinWithoutTax:function(){var e=this.getDealPossibleFeeMinWithoutTax(),t=this.get("deal_max_number_of_audience"),i=t*e;return i},getDealPotentialTurnoverMaxWithoutTax:function(){var e=this.getDealPossibleFeeMaxWithoutTax(),t=this.get("deal_max_number_of_audience"),i=t*e;return i},getReachedArtistCount:function(){var t,i,n,s=_.compact([this.get("looking_for_live")?"live":void 0,this.get("looking_for_dj")?"dj":void 0]),o={};if(s.length&&(o.artist_type=1==s.length?s:""),this.get("_music_genres_names_sanitized").length&&(o.music_genres=this.get("_music_genres_names_sanitized")),t=this.getFee(),i=Gigmit.Constants.artistSalaryClasses,n=i[i.length-2],!this.get("fixed_fee_negotiable"))if(t>=n)o.fixed_fee={min:n};else{var r=_.indexOf(i,_.first(_.filter(i,function(e){return e>t})));o.fixed_fee={max:i[r]==n?n:i[r]}}return $.get("/api/v1/artists",{api_key:Gigmit.current_profile.api_key,q:o,request_path:e.location.pathname})},_getValueWithoutTax:function(e){var t=this.get("deal_possible_fee_tax");return Number(accounting.toFixed(e/(1+t),2))},isBreakDeal:function(){return _.isNumber(this.get("deal_guaranteed_artist_fee"))&&_.isNumber(this.get("deal_break_even_point"))},stage_type:function(){return Gigmit.Constants.stage_types[this.get("stage_type_cd")]},_injectCustomGigTypeValidation:function(){"misc"==this.get("gig_type")?this.validation=_.extend(this.validation,{gig_type_custom:{required:!0,msg:function(){return I18n.t("form_errors.gig.gig_type_custom")}}}):this.validation=_.omit(this.validation,"gig_type_custom")},_injectStageDimensionValidations:function(){"live_stage"==this.get("stage_type")?this.validation=_.extend(this.validation,{stage_width:[{required:!0,msg:function(){return I18n.t("form_errors.gig.stage_width")}},{min:.01,msg:function(){return I18n.t("form_errors.gig.stage_width")}}],stage_depth:[{required:!0,msg:function(){return I18n.t("form_errors.gig.stage_width")}},{min:.01,msg:function(){return I18n.t("form_errors.gig.stage_width")}}]}):this.validation=_.omit(this.validation,"stage_width","stage_depth")},_injectFixedFeeValidation:function(){1==this.get("fixed_fee_option")?this.validation=_.extend(this.validation,{fixed_fee_max:{min:0,msg:function(){return I18n.t("form_errors.gig.fixed_fee_max")}}}):this.validation=_.omit(this.validation,"fixed_fee_max")},_injectDealValidations:function(){1==this.get("deal_option")?(this.validation=_.extend(this.validation,{deal_max_number_of_audience:{min:1,msg:function(){return I18n.t("form_errors.gig.deal_max_number_of_audience")}},deal_possible_fee_min:[{min:.01,msg:function(){return I18n.t("form_errors.gig.deal_possible_fee_min.required")}},{fn:function(e,t,i){var n=this.get("deal_possible_fee_max");return _.isNumber(parseFloat(n))&&e>n?I18n.t("form_errors.gig.deal_possible_fee_min.lteq",{upper:n}):void 0}}],deal_possible_fee_max:[{pattern:"number",msg:function(){return I18n.t("form_errors.gig.deal_possible_fee_max.required")}},{fn:function(e,t,i){var n=this.get("deal_possible_fee_min");return _.isNumber(parseFloat(n))&&n>e?I18n.t("form_errors.gig.deal_possible_fee_max.gteq",{lower:n}):void 0}}],deal_possible_fee_tax:[{pattern:"number",msg:function(){return I18n.t("form_errors.gig.deal_possible_fee_tax")}},{min:0,msg:function(){return I18n.t("form_errors.gig.deal_possible_fee_tax")}},{max:.5,msg:function(){return I18n.t("form_errors.gig.deal_possible_fee_tax")}}],deal_split_amount_for_promoter:{min:0,max:1}}),1==this.get("_available_guaranteed_fee")?this.validation=_.extend(this.validation,{deal_guaranteed_artist_fee:{min:0,msg:function(){return I18n.t("form_errors.gig.deal_guaranteed_artist_fee")}},deal_break_even_point:[{min:0,msg:function(){return I18n.t("form_errors.gig.deal_break_even_point.required")}},{fn:function(e,t,i){var n=this.get("deal_break_even_point"),s=this.get("deal_possible_fee_max"),o=this.get("deal_max_number_of_audience"),r=o*s;return _.isNumber(parseFloat(n))&&n>=r?I18n.t("form_errors.gig.deal_break_even_point.lt",{upper:r}):void 0}}]}):this.validation=_.omit(this.validation,"deal_guaranteed_artist_fee","deal_break_even_point")):this.validation=_.omit(this.validation,"deal_max_number_of_audience","deal_possible_fee_min","deal_possible_fee_max","deal_possible_fee_tax","deal_split_amount_for_promoter","deal_guaranteed_artist_fee","deal_break_even_point")},_injectGuestListValidation:function(){this.get("available_guest_list")?this.validation=_.extend(this.validation,{guest_list_count:[{min:1,msg:function(){return I18n.t("form_errors.gig.guest_list_count")}},{pattern:"digits",msg:function(){return I18n.t("form_errors.gig.guest_list_count")}},{required:!0,msg:function(){return I18n.t("form_errors.gig.guest_list_count")}}]}):this.validation=_.omit(this.validation,"guest_list_count")},_prepareDateAttributesOnInitialization:function(){if(this.has("date_from")){var e=moment(this.get("date_from"),Gigmit.Formats.iso8601);e.isValid()&&this.set("date_from",e._d)}if(this.has("date_to")){var e=moment(this.get("date_to"),Gigmit.Formats.iso8601);e.isValid()&&this.set("date_to",e._d)}this.isNew()&&!this.get("_toDuplicate")||!this.get("date_to")||this.set("_selectedGigDateOption","fewdays")},getRecurringGigDates:function(){return this._prepareRecurringGigDates()},_canPreviewRecurringDates:function(){return this.isValid("date_from","_repetition_unit","_repetition_value","_repetition_end_date")},_canPreviewRecurringApplicationDeadlines:function(){return this._canPreviewRecurringDates()&&this.isValid("_application_deadline_days_before_gig_date")},_prepareRecurringGigDates:function(e){e=e||{};for(var t=function(e,t){var i=moment();return e.isBefore(i)?t:e},i=moment(this.get("date_from")),n=moment(this.get("_repetition_end_date")).hour(i.hour()).minute(i.minute()),s=this.get("_repetition_value"),o=this.get("_repetition_unit"),r=this.get("_application_deadline_days_before_gig_date"),a=[i.clone()._d],l=[t(i.clone().subtract(r,"days"),i)._d],c=i.clone().add(s,o);n>=c;)a.push(c.clone()._d),l.push(t(c.clone().subtract(r,"days"),c.clone())._d),c.add(s,o);return e.date_from=a,e.application_deadline=l,delete e.date_to,e},_toggleDealOptions:function(){var e=["_available_guaranteed_fee","deal_possible_fee_tax","deal_split_amount_for_promoter","deal_max_number_of_audience","deal_possible_fee_min","deal_possible_fee_max","deal_guaranteed_artist_fee","deal_break_even_point"];this._injectDealValidations(),this.isNew()&&!this.get("_toDuplicate")&&_.each(e,_.bind(function(e){this.get("deal_option")?this.set(e,this.defaults[e]):this.set(e,"")},this)),this.get("deal_option")?(this.on("change:_available_guaranteed_fee",function(){this.get("_available_guaranteed_fee")||(this.set("deal_guaranteed_artist_fee",""),this.set("deal_break_even_point",""))}),this.on("change:deal_split_amount_for_promoter",this._calculateDealSplitPartitions)):(this.off("change:deal_split_amount_for_promoter"),this.off("change:_available_guaranteed_fee"))},_toggleFixedFeeOptions:function(){this._injectFixedFeeValidation(),this.isNew()&&(this.get("fixed_fee_option")?this.set("fixed_fee_negotiable",!1):this.set("fixed_fee_max",""));
},_toggleFixedFeeNegotiable:function(){this.get("fixed_fee_negotiable")&&this.set("fixed_fee_option",!1)},_toggleOptionalDescriptionValues:function(){var e=["available_backline","available_backstage_room","available_catering","available_pa","available_stage_light"];this.on(_.map(e,function(e){return["change",e].join(":")}).join(" "),function(){_.each(e,_.bind(function(e){var t=e.replace("available","annotation_for");this.get(e)||this.set(t,"")},this))})},getDealPossibleRevenueMaxForPromoter:function(){var e=this.getDealPotentialTurnoverMaxWithoutTax();return this.isBreakDeal()&&(e-=this.get("deal_break_even_point")),Number(accounting.toFixed(e*this.get("deal_split_amount_for_promoter"),2))||0},getDealFeeMin:function(){return this.isBreakDeal()?this.get("deal_guaranteed_artist_fee"):0},getDealFeeMax:function(){var e,t=this.getDealPotentialTurnoverMaxWithoutTax(),i=this.get("deal_split_amount_for_artist"),n=this.get("deal_guaranteed_artist_fee"),s=this.get("deal_break_even_point");return e=this.isBreakDeal()?Number(accounting.toFixed((t-s)*i,2))+n:Number(accounting.toFixed(t*i,2)),e||0},getGigType:function(){return"misc"==this.get("gig_type")?this.get("gig_type_custom"):this.getGigTypeText(this.get("gig_type"))},getGigTypeText:function(e){return I18n.t("activerecord.enums.gig.gig_types."+e)},getMusicGenreNames:function(){return _.map(this.get("music_genres").models,function(e){return e.get("name")})},isfeeAvailable:function(){return this.getFee()>0},isGrossAmountOnly:function(){return this.get("fixed_fee_gross_amounts_only")},getFee:function(){var e=_.max(_.compact([this.get("fixed_fee_max"),this.get("deal_fee_max")]));return _.isFinite(e)?e:0},getAPIPath:function(){var e=["api","v1","gigs"];return this.isNew()||e.push(this.get("id")),"/"+e.join("/")},getEditPath:function(){return this.getPath()+"/edit"},getPath:function(e){e=e||{};var t=["gigs"];this.isNew()||t.push(this.get("slug"));var i=URI.build({path:"/"+t.join("/"),query:URI.buildQuery(e)});return i.toString()},applicationDeadlineIndicationDate:function(){var e=moment(this.get("application_deadline"));return e.subtract(2,"weeks")},isCloseToDeadline:function(){var e=moment(),t=moment(this.get("application_deadline")),i=this.applicationDeadlineIndicationDate().hours(e.hours()).minutes(e.minutes()).seconds(e.seconds());return e.isBetween(i,t)},dateFormatted:function(){var e=moment(this.get("date_from")),t=moment(this.get("date_to")),i=e.format(Gigmit.Formats.opportunitiesSearch.date.full);return t.isValid()&&(i=t.isSame(e,"year")?t.isSame(e,"month")?[e.format(Gigmit.Formats.opportunitiesSearch.date.day_only),t.format(Gigmit.Formats.opportunitiesSearch.date.full)].join(" \u2013 "):[e.format(Gigmit.Formats.opportunitiesSearch.date.day_and_month_only),t.format(Gigmit.Formats.opportunitiesSearch.date.full)].join(" \u2013 "):[e.format(Gigmit.Formats.opportunitiesSearch.date.full),t.format(Gigmit.Formats.opportunitiesSearch.date.full)].join(" \u2013 ")),i},parse:function(e,t){if(!_.isEmpty(e.date_from)){var i=moment(e.date_from,Gigmit.Formats.iso8601);i.isValid()?e.date_from=i._d:delete e.date_from}if(!_.isEmpty(e.date_to)){var i=moment(e.date_to,Gigmit.Formats.iso8601);i.isValid()?e.date_to=i._d:delete e.date_to}return e},toJSON:function(e){var t=Backbone.RelationalModel.prototype.toJSON.call(this,e);return this.isNew()&&"recurring"==this.get("_selectedGigDateOption")&&(t=this._prepareRecurringGigDates(t)),{gig:_.omit(t,this.omittedAttributes)}}})}(window),function(e,t){t.Models.SupportSlotGig=t.Models.Gig.extend({applyArtistPresets:function(e){return this.set({distance:50,gig_type:"support",looking_for_dj:"dj"==e.get("artist_type"),looking_for_live:"live"==e.get("artist_type"),title:I18n.t("common.support_act_for_artist",{artist_name:e.get("name")}),travel_expenses_negotiable:!1,fixed_fee_negotiable:!0}),this}})}(window._,window.Gigmit),function(e,t){window.Gigmit.Models.SavedSearch=t.RelationalModel.extend()}(window._,window.Backbone),function(e,t,i,n){var s=e.RelationalModel.extend();window.Gigmit.Models.WatchList=e.RelationalModel.extend({url:function(){return"/api/v1/watch_lists/"+this._watchListId()},relations:[{type:e.HasMany,relatedModel:s,key:"items",includeInJSON:!1}],add:function(e,s,o){return o=o||{},this.watchListId=s,t.ajax(this.url()+"/add",{method:"POST",dataType:"json",data:i.extend({},{api_key:(n.artist||n.promoter).get("api_key"),id:e.get("id"),type:e.modelName.toLowerCase()},o)}).done(i.bind(function(e){this.get("items").add({id:e.watchable_id,type:e.watchable_type}),this.trigger("itemAdded")},this))},remove:function(e,s,o){return o=o||{},this.watchListId=s,t.ajax(this.url()+"/remove",{method:"DELETE",dataType:"json",data:i.extend({},{api_key:(n.artist||n.promoter).get("api_key"),id:e.get("id"),type:e.modelName.toLowerCase()},o)}).done(i.bind(function(){this.get("items").remove(e),this.trigger("itemRemoved")},this))},fetchItems:function(e){return e="gigs"===e?"gigs":"artist",this.get("items").fetch(e)},hasItem:function(e){var t=e.get("id"),n=e.modelName;return n=i.contains(["Artist","Promoter"],n)?"Profile":n,!i.isUndefined(this.get("items").find(function(e){return e.get("id")==t&&e.get("type").toLowerCase()==n.toLowerCase()}))},_watchListId:function(){return this.watchListId||this.get("watch_list_profile.default_watchlist_id")},artists:function(){return this.get("items").filter(function(e){return"Artist"==e.modelName})},gigs:function(){return this.get("items").filter(function(e){return"Gig"==e.modelName})}})}(window.Backbone,window.jQuery,window._,window.Gigmit),function(){window.Gigmit.Mixins.Profile={defaults:{currency:"EUR",tags:[]},validation:{name:{required:!0,msg:function(){return I18n.t("validations.profiles.name.required")}},slug:function(e,t,i){var n=!!e&&URI({path:e}).normalizePath().path()==e;return n?void 0:I18n.t("validations.profiles.slug.path")}},relations:[{collectionType:Gigmit.Collections.Conversations,type:Backbone.HasMany,key:"conversations",includeInJSON:!1,reverseRelation:{key:"conversation_profile",keySource:"profile_id",includeInJSON:!1,type:Backbone.HasOne}},{collectionType:Gigmit.Collections.Messages,relatedModel:Gigmit.Models.Message,type:Backbone.HasMany,key:"messages",includeInJSON:!1,reverseRelation:{key:"message_profile",includeInJSON:!1}},{relatedModel:Gigmit.Models.WatchList,type:Backbone.HasOne,key:"watch_list",includeInJSON:!1,reverseRelation:{key:"watch_list_profile",includeInJSON:!1,type:Backbone.HasOne}}],addTag:function(e,t){var i=_.clone(this.get("tags"));return t=_.defaults(t||{},{save:!0}),i.push(e),i=_.unique(i),this.set("tags",i),t.save?this.save(void 0,{url:this._updatePath()}):void 0},addCustomAttribute:function(e,t){return this.addTag("custom_attribute_"+e+":"+t)},addPreferredMusicGenreCategory:function(e){return this.addTag("preferredMusicGenreCategory:"+e)},removePreferredMusicGenreCategory:function(e){return this.removeTag("preferredMusicGenreCategory:"+e)},getTags:function(e){var t=this.get("tags");return _.isUndefined(e)||(t=_.map(_.filter(t,function(t){var i=t.split(":");return i[0]==e}),function(t){return t.replace(e+":","")})),t},removeTag:function(e){var t=_.clone(this.get("tags"));return t=_.without(t,e),this.set("tags",t),this.save(void 0,{url:this._updatePath()})},checkSlug:function(e){return $.ajax("/api/v1/profiles/check_slug",{data:{api_key:Gigmit.apiKey,profile_name:e},dataType:"json",type:"post"})},slugChanged:function(e){var e=e||this.get("slug");return!this.isNew()&&this.initialSlug!=e},url:function(){var e=this.slugChanged()?this.initialSlug:this.get("slug");return this.isNew()?"/profiles":"/"+e},_combineCustomGigs:function(){var e=_.compact([this.get("played_gigs"),this.get("upcoming_gigs")]),t=[];_.each(e,function(e){t=t.concat(e.toJSON())}),this.set("custom_gigs",t)},getSoundsCount:function(){return this.get("external_media_items").filter(function(e){return"sound"==e.itemType()}).length},hasSounds:function(){return this.getSoundsCount()>0},getVideoCount:function(){return this.get("external_media_items").filter(function(e){return"video"==e.itemType()}).length},hasVideos:function(){return this.getVideoCount()>0}}}(),function(e){e.Gigmit.Models.Artist=Backbone.RelationalModel.extend($.extend(!0,{},Gigmit.Mixins.Profile,{defaults:{custom_gigs:[],fixed_fee_on_request:!0,played_gigs:[],releases:[],tax_rate:0,upcoming_gigs:[]},modelName:"Artist",nonPremiumMaxGenreCount:5,relations:_.union([{collectionType:Gigmit.Collections.CustomGigs,type:Backbone.HasMany,key:"custom_gigs",relatedModel:Gigmit.Models.CustomGig,includeInJSON:!1,reverseRelation:{key:"artist",includeInJSON:!1}},{collectionType:Gigmit.Collections.Representations,type:Backbone.HasMany,key:"representations",relatedModel:Gigmit.Models.Representation,includeInJSON:!1,reverseRelation:{key:"artist",includeInJSON:!1}},{collectionType:Gigmit.Collections.CustomGigs,type:Backbone.HasMany,key:"played_gigs",relatedModel:Gigmit.Models.PlayedGig,includeInJSON:["date_from","address","title"],reverseRelation:{key:"artist",includeInJSON:!1}},{collectionType:Gigmit.Collections.CustomGigs,type:Backbone.HasMany,key:"upcoming_gigs",relatedModel:Gigmit.Models.UpcomingGig,includeInJSON:["date_from","address","title"],reverseRelation:{key:"artist",includeInJSON:!1}},{collectionType:Gigmit.Collections.ArtistReleases,type:Backbone.HasMany,key:"releases",keySource:"releases",keyDestination:"artist_releases_attributes",relatedModel:Gigmit.Models.ArtistRelease,includeInJSON:["id","label","release_type","title","year","_destroy"],reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasMany,key:"members",keySource:"members",keyDestination:"members",relatedModel:Gigmit.Models.ArtistMember,includeInJSON:["id","name","position"]},{type:Backbone.HasOne,key:"artistic_profile",relatedModel:Gigmit.Models.ArtisticProfile,includeInJSON:!1,reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasOne,key:"main_music_genre",relatedModel:Gigmit.Models.MusicGenre,includeInJSON:!1},{type:Backbone.HasMany,key:"sub_music_genres",keyDestination:"sub_music_genre_ids",relatedModel:Gigmit.Models.SubMusicGenre,includeInJSON:"id",reverseRelation:{key:"artist",includeInJSON:!1}},{collectionType:Gigmit.Collections.ArtistExternalMediaItems,type:Backbone.HasMany,key:"external_media_items",keySource:"external_media_items",keyDestination:"external_media_items_attributes",relatedModel:Gigmit.Models.ExternalMediaItem,includeInJSON:["id","title","vendor","vendor_item_id","sort_order","_destroy"],reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasOne,key:"address",keySource:"address",keyDestination:"address_attributes",relatedModel:Gigmit.Models.HomebaseAddress,includeInJSON:["city","zip_code","country"],reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasOne,key:"billing_address",keySource:"billing_address",keyDestination:"billing_address_attributes",relatedModel:Gigmit.Models.Address,includeInJSON:["name","street","street_number","city","zip_code","country"]},{type:Backbone.HasMany,key:"press_media_items",keySource:"press_media_items",keyDestination:"press_media_items_hash",relatedModel:Gigmit.Models.PressMediaItem,reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasOne,key:"profile_image",keySource:"profile_image",keyDestination:"profile_image",relatedModel:Gigmit.Models.ProfileImage,includeInJSON:!1,reverseRelation:{key:"artist",type:Backbone.HasOne,includeInJSON:!1}},{type:Backbone.HasMany,key:"social_links",keySource:"social_links",keyDestination:"social_links_attributes",relatedModel:Gigmit.Models.SocialLink,includeInJSON:["id","title","provider","url","_destroy"],reverseRelation:{key:"artist",includeInJSON:!1}},{type:Backbone.HasMany,key:"permissions",relatedModel:Gigmit.Models.Permission,includeInJSON:!1},{collectionType:Gigmit.Collections.ArtistDates,type:Backbone.HasMany,key:"artist_dates",relatedModel:Gigmit.Models.ArtistDate,reverseRelation:{key:"artist",includeInJSON:!1},includeInJSON:!1},{type:Backbone.HasOne,key:"subscription",relatedModel:Gigmit.Models.Subscription,includeInJSON:!1},{collectionType:Gigmit.Collections.SavedSearches,type:Backbone.HasMany,key:"saved_searches",relatedModel:Gigmit.Models.SavedSearch,includeInJSON:!1},{type:Backbone.HasOne,key:"insights",relatedModel:Gigmit.Models.ArtistInsights,includeInJSON:!1,reverseRelation:{key:"artist",includeInJSON:!1,type:Backbone.HasOne}}],Gigmit.Mixins.Profile.relations),omittedAttributes:["api_key","artist_dates","artistic_profile","catering_rider","default_watchlist_id","epk_applications_left","fanradar","id","insights","is_featured","is_ines_talent","is_premium","main_music_genre","pending_opportunities","played_gigs","profile_image","public_fee","sounds","technical_rider","type","upcoming_gigs","users","watched_gigs"],_validation:{artist_type:{required:!0,msg:function(){return I18n.t("validations.artists.artist_type.required")}},fixed_fee:[{required:function(){return!this.get("fixed_fee_on_request")},msg:function(){return I18n.t("validations.artists.salary_min.required")}},{pattern:"digits",msg:function(){return I18n.t("validations.artists.salary_min.digits")}}],main_music_genre_id:{required:!0,msg:function(){return I18n.t("validations.artists.main_music_genre_id.required")}},address:function(){return this.get("address").validate()},tax_rate:{min:0,max:1,pattern:"number",required:!1}},initialize:function(){this.isNew()?this.validation=_.extend(this.validation,this._validation):this.validation=_.extend(this.validation,{founding_year:{pattern:"number",range:[(new Date).getFullYear()-100,(new Date).getFullYear()],required:!1,msg:I18n.t("artists.edit_microsite.founding_year.invalid")}}),this.initialSlug=this.get("slug"),this.on("change:fixed_fee_on_request",this._nullify_fixed_fee)},_nullify_fixed_fee:function(){this.get("fixed_fee_on_request")&&this.set("fixed_fee",null)},addSubMusicGenre:function(e){this.model.get("sub_music_genres").add(e)},removeSubMusicGenre:function(e){this.model.get("sub_music_genres").remove(e)},getAllMusicGenres:function(){var e=_.compact([this.get("main_music_genre")].concat(this.get("sub_music_genres").models));return _.compact(_.filter(e,function(e){return!e.has("_destroy")}))},hasSounds:function(){return _.some(this.get("external_media_items").filter(function(e){return _.contains(["soundcloud","mixcloud","bandcamp"],e.get("vendor"))}))},hasVideos:function(){return _.some(this.get("external_media_items").filter(function(e){return _.contains(["vimeo","youtube"],e.get("vendor"))}))},hasSpotifyAccountConnected:function(){return!_.isEmpty(this.get("external_spotify_id"))},hasYoutubeConnected:function(){return!_.has(this.get("fanradar"),"youtube")},hasVendorConnected:function(e){var t;return t="spotify"==e?this.hasSpotifyAccountConnected():_.has(this.get("fanradar"),e)},hasSpotifySongs:function(){return!_.isEmpty(this.get("external_media_items").filter(function(e){return"spotify"==e.get("vendor")}))},getSoundSample:function(){var e=_.first(this.get("external_media_items").filter(function(e){return"soundcloud"==e.get("vendor")}));return e},getArtistTypeText:function(){return I18n.t("activerecord.enums.artist.artist_types."+this.get("artist_type"))},getBookPath:function(){return"/"+[this.get("slug"),"book"].join("/")},getFanInsightsPath:function(){return"/"+[this.get("slug"),"fan-insights"].join("/")},getProfileImageURL:function(){var e=Gigmit.Constants.profileImagePlaceholderImageURL;return _.isObject(this.get("profile_image"))&&(e=this.get("profile_image").imageUrl("large")),e},removeFromDisfavoredEventTypes:function(e){var t=_.clone(this.get("disfavored_event_types"));t=_.without(t,e),this.set("disfavored_event_types",t)},addToDisfavoredEventTypes:function(e){var t=_.clone(this.get("disfavored_event_types"));t.push(e),this.set("disfavored_event_types",t)},apiWatchlistPath:function(e){return"/"+["api","v1","artists",this.get("slug"),"watchlists",e].join("/")},watchGig:function(e,t,i){var n=$.extend(!0,{gig_id:e.id,api_key:this.get("api_key")},i),s=$.ajax(this.apiWatchlistPath(t)+"/add",{data:n,type:"post"});return s.success(_.bind(function(){var i=_.clone(this.get("watched_gigs")),n=_.find(i,function(t){return t.id==e.get("id")});n=n||{id:e.id,watchlist_ids:[]},i=_.without(i,n),n.watchlist_ids.push(t),n.watchlist_ids=_.uniq(n.watchlist_ids),i.push(n),this.set("watched_gigs",i)},this)),s},unwatchGig:function(e,t){var i=$.ajax(this.apiWatchlistPath(t)+"/remove",{data:{gig_id:e.get("id"),api_key:this.get("api_key")},type:"delete"});return i.success(_.bind(function(){var i=_.clone(this.get("watched_gigs")),n=_.find(i,function(t){return t.id==e.get("id")});i=_.without(i,n),n.watchlist_ids=_.without(n.watchlist_ids,t),i.push(n),this.set("watched_gigs",i)},this)),i},fetchInsights:function(t,i){var n=["/api/v1/artists",this.get("id"),"insights",t,i].join("/");return $.ajax({url:n,data:{api_key:e.Gigmit.Constants.apis.gigmit.key}})},canAddMusicGenre:function(){return this.get("is_premium")||this.musicGenresLeftCount()>0},canAccessVenueDatabase:function(){return this.get("is_premium")&&this.get("subscription").canAccessVenueDatabase()},musicGenresLeftCount:function(){return this.nonPremiumMaxGenreCount-this.getAllMusicGenres().length},getPublicFee:function(){var e,t=this.get("fixed_fee"),i=Gigmit.Constants.artistSalaryClasses[Gigmit.Constants.artistSalaryClasses.length-2],n={};return this.get("fixed_fee_on_request")||(e=_.reject(Gigmit.Constants.artistSalaryClasses,function(e){return t>e}),n=_.isEmpty(e)?{prefix:"above",fee:i}:{prefix:"to",fee:_.first(e)}),n},isBillingDataValid:function(){var e=this.get("billing_address"),t=!_.isEmpty(e)&&void 0==e.validate(),i=!_.isEmpty(this.get("tax_rate"))&&_.isNumber(this.get("tax_rate"));return t&&i},isEpkComplete:function(){var e=!_.isEmpty(this.get("profile_image")),t=this.get("external_media_items").some();return e&&t},toJSON:function(e){var t=Backbone.RelationalModel.prototype.toJSON.call(this,e);return this.isNew()?t=_.pick(t,"address_attributes","artist_type","billing_address_attributes","currency","fixed_fee","fixed_fee_on_request","is_ccs_member","main_music_genre_id","name","phone_number","slug","sub_music_genre_ids","tags"):(this._combineCustomGigs(),t=_.omit(Backbone.RelationalModel.prototype.toJSON.call(this,e),this.omittedAttributes)),t}}))}(window),function(e,t,i,n,s){window.Gigmit.Models.Promoter=n.RelationalModel.extend(t.extend(!0,{},s.Mixins.Profile,{omittedAttributes:["api_key","id","type","played_gigs","address.name","profile_image","watched_artists","default_watchlist_id","watchlists"],relations:e.union([{type:n.HasMany,key:"played_gigs",relatedModel:s.Models.CustomGig,includeInJSON:["date_from","address","title"]},{type:n.HasMany,key:"locations_and_stages",relatedModel:s.Models.LocationStage,includeInJSON:["location","audience_headcount"]},{collectionType:s.Collections.PromoterExternalMediaItems,type:n.HasMany,key:"external_media_items",keySource:"external_media_items",keyDestination:"external_media_items_attributes",relatedModel:s.Models.ExternalMediaItem,includeInJSON:["id","title","vendor","vendor_item_id","sort_order","_destroy"]},{type:n.HasMany,key:"social_links",keySource:"social_links",keyDestination:"social_links_attributes",relatedModel:s.Models.SocialLink,includeInJSON:["id","title","provider","url","_destroy"]},{type:n.HasOne,key:"address",keyDestination:"address_attributes",relatedModel:s.Models.PromoterAddress,includeInJSON:["city","country","name","street","street_number","zip_code"]},{type:n.HasMany,key:"permissions",relatedModel:s.Models.Permission,includeInJSON:!1},{collectionType:s.Collections.InsightRequests,type:n.HasMany,key:"insight_requests",relatedModel:s.Models.InsightRequest,includeInJSON:!1},{type:n.HasMany,key:"custom_gigs",keyDestination:"custom_gigs_attributes",relatedModel:s.Models.CustomGig,includeInJSON:["id","date_from","address","title","highlighted","_destroy"]}],s.Mixins.Profile.relations),validation:{address:function(){return this.get("address").validate()}},initialize:function(){this.isNew()||(this.validation=e.extend(this.validation,{founding_year:{pattern:"number",range:[(new Date).getFullYear()-100,(new Date).getFullYear()],required:!1,msg:i.t("artists.edit_microsite.founding_year.invalid")}}))},apiWatchlistPath:function(e){return"/"+["api","v1","promoters",this.get("slug"),"watchlists",e].join("/")},watchArtist:function(i,n,s){var o=t.extend(!0,{artist_id:i.id,api_key:this.get("api_key")},s),r=t.ajax(this.apiWatchlistPath(n)+"/add",{data:o,type:"post"});return r.success(e.bind(function(){var t=e.clone(this.get("watched_artists")),s=e.find(t,function(e){return e.id==i.get("id")});s=s||{id:i.id,watchlist_ids:[]},t=e.without(t,s),s.watchlist_ids.push(n),s.watchlist_ids=e.uniq(s.watchlist_ids),t.push(s),this.set("watched_artists",t)},this)),r},unwatchArtist:function(i,n){var s=t.ajax(this.apiWatchlistPath(n)+"/remove",{data:{artist_id:i.get("id"),api_key:this.get("api_key")},type:"delete"});return s.success(e.bind(function(){var t=e.clone(this.get("watched_artists")),s=e.find(t,function(e){return e.id==i.get("id")});t=e.without(t,s),s.watchlist_ids=e.without(s.watchlist_ids,n),t.push(s),this.set("watched_artists",t)},this)),s},watchesArtist:function(t,i){var n=this.get("watched_artists").find(function(n){return n.id==t.get("id")&&e.contains(n.watchlist_ids,i)});return!e.isUndefined(n)},votedInquiry:function(t){return!e.isUndefined(t.getVoteForCurrentUser())},getPreferredMusicGenres:function(){var t=e(this.get("tags")).filter(function(e){return(e.match(/preferredMusicGenreCategory/)||[]).length>0});return e(t).map(function(e){return e.replace("preferredMusicGenreCategory:","")})},_updatePath:function(){return"/"+this.get("slug")},_toJSON:function(e){return n.RelationalModel.prototype.toJSON.call(this,e)},markAsSelected:function(){this.set("_selected",!0),this.trigger("selected",this)},markAsUnSelected:function(){this.set("_selected",!1),this.trigger("deselected",this)},canViewFanInsightsForArtist:function(e){return void 0!==this.recentGrantedInsightRequestForArtist(e)},recentGrantedInsightRequestForArtist:function(t){var i=this.get("insight_requests");return e.find(i.sortBy(function(e){return-e.get("created_at")}),function(e){return e.get("artist_id")==t&&"granted"==e.get("state")})},toJSON:function(t){var i={};return this.isNew()?(i=this._toJSON(t),i=e.pick(i,"address_attributes","name","slug","tags")):(this._combineCustomGigs(),i=this._toJSON(t),i=e.omit(i,this.omittedAttributes)),i}}))}(window._,window.jQuery,window.I18n,window.Backbone,window.Gigmit),function(e,t,i,n,s,o){var r=8;e.Gigmit.Models.User=i.RelationalModel.extend({omittedAttributes:["address.name","confirmed","invitation_accepted_at","invitation_sent_at"],url:"/users",relations:[{type:i.HasMany,key:"artists",keyDestination:"artists_attributes",relatedModel:n.Models.Artist,includeInJSON:!0},{type:i.HasMany,key:"promoters",keyDestination:"promoters_attributes",relatedModel:n.Models.Promoter,includeInJSON:!0}],passwordMinLength:r,validation:{email:[{required:!0,msg:function(){return s.t("validations.users.email.required")}},{pattern:"email",msg:function(){return s.t("validations.users.email.pattern")}}],password:[{required:!0,msg:function(){return s.t("validations.users.password.required")}},{minLength:r,msg:function(){return s.t("validations.users.password.minlength")}}],terms_and_conditions_accepted:{acceptance:!0,msg:function(){return s.t("validations.users.is_of_age_18.acceptance")}}},initialize:function(){this.isNew()||(this.validation=o.omit(this.validation,"terms_and_conditions_accepted"))},isProfileAdmin:function(){},_isEmailAvailable:function(i){return i=i||this.get("email"),new e.Promise(function(e){t.getJSON("/api/v1/users/emails",{api_key:n.apiKey,email:i}).done(function(){e(!1)}).fail(function(){e(!0)})})},toJSON:function(e){var t=i.RelationalModel.prototype.toJSON.call(this,e);return this.isNew()&&(o.isEmpty(t.promoters_attributes)&&(t.promoters_attributes=void 0),o.isEmpty(t.artists_attributes)&&(t.artists_attributes=void 0)),{user:o.omit(t,["address.name"])}}})}(window,window.jQuery,window.Backbone,window.Gigmit,window.I18n,window._),function(){window.Gigmit.Models.Comment=Backbone.RelationalModel.extend({omittedAttributes:["commentable_id","user"],relations:[{type:Backbone.HasOne,key:"user",relatedModel:Gigmit.Models.User}],validation:{content:{required:!0}},toJSON:function(e){var t=Backbone.Model.prototype.toJSON.call(this,e);return{comment:_.omit(t,this.omittedAttributes)}}})}(),function(e){e.Gigmit.Models.Payment=Backbone.RelationalModel.extend({defaults:{provider_type:"stripe"},url:"/payments",validation:{cardpan:{required:!0,pattern:"digits"},cardcvc2:{required:!0,pattern:"digits",minLength:3,maxLength:4},provider_type:{required:!0}},toStripeJSON:function(){return{name:this.get("cardholder"),number:this.get("cardpan"),cvc:this.get("cardcvc2"),exp_month:this.get("expiredate_month"),exp_year:this.get("expiredate_year")}},getStripeToken:function(e){Stripe.card.createToken(this.toStripeJSON(),e)},toJSON:function(e){var t=Backbone.Model.prototype.toJSON.call(this,e),i=["provider_type","provider_id"];return _.pick(t,i)}})}(window),function(){window.Gigmit.Models.Vote=Backbone.RelationalModel.extend({})}(),function(e){var t=e.RelationalModel.extend({defaults:{},validation:{first_name:{required:!0},last_name:{required:!0},telephone:{required:!0},email:{format:"email",required:!0}}});window.Gigmit.Models.ArtistContact=t}(window.Backbone),function(e,t){window.Gigmit.Models.PromoterContact=e.RelationalModel.extend({validation:{first_name:{required:!0},last_name:{required:!0},email_address:[{required:!0,msg:function(){return t.t("validations.users.email.required")}},{pattern:"email",msg:function(){return t.t("validations.users.email.pattern")}}]}})}(window.Backbone,window.I18n),function(e,t,i){var n=t.RelationalModel.extend({defaults:{},relations:[{type:t.HasOne,key:"gig",keySource:"gig_id",relatedModel:i.Models.Gig}],initialize:function(){},validation:{},toJSON:function(i){var n=t.Model.prototype.toJSON.call(this,i),s=["accepted_at","artist_id","created_at","declined_at","expired_at","gig","promoter_id","state","updated_at"];return{gig_invite:e.omit(n,s)}}});window.Gigmit.Models.GigInvite=n}(window._,window.Backbone,window.Gigmit),function(e,t,i,n,s,o){var r=e.Collection.extend({commentableId:null,initialize:function(){this.on("all",this._setCommmentableId)},_setCommmentableId:function(){!this.commentableId&&this.length&&(this.commentableId=t.first(this.models).get("commentable_id"))},comparator:function(e){return-n(e.get("created_at")).unix()},url:function(){return"/"+["inquiries",this.commentableId,"comments"].join("/")}}),a=e.RelationalModel.extend({accommodation_options:["accommodation_standard","accommodation_buy_out"],defaults:{custom_fields:[],fixed_fee_negotiable:!0,travel_expenses_included:!0,travel_party_count:1,side_agreements_optional:!1,tags:[],_votes_count:0},modelName:"Inquiry",relations:[{type:e.HasOne,key:"artist_contact",relatedModel:i.Models.ArtistContact},{type:e.HasMany,key:"custom_fields"},{type:e.HasOne,key:"artist",relatedModel:i.Models.Artist,includeInJSON:!1},{type:e.HasOne,key:"gig",relatedModel:i.Models.Gig},{type:e.HasMany,key:"comments",relatedModel:i.Models.Comment,collectionType:r,includeInJSON:!1},{type:e.HasMany,key:"votes",relatedModel:i.Models.Vote,includeInJSON:!1}],initialize:function(){if(this.get("gig.fixed_fee_option")&&!this.get("gig.deal_option")&&this.set("fixed_fee_option",!0),!this.get("gig.fixed_fee_option")&&this.get("gig.deal_option")&&this.isNew()&&(this.set("deal_option",!0),this.set("fixed_fee_negotiable",!1)),this.get("gig.fixed_fee_option")&&this.get("gig.deal_option")&&this.set("fixed_fee_negotiable",!1),t.isUndefined(this.get("accommodation_standard_cd"))||this.set("accommodation_standard",i.Constants.accommodation_standards[this.get("accommodation_standard_cd")]),this.on("change",this.inject_validation_dependancies,this),this.on("change:deal_possible_fee_min",this._update_fee_min_dependencies),this.isNew()&&!t.isEmpty(this.get("gig"))){if(!this.get("gig.custom_fields").isEmpty()){var e=t.map(this.get("gig.custom_fields").models,function(e){return{label:e.get("label"),value:""}});this.set("custom_fields",new window.Gigmit.Collections.CustomGigs(e))}this.get("gig.fixed_fee_option")&&!this.get("gig.deal_option")&&this.get("gig.fixed_fee_max")<=0&&!this.get("gig.fixed_fee_negotiable")&&this.set("fixed_fee",0),this.get("gig.fixed_fee_option")&&!this.get("gig.deal_option")&&this.get("gig.fixed_fee_max")>0&&this.set("fixed_fee_option",!0),this.isNew()&&!this.get("gig.fixed_fee_option")&&this.get("gig.fixed_fee_negotiable")&&!this.get("gig.deal_option")&&this.set("fixed_fee_option",!0);var n=["change:fixed_fee_option","change:deal_option","change:travel_expenses_included","change:accommodation_required"];this.on(n.join(" "),this._checkAttributesIntegrity,this)}this.set("_votes_count",this.get("votes").length),this.listenTo(this.get("votes"),"add remove",t.bind(function(){this.trigger("sync")},this))},_checkAttributesIntegrity:function(){this.get("fixed_fee_option")||(this.unset("fixed_fee"),this.set("fixed_fee_negotiable",!1)),this.get("deal_option")?this.set("deal_possible_fee_min",this.get("deal_possible_fee_min")||this.get("gig.deal_possible_fee_min")):this.unset("deal_possible_fee_min"),this.get("travel_expenses_included")?this.unset("travel_expenses"):this.set("travel_expenses",this.get("travel_expenses")),this.get("accommodation_required")||(this.unset("accommodation_standard"),this.unset("accommodation_buy_out"))},_update_fee_min_dependencies:function(){this._update_deal_possible_fee_min_without_tax(),this._update_amount_of_audience_until_break_even_point(),this._update_deal_potential_turnover(),this._update_deal_fee_max()},_update_deal_possible_fee_min_without_tax:function(){this.set("deal_possible_fee_min_without_tax",Number(s.toFixed(this.get("deal_possible_fee_min")/(1+this.get("gig.deal_possible_fee_tax")),2)))},_update_amount_of_audience_until_break_even_point:function(){this.set("amount_of_audience_until_break_even_point",this.get("gig").isBreakDeal()?Math.ceil(this.get("gig.deal_break_even_point")/this.get("deal_possible_fee_min_without_tax")):0)},_update_deal_potential_turnover:function(){this.set("deal_potential_turnover",this.get("gig.deal_max_number_of_audience")*this.get("deal_possible_fee_min_without_tax"))},_update_deal_fee_max:function(){if(this.get("deal_option")){var e=0;e=this.get("gig").isBreakDeal()?Number(s.toFixed((this.get("deal_potential_turnover")-this.get("gig.deal_break_even_point"))*this.get("gig.deal_split_amount_for_artist"),2))+this.get("gig.deal_guaranteed_artist_fee"):Number(s.toFixed(this.get("deal_potential_turnover")*this.get("gig.deal_split_amount_for_artist"),2)),this.set("deal_fee_max",e)}},annotation_present:function(){return!t.isEmpty(this.get("annotation"))},accommodation_option:function(){return t.isEmpty(this.get("accommodation_standard"))?this.get("accommodation_buy_out"):this.get("accommodation_standard")},accommodation_option_selected:function(){return this.isValid("accommodation_standard")||this.isValid("accommodation_buy_out")},accommodation_standard_selected:function(){return this.get("gig.accommodation_negotiable")&&!t.isEmpty(this.get("accommodation_standard"))},accommodation_buy_out_given:function(){return 1==this.get("gig.accommodation_negotiable")&&t.isNumber(this.get("accommodation_buy_out"))},fee_option_selected:function(){return 1==this.get("fixed_fee_option")||1==this.get("deal_option")},selected_accommodation_option:function(){return this.get("accommodation_required")?this.accommodation_standard_selected()&&this.accommodation_buy_out_given()?"both":this.accommodation_standard_selected()?"standard":this.accommodation_buy_out_given()?"buy_out":void 0:null},validation:{custom_fields:function(e){return e.length&&t.compact(e.pluck("value")).length<e.length?"not all fields were filled.":void 0},travel_party_count:{required:!0,min:0}},inject_validation_dependancies:function(){this.inject_fee_option_validations(),this.inject_fixed_fee_validations(),this.inject_deal_validations(),this._injectTravelExpensesValidations(),this.inject_accommodation_validations()},_injectTravelExpensesValidations:function(){this.get("travel_expenses_included")?this.validation=t.omit(this.validation,"travel_expenses"):t.extend(this.validation,{travel_expenses:{min:0,pattern:"number"}})},inject_accommodation_validations:function(){var e=this;this.get("gig.accommodation_negotiable")&&this.get("accommodation_required")?t.extend(this.validation,{accommodation_standard:function(i){return t.isEmpty(i)&&!t.isNumber(e.get("accommodation_buy_out"))?"pls select accommodation standard or buy out option.":void 0},accommodation_buy_out:function(i,n){return!t.isNumber(i)&&t.isEmpty(e.get("accommodation_standard"))?"pls select accommodation standard or buy out option.":t.isEmpty(i)||t.isNumber(i)?t.isNumber(i)&&0>i?n+"must be greater or equal to 0.":void 0:"numbers only.";
}}):this.validation=t.omit(this.validation,"accommodation_standard","accommodation_buy_out")},inject_fee_option_validations:function(){this.fee_option_selected()?this.validation=t.omit(this.validation,"fixed_fee_option","deal_option"):(1==this.get("gig.fixed_fee_option")&&t.extend(this.validation,{fixed_fee_option:{acceptance:!0}}),1==this.get("gig.deal_option")&&t.extend(this.validation,{deal_option:{acceptance:!0}}))},inject_fixed_fee_validations:function(){var e={};this.get("fixed_fee_option")?(e.min=0,this.get("gig.fixed_fee_negotiable")||(e.max=this.get("gig.fixed_fee_max")),t.extend(this.validation,{fixed_fee:e})):this.validation=t.omit(this.validation,"fixed_fee")},inject_deal_validations:function(){var e=this;this.get("deal_option")?t.extend(this.validation,{deal_possible_fee_min:{min:e.get("gig.deal_possible_fee_min"),max:e.get("gig.deal_possible_fee_max")}}):this.validation=t.omit(this.validation,"deal_possible_fee_min")},addTags:function(e){if(t.isEmpty(e))return!0;e=t.uniq(e);var i=t.clone(this.get("tags")),n=t.difference(e,i);return n.length?this.save({tags:t.uniq(i.concat(e))},{url:this.getPath()}):!1},removeTag:function(e){if(!t.isEmpty(e)){var i=t.clone(this.get("tags"));return this.save({tags:t.without(i,e)},{url:this.getPath()})}},getPath:function(){return"/"+["inquiries",this.get("id")].join("/")},getNestedGigPath:function(){return"/"+["gigs",this.get("gig").get("slug"),"inquiries",this.get("id")].join("/")},decline:function(e,i,n,s){n=t.isUndefined(n)?!1:n;var r="/"+["inquiries",this.id,n?"decline_all":"decline"].join("/"),a=this.save({decline_annotation:e},{url:r,beforeSend:function(e,t){return t.data=JSON.stringify(o.extend(JSON.parse(t.data),{tracking:{rejection_reasons:i,event_source:s}})),!0}});return a.done(t.bind(function(){this.set("state","declined")},this)),a},getCreateMessagePath:function(){var e;return e=t.isEmpty(this.get("conversation"))?[this.getNestedGigPath(),"messages","new"].join("/"):"/messages/"+this.get("conversation").id},getAverageRating:function(){var e=this.get("average_voting_score");if(!e){var t=this.get("votes");e=t.reduce(function(e,t){return e+t.get("score")},0)/this.get("votes").length}return e},addRating:function(e){var n=new i.Models.Vote({score:e});return n.save(void 0,{url:[this.getNestedGigPath(),"votes"].join("/")}).done(t.bind(function(){this.get("votes").add(n)},this))},removeRating:function(){var e=this.getVoteForCurrentUser();return e.destroy({url:[this.getNestedGigPath(),"votes",e.get("id")].join("/")})},getVoteForCurrentUser:function(){return t.first(this.get("votes").filter(function(e){return e.get("user").id==i.current_user.id}))},markAsSelected:function(){this.set("_selected",!0)},markAsUnSelected:function(){this.set("_selected",!1)},toJSON:function(i){var n=e.RelationalModel.prototype.toJSON.call(this,i),s=["accepted_at","accommodation_standard_cd","amount_of_audience_until_break_even_point","artist_type","artist","average_voting_score","catering_rider","city","comments","contract","conversation","country","created_at","deal_fee_max","deal_fee_option","deal_possible_fee_min_without_tax","deal_potential_turnover","declined_at","expired_at","fee","fixed_fee_gross_amounts_only","gig","id","is_ccs_member","is_featured","location","music_genres_sanitized","music_genres","name","premium","read","small_image","state","state","technical_rider","updated_at","votes","withdrawn_at"];return i=t.defaults(i||{},{omit:!0}),{inquiry:i.omit?t.omit(n,s):n}}});window.Gigmit.Models.Inquiry=a}(window.Backbone,window._,window.Gigmit,window.moment,window.accounting,window.jQuery),function(e){e.Gigmit.Models.Slot=Backbone.Model.extend({validation:{date_from:{date:!0,required:!0},gig_id:{required:!0}},url:function(){var e=["gigs",this.get("gig_slug"),"slots"];return"/"+e.join("/")},toJSON:function(e){var t=Backbone.Model.prototype.toJSON.call(this,e);return{slot:_.omit(t,"gig_slug")}}})}(window),function(e,t,i,n,s,o){window.Gigmit.Models.Contract=n.RelationalModel.extend({defaults:{deal_option:!1,fixed_fee_option:!1,with_gigmit_contract:!0},modelName:"Contract",relations:[{type:n.HasOne,key:"gig",relatedModel:s.Models.Gig,includeInJSON:!1},{type:n.HasOne,key:"inquiry",relatedModel:s.Models.Inquiry,includeInJSON:!1},{type:n.HasOne,key:"artist",relatedModel:s.Models.Artist,includeInJSON:!1},{type:n.HasOne,key:"promoter_contact",keyDestination:"promoter_contact",relatedModel:s.Models.PromoterContact}],urlRoot:"/offers",initialize:function(){this.on("change",this._inject_validation_dependencies,this),e.isObject(this.get("gig"))&&e.isObject(this.get("inquiry"))&&(this.get("inquiry").accommodation_standard_selected()&&this.get("inquiry").accommodation_buy_out_given()&&this.set("accommodation_required",null),(this.get("inquiry").accommodation_standard_selected()||this.get("inquiry").accommodation_buy_out_given())&&this._inject_accommodation_validations(),"live_stage"==this.get("gig").stage_type()&&e.extend(this.validation,{stage_width:{pattern:"number",required:!0},stage_depth:{pattern:"number",required:!0}}),this.get("inquiry").get("gig").get("available_guest_list")&&(this.set("available_guest_list",!0),this.set("guest_list_count",this.get("inquiry").get("gig").get("guest_list_count"))),this.get("inquiry").get("gig").get("travel_expenses_negotiable")&&!this.get("inquiry").get("travel_expenses_included")&&this.set("travel_expenses",this.get("inquiry").get("travel_expenses"))),this.on("change:accommodation_required",function(){this.get("accommodation_required")||this.set({selected_accommodation_option:null,accommodation_standard:null,accommodation_buy_out:null})}),this.on(["change:accommodation_required","change:selected_accommodation_option","change:accommodation_standard","change:accommodation_buy_out"].join(" "),this._inject_accommodation_validations,this),this.set("valid_until",t(this.get("valid_until"))._d),this.on("change:fixed_fee",this._update_fixed_fee_totals),this.on(["change:deal_split_amount_for_promoter"].join(" "),this._update_attributes_depending_on_split_amount),this.on(["change:deal_possible_fee_min"].join(" "),this._update_attributes_depending_on_fee_min),this.on(["change:deal_possible_fee_min","change:deal_split_amount_for_promoter"].join(" "),this._update_turnover_and_deal_fee_max),this.isNew()&&e.isNull(this.get("promoter_contact"))&&this.set("promoter_contact",new s.Models.PromoterContact)},_update_fixed_fee_totals:function(){var e=this.get("artist").get("tax_rate"),t=this.get("fixed_fee"),i=t*(1+e);this.set("fixed_fee_with_tax",i)},value_added_tax_amount:function(){return this.get("amount_to_charge")*s.Constants.value_added_tax},_update_turnover_and_deal_fee_max:function(){this.set("deal_potential_turnover_max_without_tax",this.get("gig").get("deal_max_number_of_audience")*this.get("deal_possible_fee_min_without_tax"));var e=this.get("deal_potential_turnover_max_without_tax");this.get("gig").isBreakDeal()?this.set("deal_possible_revenue_max_for_promoter",(e-this.get("gig").get("deal_break_even_point"))*this.get("deal_split_amount_for_promoter")):this.set("deal_possible_revenue_max_for_promoter",e*this.get("deal_split_amount_for_promoter"));var t=0;t=this.get("gig").isBreakDeal()?(this.get("deal_potential_turnover_max_without_tax")-this.get("gig").get("deal_break_even_point"))*this.get("deal_split_amount_for_artist")+this.get("gig").get("deal_guaranteed_artist_fee"):this.get("deal_potential_turnover_max_without_tax")*this.get("deal_split_amount_for_artist"),this.set("deal_fee_max",t)},_get_value_without_fee_tax:function(e){var t=this.get("gig").get("deal_possible_fee_tax");return Number(i.toFixed(e/(1+t),2))},_update_attributes_depending_on_fee_min:function(){this.set("deal_possible_fee_min_without_tax",this._get_value_without_fee_tax(this.get("deal_possible_fee_min"))),this.set("amount_of_audience_until_break_even_point",Math.ceil(this.get("gig").get("deal_break_even_point")/this.get("deal_possible_fee_min_without_tax")))},_update_attributes_depending_on_split_amount:function(){this.set("deal_split_amount_for_promoter_as_percentage",this.get("deal_split_amount_for_promoter")),this.set("deal_split_amount_for_artist",1-this.get("deal_split_amount_for_promoter")),this.set("deal_split_amount_for_artist_as_percentage",this.get("deal_split_amount_for_artist"))},validation:{available_pa:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_backline:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_stage_light:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_catering:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_guest_list:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_backstage_room:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_promoter_insurance:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},available_security:function(t,i){return e.isBoolean(t)?void 0:i+" is required and needs to be true or false."},valid_until:function(t,i){var s=n.Validation.validators.required(t,i,null,null),o=n.Validation.validators.date(t,i,null,null),r=n.Validation.validators.isBeforeOrAtGivenDate(t,i,this.get("gig").get("date_from"),null),a=e.filter([s,o,r],function(t){return!e.isUndefined(t)});return a.length?e.first(a):void 0}},annotation_present:function(){return!e.isEmpty(this.get("annotation"))},catering_rider_present:function(){return e.isNumber(this.get("catering_rider_id"))},travel_expenses_editable:function(){return this.get("gig").get("travel_expenses_negotiable")&&!this.get("inquiry").get("travel_expenses_included")},fee_option_selected:function(){return this.get("fixed_fee_option")||this.get("deal_option")},_inject_validation_dependencies:function(){this._inject_fee_options_validations(),this._inject_fixed_fee_validations(),this._inject_deal_validations(),this._inject_guest_list_validations()},_inject_accommodation_validations:function(){this.validation=e.omit(this.validation,["accommodation_required","selected_accommodation_option","accommodation_standard","accommodation_buy_out"]),e.extend(this.validation,{accommodation_required:function(t){return this.get("inquiry").get("accommodation_required")&&!e.isBoolean(t)?"Please choose whether overnight stay or buy out is provided.":void 0}}),this.get("accommodation_required")&&this.get("inquiry").accommodation_standard_selected()&&this.get("inquiry").accommodation_buy_out_given()&&e.extend(this.validation,{selected_accommodation_option:{required:!0}}),this.get("accommodation_required")&&"standard"==this.get("selected_accommodation_option")&&this.get("inquiry").accommodation_standard_selected()&&e.extend(this.validation,{accommodation_standard:{required:!0}}),this.get("accommodation_required")&&"buy_out"==this.get("selected_accommodation_option")&&this.get("inquiry").accommodation_buy_out_given()&&e.extend(this.validation,{accommodation_buy_out:{pattern:"number",required:!0}})},_inject_fee_options_validations:function(){var t=this;e.isObject(this.get("inquiry"))&&(1==this.get("inquiry").get("fixed_fee_option")?e.extend(this.validation,{fixed_fee_option:function(){return t.fee_option_selected()?void 0:"Please select fee option"}}):this.validation=e.omit(this.validation,"fixed_fee_option"),1==this.get("inquiry").get("deal_option")?e.extend(this.validation,{deal_option:function(){return t.fee_option_selected()?void 0:"Please select fee option"}}):this.validation=e.omit(this.validation,"deal_option"))},_inject_fixed_fee_validations:function(){var t=this;1==this.get("fixed_fee_option")?e.extend(this.validation,{fixed_fee:{min:t.get("inquiry").get("fixed_fee_max"),required:!0}}):this.validation=e.omit(this.validation,"fixed_fee")},_inject_deal_validations:function(){var t=this;1==this.get("deal_option")?e.extend(this.validation,{deal_possible_fee_min:{min:t.get("inquiry").get("deal_possible_fee_min"),max:t.get("gig").get("deal_possible_fee_max"),required:!0}}):this.validation=e.omit(this.validation,"deal_possible_fee_min")},_inject_guest_list_validations:function(){1==this.get("available_guest_list")?e.extend(this.validation,{guest_list_count:function(t,i){return e.isNumber(t)?parseInt(t)!=t?i+" needs to be an integer.":0>=t?i+" needs to be greater than 0.":void 0:i+" needs to be a number,"}}):this.validation=e.omit(this.validation,"guest_list_count")},net_deal_possible_fee_min_artist_share:function(){return this.get("deal_possible_fee_min_without_tax")*this.get("deal_split_amount_for_artist")},net_deal_possible_fee_min_promoter_share:function(){return this.get("deal_possible_fee_min_without_tax")*this.get("deal_split_amount_for_promoter")},fixed_fee_tax_amount:function(){return this.get("fixed_fee_with_tax")-this.get("fixed_fee")},parse:function(e){return e.valid_until=t(e.valid_until)._d,e},getPreview:function(){var t=e.extend(this.toJSON(),{artist_id:this.get("artist").get("id"),gig_id:this.get("gig").get("id")});return o.post(this.getPreviewPath(),t,"html")},getPath:function(){return e.compact([this.urlRoot,this.get("id")]).join("/")},getGigInquiryContractPath:function(){var t=["gigs",this.get("gig").get("slug"),"inquiries",this.get("inquiry").get("id"),"contracts"];return this.isNew()||t.push(this.get("id")),"/"+e.compact(t).join("/")},getPreviewPath:function(){return this.getGigInquiryContractPath()+"/prepare"},accept:function(){return o.ajax({type:"PUT",url:this.getPath()+"/accept"})},decline:function(e){return o.ajax({type:"PUT",url:this.getPath()+"/decline",data:{decline_annotation:e}})},createWithCustomContractAttachment:function(t){var i,n,s=new FormData;i=this.get("customContract"),this.unset("customContract",{silent:!0}),n=this.get("valid_until"),this.unset("valid_until",{silent:!0}),s.append("contract[valid_until]",n);var r=o.param(this.toJSON()).split("&");return e.each(r,function(e){var t=e.split("="),i=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]);s.append(i,n)}),s.append("contract[pdf]",i),s.append("tracking[event_source]",t.tracking.eventSource),this.save(void 0,{data:s,url:this.getGigInquiryContractPath(),processData:!1,contentType:!1,validate:!1})},toJSON:function(t){var i=n.RelationalModel.prototype.toJSON.call(this,t),s=["accepted_at","accommodation_standard_cd","amount_of_audience_until_break_even_point","amount_to_charge","catering_rider_id","created_at","customContract","deal_fee_max","deal_fee_min","deal_max_number_of_audience","deal_possible_fee_min_without_tax","deal_possible_revenue_max_for_promoter","deal_potential_turnover_max_without_tax","deal_split_amount_for_artist_as_percentage","deal_split_amount_for_artist","deal_split_amount_for_promoter_as_percentage","declined_at","expired_at","fixed_fee_gross_amounts_only","fixed_fee_with_tax","id","inquiry_id","jpg","pdf","selected_accommodation_option","stage_type_cd","state","updated_at","withdrawn_at"];return{contract:e.omit(i,s)}}})}(window._,window.moment,window.accounting,window.Backbone,window.Gigmit,window.jQuery),function(e,t){window.Gigmit.Models.Conversation=e.RelationalModel.extend({relations:[{collectionType:t.Collections.Messages,type:e.HasMany,key:"messages",includeInJSON:!1,reverseRelation:{key:"conversation",relatedModel:t.Models.Conversation}}],url:function(){var e=this.collection.profile;return"/api/v1/"+e.get("slug")+"/conversations"}})}(window.Backbone,window.Gigmit),function(e){window.Gigmit.Models.Message=e.RelationalModel.extend()}(window.Backbone),function(e,t,i,n){e.Gigmit.Models.ArtistSearchFilters=i.Model.extend({defaults:{sort:{best_results:!0}},toJSON:function(e){var n=i.Model.prototype.toJSON.call(this,e),s=n.sort;return n={q:t.omit(n,"sort")},t.isObject(s)&&(n=t.extend(n,{sort:t.keys(s)[0],order:t.values(s)[0]})),n}}),e.Gigmit.Collections.ArtistSearchResults=i.PageableCollection.extend({mode:"server",model:n.Models.Artist,url:"/api/v1/artists",_isInitialSearch:!0,sync:function(e,n,s){return s.type="GET",s.dataType="json",s.data.sort=t.first(t.keys(this.filterModel.get("sort"))),s.data.order=t.first(t.values(this.filterModel.get("sort"))),s.data.is_initial_search=this._isInitialSearch,this._isInitialSearch=!1,i.PageableCollection.prototype.sync.call(this,e,n,s)},state:{s:null,firstPage:1,currentPage:1,pageSize:20},queryParams:{api_key:function(){return n.current_profile.api_key},q:function(){return this.filterModel.toJSON().q},request_path:function(){return e.location.pathname},sortKey:null,order:null},parseState:function(e){return{s:e.s,totalPages:e.totalPages,totalRecords:e.totalRecords}},parseRecords:function(e){return t.map(e.results,function(e){return t.extend(e._source,{id:e._id,address:{city:e._source.location_city,country:e._source.location_country},main_music_genre:t.first(e._source.music_genres)})})},getSearchID:function(){return this.state.s}})}(window,window._,window.Backbone,window.Gigmit),function(e,t){window.Gigmit.Models.InquirySearch=t.Model.extend({defaults:{matching:!0,sort:{best_results:!0},state:"new",tags:[]},toJSON:function(e){var i=t.Model.prototype.toJSON.call(this,e),n=i.sort;return i={q:_.omit(i,"sort")},_.isObject(n)&&(i=_.extend(i,{sort:_.keys(n)[0],order:_.values(n)[0]})),i}}),window.Gigmit.Collections.InquirySearchResults=t.PageableCollection.extend({mode:"server",model:Gigmit.Models.Inquiry,url:function(e){var e=e||"inquiries";return"/api/v1/gigs/"+this.gigId+"/"+e},state:{firstPage:1,currentPage:1,perPage:20},allSelected:!1,includedIds:[],excludedIds:[],initialize:function(){this.on("change:_selected",_.bind(function(e,t){this.allSelected?t?this.excludedIds=_.without(this.excludedIds,e.get("id")):this.excludedIds=_.uniq(this.excludedIds.concat([e.get("id")])):t?this.includedIds=_.uniq(this.includedIds.concat([e.get("id")])):this.includedIds=_.without(this.includedIds,e.get("id")),this.trigger("update")},this))},sync:function(e,i,n){return n.type="POST",n.data.sort=_.first(_.keys(this.filterModel.get("sort"))),n.data.order=_.first(_.values(this.filterModel.get("sort"))),t.PageableCollection.prototype.sync.call(this,e,i,n)},queryParams:{api_key:function(){return Gigmit.current_profile.api_key},q:function(){return this.filterModel.toJSON().q},sortKey:null,order:null},parseState:function(e,t,i,n){return{totalRecords:e.total_filtered_records}},parseRecords:function(e,t){return this.totalUnfilteredRecords=e.total_records,e.items},selectAll:function(){return this.includedIds=[],this.excludedIds=[],this.allSelected=!0,this.each(function(e){e.markAsSelected()}),this},deselectAll:function(){return this.includedIds=[],this.excludedIds=[],this.allSelected=!1,this.each(function(e){e.markAsUnSelected()}),this},hasSuccessor:function(e){var t=this.indexOf(this.get(e));return!_.isUndefined(this.at(t+1))},hasPredecessor:function(e){var t=this.indexOf(this.get(e));return!_.isUndefined(this.at(t-1))},getSuccessor:function(e){return this.at(this.indexOf(this.get(e))+1)},getPredeccessor:function(e){return this.at(this.indexOf(this.get(e))-1)},declineSelection:function(t,i){return e.ajax({data:{api_key:Gigmit.current_profile.api_key,decline_annotation:t,included_ids:this.includedIds,excluded_ids:this.excludedIds,q:this.allSelected?this.filterModel.toJSON().q:void 0,tracking:{rejection_reasons:i}},dataType:"json",type:"put",url:this.url("decline_inquiries")})},messageSelection:function(t){return e.ajax({data:{api_key:Gigmit.current_profile.api_key,message:t,included_ids:this.includedIds,excluded_ids:this.excludedIds,q:this.allSelected?this.filterModel.toJSON().q:void 0},dataType:"json",type:"put",url:this.url("message_applicants")})},_hasSelection:function(){return this.allSelected||this.includedIds.length>0},_selectedItemCount:function(){var e=0;return e=this.allSelected?this.state.totalRecords-this.excludedIds.length:this.includedIds.length}})}(jQuery,Backbone),function(){this.JST||(this.JST={}),this.JST["templates/messenger/component"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<div class="messenger__backdrop"></div><div class="messenger__modal"><div class="messenger__modal-header messenger__modal-columns"><div class="messenger__modal-column messenger__modal-column--full-width"><div class="title title--main">'+html_escape(recipient.name)+'</div></div><div class="messenger__modal-columns"><a data-action="'+html_escape("close")+'"><img alt="Icon-close" src="https://www.gigmit.com/assets/icons/icon-close-2425b1bb784913c1821c63a79048dde1.svg" /></a></div></div><div class="messenger__modal-body"><div data-view="'+html_escape("conversation")+'" class="messenger__conversation-stream"><div data-view="'+html_escape("full-conversation-hint")+'" class="messenger__conversation-hint is-hidden"><a href="'+html_escape("/messages")+'">View full conversation</a></div></div></div><div class="messenger__modal-footer"><div class="messenger__composer is-disabled"><div class="messenger__composer-message-container"><pre data-view="'+html_escape("composer-message")+'" class="messenger__composer-message"><br /></pre><textarea name="'+html_escape("message_body")+'" placeholder="'+html_escape("Start typing")+'" required="required" class="messenger__composer-textarea"></textarea></div><div class="messenger__composer-buttons is-hidden"><div data-action="'+html_escape("send-message")+'" disabled="disabled" class="messenger__composer-button messenger__composer-button--send"><span>Send</span></div></div></div></div></div>';return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/messenger/message"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<div data-view="'+html_escape("sender")+'" class="messenger__conversation-item-sender"></div><div class="messenger__message-container"><div class="messenger__message">'+message+'</div><div class="messenger__message-meta">'+html_escape(sent_at)+"</div></div>";return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/artist_page/insights/fan_base_module"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<div class="artist-page__fan-base-header"><div class="artist-page__fan-base-header-vendor">'+function(){return"spotify"==vendor?'<img alt="Edit-artist-spotify-logo-connect" src="https://www.gigmit.com/assets/artist_page/edit-artist-spotify-logo-connect-ed0aa39bf90f016ab8327f87a0e75a7c.svg" />':""}.call(this)+function(){return"facebook"==vendor?'<img alt="Edit-artist-facebook-logo-connect" src="https://www.gigmit.com/assets/artist_page/edit-artist-facebook-logo-connect-054eb0cb22ee4c504ad010ff93cbf23e.svg" />':""}.call(this)+function(){return"youtube"==vendor?'<img alt="Edit-artist-youtube-logo-connect" src="https://www.gigmit.com/assets/artist_page/edit-artist-youtube-logo-connect-4ead785d002bd790c499af70bb8adc5c.svg" />':""}.call(this)+html_escape(title)+'</div><div class="artist-page__fan-base-header-actions"><div data-action="'+html_escape("toggle-details")+'" class="button button--medium button--transparent">'+html_escape(I18n.t("artist_page.fan_base_module.show_details"))+"</div></div></div>";return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/artist_page/insights/fan_base_module_date"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<div class="artist-page__fan-base-date"><div data-view="'+html_escape("date-value")+'" class="artist-page__fan-base-date-value">\u2013</div><div class="artist-page__fan-base-date-label">'+html_escape(dateName)+'</div></div><div class="artist-page__fan-base-growth"><div data-view="'+html_escape("date-growth-total")+'" class="artist-page__fan-base-growth-total"></div><div data-view="'+html_escape("date-growth-percentage")+'" class="artist-page__fan-base-growth-percentage"></div></div>';return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/artist_page/insights/fan_locations_module"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<table class="artist-page__fan-locations-table"><thead><tr><th class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--city artist-page__fan-locations-table-cell--header">'+html_escape(I18n.t("artist_page.fan_locations_module.city"))+'</th><th class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--header"><div class="artist-page__fan-base-header-vendor">'+function(){return"city"!=currentMode&&hasData?function(){return"facebook"==currentSortMode?'<a data-action="'+html_escape("sort-by-facebook")+'" class="artist-page__fan-locations-table-cell-sort artist-page__fan-locations-table-cell-sort--active">'+html_escape(I18n.t("artist_page.fan_locations_module.facebook_fans"))+'</a><i class="icon-caret-down icon--margin-left"></i>':""}.call(this)+function(){return"facebook"!=currentSortMode?'<a data-action="'+html_escape("sort-by-facebook")+'" class="artist-page__fan-locations-table-cell-sort">'+html_escape(I18n.t("artist_page.fan_locations_module.facebook_fans"))+'</a><i class="icon-caret-down icon--margin-left"></i>':""}.call(this):""}.call(this)+function(){return"city"!=currentMode&&hasData?"":html_escape(I18n.t("artist_page.fan_locations_module.facebook_fans"))}.call(this)+'</div></th><th class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--header">'+function(){return"city"!=currentMode&&hasData?function(){return"spotify"==currentSortMode?'<a data-action="'+html_escape("sort-by-spotify")+'" class="artist-page__fan-locations-table-cell-sort artist-page__fan-locations-table-cell-sort--active">'+html_escape(I18n.t("artist_page.fan_locations_module.spotify_monthly_listeners"))+'</a><i class="icon-caret-down icon--margin-left"></i>':""}.call(this)+function(){return"spotify"!=currentSortMode?'<a data-action="'+html_escape("sort-by-spotify")+'" class="artist-page__fan-locations-table-cell-sort">'+html_escape(I18n.t("artist_page.fan_locations_module.spotify_monthly_listeners"))+'</a><i class="icon-caret-down icon--margin-left"></i>':""}.call(this):""}.call(this)+function(){return"city"!=currentMode&&hasData?"":html_escape(I18n.t("artist_page.fan_locations_module.spotify_monthly_listeners"))}.call(this)+'</th></tr></thead><tbody><tr><td class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--city">'+html_escape(userLocationCity)+'<div class="text--small text--light">'+html_escape(I18n.t("artist_page.fan_locations_module.your_location"))+'</div></td><td class="artist-page__fan-locations-table-cell">\u2013<div class="text--small text--light">'+html_escape(I18n.t("artist_page.fan_locations_module.no_data"))+'</div></td><td class="artist-page__fan-locations-table-cell">\u2013<div class="text--small text--light">'+html_escape(I18n.t("artist_page.fan_locations_module.no_data"))+"</div></td></tr></tbody></table>"+function(){return hasData?'<div><a data-action="'+html_escape("toggle-top-cities")+'" class="artist-page__fan-locations-show-more-link">'+function(){return"city"==currentMode?html_escape(I18n.t("artist_page.fan_locations_module.show_top_cities")):""}.call(this)+function(){return"city"!=currentMode?html_escape(I18n.t("artist_page.fan_locations_module.hide_top_cities")):""}.call(this)+"</a></div>":""}.call(this);return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/artist_page/insights/fan_locations_row"]=function(locals){function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}with(locals||{})try{var _$output='<tr><td colspan="2" class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--mobile">'+html_escape(city)+'</td></tr><tr><td class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--city">'+html_escape(city)+function(){return city==cityFromRequest?'<div class="text--small text--light">'+html_escape(I18n.t("artist_page.fan_locations_module.your_location"))+"</div>":""}.call(this)+'</td><td class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--data"><div class="artist-page__fan-base-date-value">'+html_escape(facebook.current)+'</div><div data-vendor="'+html_escape("facebook")+'" class="artist-page__fan-base-growth"><div class="artist-page__fan-base-growth-total">'+html_escape(facebook.growthTotal)+'</div><div class="artist-page__fan-base-growth-percentage">'+html_escape(facebook.growthRate)+'</div></div></td><td class="artist-page__fan-locations-table-cell artist-page__fan-locations-table-cell--data"><div class="artist-page__fan-base-date-value">'+html_escape(spotify.current)+'</div><div data-vendor="'+html_escape("spotify")+'" class="artist-page__fan-base-growth"><div class="artist-page__fan-base-growth-total">'+html_escape(spotify.growthTotal)+'</div><div class="artist-page__fan-base-growth-percentage">'+html_escape(spotify.growthRate)+"</div></div></td></tr>";return _$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}}.call(this),function(e,t,i,n,s){t.Views.Components.WatchListButton=i.View.extend({events:{click:"_toggleItemInList"},initialize:function(t){this.options=e.extend(!0,{texts:{gigs:{watch:n.t("watchlists.watch"),unwatch:n.t("watchlists.unwatch")}},tracking:{}},this.options,t),this.options.watchlistId=s.isFinite(this.options.watchlistId)?this.options.watchlistId:window.Gigmit.current_profile.default_watchlist_id,this.currentProfile=window.Gigmit.artist||window.Gigmit.promoter,this.watchList=this.currentProfile.get("watch_list"),this.listenTo(this.watchList,"itemAdded itemRemoved",this.render)},_toggleItemInList:function(){var e=this.watchList.hasItem(this.model),i={tracking:{event_source:this.options.tracking.event_source}},n=e?this.watchList.remove(this.model,this.options.watchListId,i):this.watchList.add(this.model,this.options.watchListId,i),o=!e,r=this._getToastText(this.model,o);n.success(s.bind(function(){o?t.Notify.success(r):t.Notify.info(r),this.trigger(e?this.watchableType+"Unwatched":this.watchableType+"Watched")},this))},_getToastText:function(e,t){t=t&&!0;var i="",s=this._getItemNameAndListPath(e),o={name:s.name,watch_list_path:s.watchListPath};return i=t?n.t("watchlists.toast_messages."+s.type+".added_html",o):n.t("watchlists.toast_messages."+s.type+".removed_html",o)},_getItemNameAndListPath:function(e){var t="",i=(e.modelName||"").toLowerCase(),n="/watch-list";switch(i){case"gig":t=e.get("title"),n+="/gigs";break;case"artist":t=e.get("name"),n+="/artists"}return{name:t,type:i,watchListPath:n}},render:function(){var e,t=this.watchList.hasItem(this.model);t?(this.$el.removeClass("icon-bookmark-empty").addClass("icon-bookmark"),e=n.t("watchlists.unwatch")):(this.$el.removeClass("icon-bookmark").addClass("icon-bookmark-empty"),e=n.t("watchlists.watch"));var i=this.$el.find('[data-view="watchlist-hint"]');return i.length||i.text(e),this}}),e(function(){var i=e('[data-component="watch-list-button"][data-watchable-type][data-watchable-id]');i.each(function(){var i=e(this),n=i.data("watchable-id"),o=i.data("watchable-type");if(s.contains(["artist","gig"],o)){var r=t.Models[s.classify(o)],a=r.findOrCreate({id:n});a.isNew()||(t.Notify.enableAutoHide(),new t.Views.Components.WatchListButton({el:i,model:a,watchlistId:i.data("watchlist-id"),tracking:{event_source:i.attr("data-tracking-event-source")}}).render())}})})}(window.jQuery,window.Gigmit,window.Backbone,window.I18n,window._),function(e,t,i,n,s,o,r){window.Gigmit.Components=window.Gigmit.Components||{};var a=e.PageableCollection.extend({mode:"infinite",model:s.Models.Message,state:{firstPage:1,currentPage:1,perPage:5},initialize:function(e,t){this.sender=t.sender,this.recipient=t.recipient,this.trackingOptions=t.trackingOptions||{}},url:function(){return"/api/v1/"+this.sender.get("slug")+"/conversations/"+this.conversation.get("id")+"/messages";
},fetch:function(i){return new window.Promise(t.bind(function(e,i){this.sender.get("conversations").fetch({data:{with_profile_id:this.recipient.get("id"),type:"direct_message"},success:t.bind(function(t){this.conversation=t.first(),e()},this),error:i})},this)).then(t.bind(function(){return t.isEmpty(this.conversation)?(this.trigger("sync"),new window.Promise(t.bind(function(e){e([])},this))):e.PageableCollection.prototype.fetch.call(this,i)},this),function(){return new window.Promise(function(e){e([])})})},hasNoResults:function(){return!this.fullCollection.length},parseLinks:function(e){return e.paging},parseRecords:function(e){return this.totalRecords=e.totalRecords,e.items},reply:function(e,t){return this.create({body:e,tracking:{event_source:this.trackingOptions.eventSource}},t)},startNewConversation:function(e,i){i=i?t.clone(i):{};var n=this,o=i.success,r=this.sender.get("id");i.success=function(e,t,i){e.set("sender_id",r,{silent:!0}),n.add(e,i),n.fullCollection.add(e,i),n.conversation=s.Models.Conversation.findOrCreate({id:e.get("conversation_id")}),o&&o.call(i.context,e,t,i)};var a=new s.Models.Message({body:e,recipient_id:this.recipient.get("id")});return this.sender.get("messages").add(a),a.save({tracking:{event_source:this.trackingOptions.eventSource}},i)}}),l=e.View.extend({className:"messenger__conversation-item",template:n["templates/messenger/message"],initialize:function(e){this.currentProfile=e.currentProfile},render:function(){return this.$el.html(this.template({message:t.simpleFormat(this.model.get("body")),sent_at:o(this.model.get("created_at")).format(s.Formats.datetime.momentjs)})),this.$el.toggleClass("messenger__conversation-item--me",this._isSenderCurrentProfile()),this},_isSenderCurrentProfile:function(){return this.currentProfile.get("id")==this.model.get("sender_id")}}),c=e.View.extend({initialize:function(){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection.fullCollection,"add",this._addMessage)},render:function(){if(!t.isEmpty(this.collection.conversation)){var e=this.$el.find('[data-view="full-conversation-hint"]');e.find("a").attr("href","/messages/"+this.collection.conversation.get("id")),e.removeClass("is-hidden")}},_addMessage:function(e){var t=new l({model:e,currentProfile:this.model}).render().$el;this.$el.prepend(t)}});window.Gigmit.Components.Messenger=e.View.extend({className:"messenger is-hidden",events:{'keyup [name="message_body"]':"_onTextInput",'click [data-action="send-message"]':"_sendMessage",'click [data-action="close"]':"hide"},template:n["templates/messenger/component"],_sendEnabled:!1,initialize:function(e){this.sender=e.sender,this.recipient=e.recipient,this.messagesCollection=new a(null,{sender:this.sender,recipient:this.recipient,trackingOptions:e.tracking}),this.listenTo(this.messagesCollection,"sync",this._enableComposer)},render:function(){return this.$el.html(this.template({recipient:{name:this.recipient.get("name")}})),i("body").append(this.$el).addClass("no-scroll"),this.$composer=this.$el.find(".messenger__composer"),this.$bodyTextarea=this.$el.find('[name="message_body"]'),this.$composerMessagePre=this.$el.find('[data-view="composer-message"]'),this.$buttonsContainer=this.$el.find(".messenger__composer-buttons"),this.$button=this.$el.find('[data-action="send-message"]'),this.conversationView=new c({el:this.$el.find('[data-view="conversation"]'),model:this.sender,collection:this.messagesCollection}),this.messagesCollection.fetch(),this},_onTextInput:function(){this._copyBodyToPre(),this._toggleButtons()},_copyBodyToPre:function(){this.$composerMessagePre.text(this.$bodyTextarea.val())},_toggleButtons:function(){this.$buttonsContainer.toggleClass("is-hidden",!this._isBodyValid())},_isBodyValid:function(){return t.strip(this.$bodyTextarea.val()).length>0},_disableComposer:function(){this._sendEnabled=!1,this.$composer.addClass("is-disabled"),this.$bodyTextarea.prop("disabled",!0)},_enableComposer:function(){this._sendEnabled=!0,this.$composer.removeClass("is-disabled"),this.$bodyTextarea.prop("disabled",!1)},_clearComposer:function(){this.$bodyTextarea.val(""),this.$composerMessagePre.text(""),this._enableComposer()},_sendMessage:function(){if(this._sendEnabled&&this._isBodyValid()){var e=t.strip(this.$bodyTextarea.val());this._disableComposer(),t.isEmpty(this.messagesCollection.conversation)?this.messagesCollection.startNewConversation(e):this.messagesCollection.reply(e,{wait:!0,success:t.bind(this._clearComposer,this),error:t.bind(function(){s.Notify.error(r.t("forms.responses.general_error")),this._enableComposer()},this)})}},hide:function(){i("body").append(this.$el).removeClass("no-scroll"),this.remove()},show:function(){this.$el.removeClass("is-hidden")}}),i(function(){i('[data-component="messenger"]').click(function(e){var t=window.Gigmit.Models.Artist.findOrCreate(window.Gigmit.Instances.Artist),n=window.Gigmit.artist||window.Gigmit.promoter,s=i(e.currentTarget),o=s.data("tracking-event-source");new window.Gigmit.Components.Messenger({sender:n,recipient:t,tracking:{eventSource:o}}).render().show()})})}(window.Backbone,window._,window.jQuery,window.JST,window.Gigmit,window.moment,window.I18n),function(e,t,i,n,s,o,r){var a=e.View.extend({template:n["templates/artist_page/insights/fan_locations_row"],render:function(){var e=this.model.toJSON(),i={city:e.city,cityFromRequest:s.result(t.requestLocation,"city",""),facebook:{current:r.formatScalar(e.facebook.current),growthTotal:r.formatGrowthValue(e.facebook.growthTotal,"fans","facebook"),growthRate:r.formatGrowthRate(e.facebook.growthRate)},spotify:{current:r.formatScalar(e.spotify.current),growthTotal:r.formatGrowthValue(e.spotify.growthTotal,"monthly_listeners","spotify"),growthRate:r.formatGrowthRate(e.spotify.growthRate)}};this.setElement(this.template(i)),this.delegateEvents();var n=this.$el.find('.artist-page__fan-base-growth[data-vendor="facebook"]');e.facebook.growthTotal>0?n.addClass("artist-page__fan-base-growth--green"):e.facebook.growthTotal<0&&n.addClass("artist-page__fan-base-growth--red");var o=this.$el.find('.artist-page__fan-base-growth[data-vendor="spotify"]');return e.spotify.growthTotal>0?o.addClass("artist-page__fan-base-growth--green"):e.spotify.growthTotal<0&&o.addClass("artist-page__fan-base-growth--red"),this}});window.Gigmit.Views.ArtistInsightsFanLocations=e.View.extend({_mode:"city",_sortBy:"facebook",_sortDirection:"desc",_maxItems:10,template:n["templates/artist_page/insights/fan_locations_module"],events:{'click [data-action="sort-by-facebook"]':"_sortByFacebook",'click [data-action="sort-by-spotify"]':"_sortBySpotify",'click [data-action="toggle-top-cities"]':"_toggleTopCities"},initialize:function(e){this._initialMaxItems=e.initialMaxItems||this._maxItems,this._eventSource=e.eventSource,o.all([this._fetchSpotify(),this._fetchFacebook()]).then(s.bind(this._prepareAndRender,this)),s.isEmpty(this._requestCity())&&(this._mode="topCities")},render:function(){var n=this._preparedData,o=!s.isEmpty(n),r=this._requestCity(),l=s.result(t.requestLocation,"city","");this.$tableContainer=this.$el.find('[data-view="locations-data"]'),this.$tableContainer.html(this.template({hasData:o,currentMode:this._mode,currentSortMode:this._sortBy,userLocationCity:l})),this.$autocompleteEl=this.$el.find('[name="fan-locations-city"]'),n="city"!=this._mode||s.isEmpty(r)?n.slice(0,this.maxItems()):s.compact([s.find(this._preparedData,function(e){return e.city.toLowerCase()==r.toLowerCase()})]);var c=s.map(n,function(t){return new a({model:new e.Model(t)}).render().$el});return s.isEmpty(c)||this.$tableContainer.find("tbody").html(c),o&&this.$autocompleteEl.select2({allowClear:!0,data:s.map(this._preparedData,function(e){return{id:e.city.toLowerCase(),text:e.city}}),placeholder:i.t("artist_page.fan_locations_module.city_search.placeholder")}).on("change",s.bind(function(e){t.AmplitudeTracker.trackEvent("Fan Insights - Fan Locations - Searched By City",{fan_insights_event_source:this._eventSource,fan_insights_locations_search_city:e.val}),this._selectedCity=e.val,this._mode="city",this.render()},this)),this},maxItems:function(){var e=this._maxItems;return this.initialRender||(this.initialRender=!0,e=this._initialMaxItems),e},setSort:function(e,t){this._sortBy="spotify"===e?"spotify":"facebook",this._sortDirection="asc"===t?"asc":"desc",this._prepareAndRender()},_requestCity:function(){return this._selectedCity||s.result(t.requestLocation,"city","")},_toggleTopCities:function(){this._mode="city"==this._mode?"topCities":"city","topCities"==this._mode&&t.AmplitudeTracker.trackEvent("Fan Insights - Fan Locations - Viewed Top Cities",{fan_insights_event_source:this._eventSource}),this.render()},_sortByFacebook:function(){"spotify"==this._sortBy&&t.AmplitudeTracker.trackEvent("Fan Insights - Fan Locations - Sorted By Facebook Fans",{fan_insights_event_source:this._eventSource}),this.setSort("facebook","desc")},_sortBySpotify:function(){"facebook"==this._sortBy&&t.AmplitudeTracker.trackEvent("Fan Insights - Fan Locations - Sorted By Spotify Monthly Listeners",{fan_insights_event_source:this._eventSource}),this.setSort("spotify","desc")},_fetchSpotify:function(){return new o(s.bind(function(e){this.model.fetch("spotify","monthly_listeners").done(e)},this))},_fetchFacebook:function(){return new o(s.bind(function(e){this.model.fetch("facebook","fans").done(e)},this))},_prepareAndRender:function(){this._prepareData(),this.render()},_prepareData:function(){var e=this.model.groupedByCity();e=s.sortBy(e,s.bind(function(e){return e[this._sortBy].current*("desc"==this._sortDirection?-1:1)},this)),this._preparedData=e}}),window.Gigmit.Views.ArtistInsightsFanBase=e.View.extend({_detailsShown:!1,_vendorViews:[],_vendorDates:{spotify:["followers","monthly_listeners","popularity_score"],facebook:["fans","page_views","people_reached","reactions"],youtube:["subscribers","video_views","video_reactions","average_likes"]},events:{'click [data-action="toggle-all-details"]':"_toggleDetails"},initialize:function(e){this._eventSource=e.eventSource},render:function(){return this._vendorViews=s.map(this._vendorDates,s.bind(function(t,i){return new c({artist:this.model,model:new e.Model({vendor:i,dates:t})}).render()},this)),this.$el.find(".artist-page__fan-base-container").append(s.map(this._vendorViews,function(e){return e.$el})),this.$toggleDetailsButton=this.$el.find('[data-action="toggle-all-details"]'),this},_toggleDetails:function(){this._detailsShown=!this._detailsShown,1==this._detailsShown&&t.AmplitudeTracker.trackEvent("Fan Insights - Fan Base - Viewed Details",{fan_insights_event_source:this._eventSource}),s.each(this._vendorViews,function(e){e.toggleDetails()});var e=this._detailsShown?i.t("artist_page.fan_base_module.hide_details"):i.t("artist_page.fan_base_module.show_details");this.$toggleDetailsButton.text(e)}});var l=e.View.extend({className:"artist-page__fan-base-date-container artist-page__fan-base-date-container--no-data is-hidden",template:n["templates/artist_page/insights/fan_base_module_date"],initialize:function(e){this.artist=e.artist},render:function(){return this.$el.html(this.template({dateName:i.t("artist_page.fan_base_module."+this.model.get("vendor")+"."+this.model.get("date"))})),this.model.get("isMainDate")&&(this.$el.addClass("artist-page__fan-base-date-container--main"),this.show()),"youtube"!=this.model.get("vendor")&&this._fetchData().then(s.bind(this._updateData,this)),this},_fetchData:function(){return new window.Promise(s.bind(function(e){this.artist.fetchInsights(this.model.get("vendor"),this.model.get("date")).done(e)},this))},_updateData:function(e){var t=e.date,i=e.growth||{},n=i.total,o=i.percentage;if(s.isNumber(t)&&(this.$el.find('[data-view="date-value"]').text(this._formatValue(t)),this.$el.removeClass("artist-page__fan-base-date-container--no-data"),s.isNumber(n)&&s.isNumber(o))){var a=n>0?" artist-page__fan-base-growth--green":0>n?" artist-page__fan-base-growth--red":"";this.$el.find('[data-view="date-growth-total"]').text(r.formatGrowthValue(n,this.model.get("date"),this.model.get("vendor"))),this.$el.find('[data-view="date-growth-percentage"]').text(r.formatGrowthRate(o)),this.$el.find(".artist-page__fan-base-growth").addClass(a)}},_formatValue:function(e){var t;return t="spotify"==this.model.get("vendor")&&"popularity_score"==this.model.get("date")?[e,100].join("/"):r.formatScalar(e)},hide:function(){this.model.get("isMainDate")||this.$el.addClass("is-hidden")},show:function(){this.$el.removeClass("is-hidden")}}),c=e.View.extend({_detailsShown:!1,className:"artist-page__fan-base-channel",template:n["templates/artist_page/insights/fan_base_module"],events:{'click [data-action="toggle-details"]':"toggleDetails"},initialize:function(e){this.artist=e.artist},render:function(){var t=this.model.get("vendor");return this.$el.html(this.template({title:i.t("artist_page.fan_base_module."+t+".title"),vendor:t})),this._dateViews=s.map(this.model.get("dates"),s.bind(function(i,n){return new l({artist:this.artist,model:new e.Model({vendor:t,date:i,isMainDate:0==n})}).render()},this)),this.$el.append(s.map(this._dateViews,function(e){return e.$el})),"youtube"==this.model.get("vendor")&&(this.$el.append('<div class="artist-page__fan-base-coming-soon">'+i.t("artist_page.fan_base_module.coming_soon")+"</div>"),this.$el.addClass("artist-page__fan-base-channel--coming-soon")),this.$toggleDetailsButton=this.$el.find('[data-action="toggle-details"]'),this},toggleDetails:function(){this._detailsShown=!this._detailsShown,this._detailsShown?this._showDetails():this._hideDetails();var e=this._detailsShown?i.t("artist_page.fan_base_module.hide_details"):i.t("artist_page.fan_base_module.show_details");this.$toggleDetailsButton.text(e)},_showDetails:function(){s.each(this._dateViews,function(e){e.show()})},_hideDetails:function(){s.each(this._dateViews,function(e){e.hide()})}})}(window.Backbone,window.Gigmit,window.I18n,window.JST,window._,window.Promise,window.Gigmit.Formatters.InsightsNumberFormatter),function(e,t,i,n,s){var o=i.View.extend({vendors:{mixcloud:{playerUrl:"//www.mixcloud.com/widget/iframe/?{#autoPlay}&embed_type=widget_standard&embed_uuid={#id}&feed=https%3A%2F%2Fwww.mixcloud.com{#feedURL}&hide_artwork=1&hide_cover=0&hide_tracklist=1&light=&mini=&replace=0&stylecolor=",autoPlayParameter:{disabled:"autoplay=0",enabled:"autoplay=1"}},soundcloud:{playerUrl:"https://w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/{#id}&{#autoPlay}&"+e.param({show_artwork:"false",sharing:"false",buying:"false",show_user:"false",show_playcount:"false"}),autoPlayParameter:{disabled:"auto_play=false",enabled:"auto_play=true"}},bandcamp:{playerUrl:"https://bandcamp.com/EmbeddedPlayer/{#id}/size=small/bgcol=333333/linkcol=ffffff/artwork=none/transparent=true/{#autoPlay}",autoPlayParameter:{disabled:"autoplay=0",enabled:"autoplay=1"}},spotify:{playerUrl:"/spotify/track/{#id}/preview_embed?{#autoPlay}",autoPlayParameter:{disabled:"autoplay=0",enabled:"autoplay=1"}}},initialize:function(){i.on("artistPage:mediaPlayer:itemClicked",t.bind(function(e){t.isUndefined(this.model.get("currentMediaItem"))||this.model.get("currentMediaItem").get("id")!=e.get("id")?this.model.set("currentMediaItem",e):this.model.unset("currentMediaItem")},this)),this.listenTo(this.model,"change:currentMediaItem",this._renderWithAutoPlay)},_renderWithAutoPlay:function(){return this.render(!0)},render:function(i){i=i||!1;var n=this.model.get("currentMediaItem");if(this.$el.empty(),!t.isEmpty(n)){var s=e("<iframe>").attr("frameborder",0).addClass("comp-card__media-player-iframe"),o=n.get("vendor");s.attr("src",this._playerWidgetUrl(o,i)),this.$el.append(s)}return this},_playerWidgetUrl:function(e,t){var i,n=this.model.get("currentMediaItem"),s=this.vendors[e],o=n.get("vendor_item_id"),r=s.autoPlayParameter[1==t?"enabled":"disabled"];if("mixcloud"==e){var a=o.split(";")[0],l=o.split(";")[1];i=s.playerUrl.replace("{#id}",a),i=i.replace("{#feedURL}",l)}else i=s.playerUrl.replace("{#id}",o);return i=i.replace("{#autoPlay}",r)}}),r=i.View.extend({className:"comp-card__media-list-item",events:{click:"_togglePlay"},initialize:function(n){this.listIndex=n.index,this.template=t.template(e("#artist-page-media-list-item-template").html()),i.on("artistPage:mediaPlayer:itemClicked",t.bind(function(e){var t=this._currentPlayState();t=this.model.get("id")!=e.get("id")?!1:!t,this.model.set("isPlaying",t),this.render()},this))},render:function(){var e=this.model.toJSON();return e.listIndex=t.sprintf("%02d",this.listIndex),this.$el.html(this.template(e)),this.$el.toggleClass("is-playing",this._currentPlayState()),this},_currentPlayState:function(){return this.model.get("isPlaying")||!1},_togglePlay:function(){i.trigger("artistPage:mediaPlayer:itemClicked",this.model)}}),a=i.View.extend({initialize:function(){this.collection=new i.Collection(this.collection)},render:function(){var e=t.map(this.collection.models,t.bind(function(e,t){return new r({model:e,index:t+1})},this));this.$el.find('[data-view="media-player-item-list"]').empty().append(t.map(e,function(e){return e.render().$el}));var n=t.result(t.first(e),"model");return this.playerView=new o({el:this.$el.find('[data-view="media-player-stage"]'),model:new i.Model({currentMediaItem:n})}).render(),this}}),l=i.View.extend({events:{click:"_showVideoModal"},initialize:function(){this.model=t.find(this.collection,function(e){return e.get("highlighted")})},render:function(){return t.isEmpty(this.model)||this.model._getThumbnailUrl().then(t.bind(function(e){this.$el.css("background-image","url("+e+")")},this)),this},_showVideoModal:function(){i.trigger("artistPage:videos:playVideo",this.model)}}),c=i.View.extend({render:function(){return this.mediaPlayerView=new a({el:this.$el.find('[data-view="media-player"]'),collection:this.model.get("external_media_items").sounds()}).render(),this.videoPlayerView=new l({el:this.$el.find('[data-view="video-player"]'),collection:this.model.get("external_media_items").videos()}).render(),this._handleScrollEvent(),this},_handleScrollEvent:function(){this._initialYPosition=this.$el.get(0).offsetTop,window.onscroll=t.bind(function(){var e=window.pageYOffset,t=this._initialYPosition-e-15,n=0>=t;this.$el.toggleClass("is-sticky",n),i.trigger("artistPage:compCard:isSticky",n)},this)}}),u=i.View.extend({events:{'click [data-action="toggle-show-all"]':"_toggleShowAll"},render:function(){return this},hide:function(){this.$el.addClass("is-hidden")},show:function(){this.$el.removeClass("is-hidden")},_toggleShowAll:function(){this.$el.toggleClass("artist-page__gigs-table--collapsed")}}),d=i.View.extend({events:{'click [data-action="show-upcoming-gigs"]':"_showUpcomingGigs",'click [data-action="show-past-gigs"]':"_showPastGigs"},render:function(){return this.$showPastGigsButton=this.$el.find('[data-action="show-past-gigs"]'),this.$showUpcomingGigsButton=this.$el.find('[data-action="show-upcoming-gigs"]'),this.pastGigsTableView=new u({el:this.$el.find('[data-table="past-gigs"]')}).render(),this.upcomingGigsTableView=new u({el:this.$el.find('[data-table="upcoming-gigs"]')}).render(),this},_showPastGigs:function(){this.$showUpcomingGigsButton.removeClass("artist-page__gigs-tab-button--active"),this.$showPastGigsButton.addClass("artist-page__gigs-tab-button--active"),this.pastGigsTableView.show(),this.upcomingGigsTableView.hide()},_showUpcomingGigs:function(){this.$showUpcomingGigsButton.addClass("artist-page__gigs-tab-button--active"),this.$showPastGigsButton.removeClass("artist-page__gigs-tab-button--active"),this.pastGigsTableView.hide(),this.upcomingGigsTableView.show()}}),h=i.View.extend({className:"artist-page__video-modal-container",events:{'click [data-action="close-modal"]':"_closeModal"},initialize:function(){this.template=t.template(e("#artist-page-video-modal-template").html())},render:function(){var i=this.model.toJSON();return this.$el.html(this.template(i)),e("body").append(this.$el),this.model._getThumbnailUrl().then(t.bind(function(e){this.$el.find('[data-view="video-container"]').css("background-image","url("+e+")")},this)),this},_closeModal:function(){this.remove()}}),p=i.View.extend({className:"artist-page__videos-carousel-item",events:{click:"_showModal"},initialize:function(){this.template=t.template(e("#artist-page-video-carousel-item-template").html())},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model._getThumbnailUrl().then(t.bind(function(e){this.$el.find("[data-thumbnail]").css("background-image","url("+e+")")},this)),this},_showModal:function(){i.trigger("artistPage:videos:playVideo",this.model)}}),f=i.View.extend({initialize:function(){var e=t.filter(this.collection.videos(),function(e){return e.get("visible")});this.collection=new i.Collection(e),this.listenTo(i,"artistPage:videos:playVideo",this._showModal)},render:function(){var e=[],i=this.collection.map(function(t){var i=new p({model:t});return e.push(i),i.render().$el});return this.$el.empty().append(i),this.$el.slick({arrows:!1,dots:!0,slidesToShow:2,responsive:[{breakpoint:768,settings:{dots:!0,infinite:!1,slidesToScroll:1,slidesToShow:1,variableWidth:!0}}]}),t.each(e,function(e){e.delegateEvents()}),this},_showModal:function(e){this.modalView=new h({model:e}).render()}}),m=i.View.extend({initialize:function(){this.listenTo(i,"artistPage:compCard:isSticky",this._scrolledListener)},render:function(){return this.$siteHeader=this.$el.find('[data-view="artist-page-site-header"]'),this.fanBaseView=new s.Views.ArtistInsightsFanBase({model:this.model,el:this.$el.find('[data-view="fan-base-module"]'),eventSource:"artist_page"}).render(),this.fanLocationsView=new s.Views.ArtistInsightsFanLocations({model:this.model.get("insights"),el:this.$el.find('[data-view="fan-locations-module"]'),eventSource:"artist_page"}),this.gigsView=new d({el:this.$el.find('[data-view="gigs-module"]')}).render(),this.compCardView=new c({el:this.$el.find('[data-view="comp-card"]'),model:this.model}).render(),this.videosView=new f({el:this.$el.find('[data-view="videos"]'),collection:this.model.get("external_media_items")}).render(),this},_scrolledListener:function(e){this.$siteHeader.toggleClass("is-scrolled",e)}});e(function(){var t=e('[data-view="artist-page"]'),i=window.Gigmit.Models.Artist.findOrCreate(window.Gigmit.Instances.Artist);t.length&&new m({el:t,model:i}).render()})}(window.jQuery,window._,window.Backbone,window.I18n,window.Gigmit);